(()=>{"use strict";var e={1530:(e,t,s)=>{var a=s(9104),i=s(1849),o=s(8734),n=s(1758),l=s(8912),r=s(562),d=s(455),u=s(8790),c=s(2703);s(4748);const h={key:0,class:"row full-width"},m={key:0,class:"row full-width justify-center tree-mini-item-expand"},p={key:0},_={key:1},g={inheritAttrs:!1},f=Object.assign(g,{__name:"uf-app-navigation",setup(e){const t=(0,n.OA)().use,s=(0,o.KR)([]),i=(0,n.EW)((()=>{let e=[];return t.base_s.forEach((s=>{if(!s.hide&&s.view_s.length>0&&"main-top"==s.navigation){let a={id:s.id,type:"base",title:s.title,icon:s.icon,selectable:!1,to:"",children:[]};s.view_s.forEach((e=>{if(!e.hide){let i={id:e.id,type:"view",title:e.title,icon:e.icon,to:"/"+s.id+"/"+e.id,children:[]};t.decore.queries.data.forEach((t=>{t.base_id==s.id&&t.view_id==e.id&&null==t.parent&&i.children.push(t)})),a.children.push(i)}})),e.push(a)}})),e}));function l(e){console.log()}return(e,r)=>{const d=(0,n.g2)("q-icon"),c=(0,n.g2)("q-item-section"),g=(0,n.g2)("q-item"),f=(0,n.g2)("q-chip"),b=(0,n.g2)("q-tree");return(0,n.uX)(),(0,n.Wv)(b,{nodes:i.value,"node-key":"id","label-key":"title",expanded:(0,o.R1)(t).expanded_nodes,"onUpdate:expanded":r[0]||(r[0]=e=>(0,o.R1)(t).expanded_nodes=e),selected:s.value,"onUpdate:selected":r[1]||(r[1]=e=>s.value=e),"no-connectors":"",accordion:""},{"default-header":(0,n.k6)((e=>["base"==e.node.type?((0,n.uX)(),(0,n.CE)("div",h,[(0,n.bF)(g,{class:"tree-item-base full-width row",dense:"",onClick:t=>l(e.node.id)},{default:(0,n.k6)((()=>[(0,n.bF)(c,{class:"items-center",avatar:""},{default:(0,n.k6)((()=>[(0,n.bF)(d,{class:"tree-item-base-icon",name:e.node.icon},null,8,["name"])])),_:2},1024),(0,n.bF)(c,null,{default:(0,n.k6)((()=>[(0,n.eW)((0,u.v_)(e.node.title),1)])),_:2},1024),e.node.children.length>0?((0,n.uX)(),(0,n.Wv)(c,{key:0,avatar:""},{default:(0,n.k6)((()=>[(0,o.R1)(t).expanded_nodes.includes(e.node.id)?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(d,{key:0,name:"mdi-chevron-down"})),(0,o.R1)(t).expanded_nodes.includes(e.node.id)?((0,n.uX)(),(0,n.Wv)(d,{key:1,name:"mdi-chevron-up"})):(0,n.Q3)("",!0)])),_:2},1024)):(0,n.Q3)("",!0)])),_:2},1032,["onClick"]),(0,o.R1)(t).drawer_mini?((0,n.uX)(),(0,n.CE)("div",m,[(0,o.R1)(t).expanded_nodes.includes(e.node.id)?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(d,{key:0,name:"mdi-chevron-down"})),(0,o.R1)(t).expanded_nodes.includes(e.node.id)?((0,n.uX)(),(0,n.Wv)(d,{key:1,name:"mdi-chevron-up"})):(0,n.Q3)("",!0)])):(0,n.Q3)("",!0)])):(0,n.Q3)("",!0),"view"==e.node.type?((0,n.uX)(),(0,n.Wv)(g,{key:1,class:"tree-item-view full-width row",dense:"",exact:"",to:e.node.to},{default:(0,n.k6)((()=>[(0,n.bF)(c,{class:"items-center",avatar:""},{default:(0,n.k6)((()=>[(0,n.bF)(d,{class:"tree-item-view-icon",name:e.node.icon},null,8,["name"])])),_:2},1024),(0,n.bF)(c,null,{default:(0,n.k6)((()=>[(0,n.eW)((0,u.v_)(e.node.title),1)])),_:2},1024),e.node.children.length>0?((0,n.uX)(),(0,n.Wv)(c,{key:0,avatar:""},{default:(0,n.k6)((()=>[(0,o.R1)(t).expanded_nodes.includes(e.node.id)?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(d,{key:0,name:"mdi-chevron-down",onClick:(0,a.D$)((s=>(0,o.R1)(t).expanded_nodes.push(e.node.id)),["prevent"])},null,8,["onClick"])),(0,o.R1)(t).expanded_nodes.includes(e.node.id)?((0,n.uX)(),(0,n.Wv)(d,{key:1,name:"mdi-chevron-up",onClick:(0,a.D$)((s=>(0,o.R1)(t).expanded_nodes.pop(e.node.id)),["prevent"])},null,8,["onClick"])):(0,n.Q3)("",!0)])),_:2},1024)):(0,n.Q3)("",!0)])),_:2},1032,["to"])):(0,n.Q3)("",!0),"user"!=e.node.type||(0,o.R1)(t).drawer_mini?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(g,{key:2,class:"tree-item-query full-width row",dense:"",exact:"",to:JSON.parse(e.node.to)},{default:(0,n.k6)((()=>[(0,n.bF)(c,{class:"items-center",avatar:""}),(0,n.bF)(c,null,{default:(0,n.k6)((()=>[(0,n.bF)(f,{class:"tree-item-query-chip",style:(0,u.Tr)({"padding-left":16*e.node.depth+"px"}),outline:"",label:e.node.title,title:e.node.title},null,8,["style","label","title"])])),_:2},1024),(0,n.bF)(c,{avatar:""},{default:(0,n.k6)((()=>[e.node.children.length>0?((0,n.uX)(),(0,n.CE)("div",p,[(0,o.R1)(t).expanded_nodes.includes(e.node.id)?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(d,{key:0,name:"mdi-chevron-down",onClick:s=>(0,o.R1)(t).expanded_nodes.push(e.node.id)},null,8,["onClick"])),(0,o.R1)(t).expanded_nodes.includes(e.node.id)?((0,n.uX)(),(0,n.Wv)(d,{key:1,name:"mdi-chevron-up",onClick:s=>(0,o.R1)(t).expanded_nodes.pop(e.node.id)},null,8,["onClick"])):(0,n.Q3)("",!0)])):((0,n.uX)(),(0,n.CE)("div",_,[0==e.node.children.length?((0,n.uX)(),(0,n.Wv)(d,{key:0,class:"tree-item-query-icon",dense:"",round:"",flat:"",name:"mdi-delete",onClick:(0,a.D$)((s=>(0,o.R1)(t).decore.queries.removeQuery(e.node.id)),["prevent"])},null,8,["onClick"])):(0,n.Q3)("",!0)]))])),_:2},1024)])),_:2},1032,["to"]))])),_:1},8,["nodes","expanded","selected"])}}});var b=s(739),v=s(9001),k=s(5329),y=s(3418),w=s(4609),R=s(8141),E=s(8582),C=s.n(E);const q=f,F=q;C()(f,"components",{QTree:b.A,QBtn:v.A,QItem:k.A,QItemSection:y.A,QIcon:w.A,QChip:R.A});const A={key:0,style:{width:"300px"}},X={class:"row justify-end items-center"},Q={class:"col-auto"},x={key:0,class:"entry-text"},V={key:1,class:"entry-text"},W={class:"col-auto"},I={inheritAttrs:!1},O=Object.assign(I,{__name:"uf-app-actor",setup(e){const t=(0,n.OA)().use,s=(0,n.EW)((()=>{let e=null;return t.decore.actor.active_s.length>0?e=t.decore.actor.active_s[t.decore.actor.active_s.length-1]:t.decore.actor.item_s.length>0&&(e=t.decore.actor.item_s[t.decore.actor.item_s.length-1]),e}));return(e,a)=>{const i=(0,n.g2)("q-circular-progress"),l=(0,n.g2)("q-icon"),r=(0,n.g2)("q-badge"),d=(0,n.g2)("q-btn");return(0,n.uX)(),(0,n.CE)(n.FK,null,[s.value?((0,n.uX)(),(0,n.CE)("div",A,[(0,n.Lk)("div",X,[(0,n.Lk)("div",Q,[s.value.result?((0,n.uX)(),(0,n.CE)("div",V,(0,u.v_)(s.value.result),1)):((0,n.uX)(),(0,n.CE)("div",x,(0,u.v_)(s.value.title),1))]),(0,n.Lk)("div",W,[!s.value.finished&&s.value.progress>0?((0,n.uX)(),(0,n.Wv)(i,{key:0,thickness:.25,value:s.value.progress,size:"21px"},null,8,["value"])):s.value.finished||0!==s.value.progress?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(i,{key:1,indeterminate:"",thickness:.25,size:"21px"})),s.value.finished&&s.value.success?((0,n.uX)(),(0,n.Wv)(l,{key:2,size:"21px",name:"mdi-check-circle",color:"info"})):s.value.finished&&!s.value.success?((0,n.uX)(),(0,n.Wv)(l,{key:3,size:"21px",name:"mdi-alert-circle",color:"warning"})):(0,n.Q3)("",!0)])])])):(0,n.Q3)("",!0),(0,n.bF)(d,{dense:"",flat:"",round:"",icon:"mdi-menu-open"},{default:(0,n.k6)((()=>[(0,o.R1)(t).decore.actor.active_s.length>1?((0,n.uX)(),(0,n.Wv)(r,{key:0,floating:""},{default:(0,n.k6)((()=>[(0,n.eW)((0,u.v_)((0,o.R1)(t).decore.actor.active_s.length),1)])),_:1})):(0,n.Q3)("",!0)])),_:1})],64)}}});var U=s(2807),D=s(7201),j=s(7569),T=s(7066),S=s(2048),M=s(4031);const K=(0,U.A)(O,[["__scopeId","data-v-07f6c40b"]]),L=K;C()(O,"components",{QDialog:D.A,QCard:j.A,QCardSection:T.A,QCircularProgress:S.A,QIcon:w.A,QBtn:v.A,QBadge:M.A});var P=s(7630);const B=(0,n.Lk)("img",{src:"logo.png",alt:"Logo",height:"38px"},null,-1),z={inheritAttrs:!1},H=Object.assign(z,{__name:"uf-app-layout",setup(e){const t=(0,n.OA)().use,s=(0,n.EW)((()=>{let e=t.route.params.view_id+JSON.stringify(t.route.query);return e}));return(e,a)=>{const i=(0,n.g2)("q-toolbar-title"),l=(0,n.g2)("q-space"),r=(0,n.g2)("q-btn"),d=(0,n.g2)("q-toolbar"),h=(0,n.g2)("q-header"),m=(0,n.g2)("q-drawer"),p=(0,n.g2)("router-view"),_=(0,n.g2)("q-page-container"),g=(0,n.g2)("q-footer"),f=(0,n.g2)("q-layout");return(0,n.uX)(),(0,n.Wv)(f,null,{default:(0,n.k6)((()=>[(0,n.bF)(c.A,{use:(0,o.R1)(t)},null,8,["use"]),(0,n.bF)(h,{bordered:"",class:"de-main-header bg-black text-white"},{default:(0,n.k6)((()=>[(0,n.bF)(d,null,{default:(0,n.k6)((()=>[B,(0,n.bF)(i,null,{default:(0,n.k6)((()=>[(0,n.eW)((0,u.v_)((0,o.R1)(t).title),1)])),_:1}),(0,n.bF)(l),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)((0,o.R1)(t).dialog_s,(e=>((0,n.uX)(),(0,n.Wv)(r,{key:e.id,flat:"",dense:"",round:"",icon:e.icon,label:e.title,onClick:s=>(0,o.R1)(t).toogleAppDialog(e.id)},null,8,["icon","label","onClick"])))),128))])),_:1})])),_:1}),(0,o.R1)(t).shrink?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.Wv)(m,{key:0,"show-if-above":"",model:!0,width:300,side:"left",breakpoint:0,bordered:"",mini:(0,o.R1)(t).drawer_mini},{default:(0,n.k6)((()=>[(0,n.bF)(d,{class:"bg-grey-2"},{default:(0,n.k6)((()=>[(0,n.bF)(r,{dense:"",flat:"",round:"",icon:(0,o.R1)(t).drawer_icon,onClick:a[0]||(a[0]=e=>(0,o.R1)(t).toogleLayoutDrawer())},null,8,["icon"])])),_:1}),(0,n.bF)(F,{use:(0,o.R1)(t)},null,8,["use"]),(0,n.bF)(d,{class:"app-navigation-footer bg-grey-2"})])),_:1},8,["mini"])),(0,n.bF)(_,null,{default:(0,n.k6)((()=>[((0,n.uX)(),(0,n.Wv)(p,{key:s.value}))])),_:1}),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)((0,o.R1)(t).dialog_s,(e=>((0,n.uX)(),(0,n.Wv)(P.A,{key:e.id,id:e.id},null,8,["id"])))),128)),(0,n.bF)(g,{bordered:"",class:"bg-grey-8 text-white"},{default:(0,n.k6)((()=>[(0,n.bF)(d,{dense:""},{default:(0,n.k6)((()=>[(0,n.eW)((0,u.v_)((0,o.R1)(t).show_dialog_s)+" ",1),(0,n.bF)(l),(0,n.bF)(L,{use:(0,o.R1)(t)},null,8,["use"])])),_:1})])),_:1})])),_:1})}}});var Y=s(500),N=s(133),$=s(9351),G=s(6769),J=s(1173),Z=s(2701),ee=s(1102),te=s(8889);const se=H,ae=se;C()(H,"components",{QLayout:Y.A,QHeader:N.A,QToolbar:$.A,QToolbarTitle:G.A,QSpace:J.A,QBtn:v.A,QDrawer:Z.A,QPageContainer:ee.A,QFooter:te.A});const ie={__name:"App",setup(e){const t=(0,o.Kh)((0,r.V)().use.app);t.router=(0,d.rd)(),t.route=(0,d.lq)(),(0,l.A)((()=>({title:t.title})));const s=e=>{if("Enter"==e.key&&t.show_dialog_s.length>0){let e=t.show_dialog_s[t.show_dialog_s.length-1];t.ref[e].getSubmitable()&&t.ref[e].submitWidgets()}if("Escape"==e.key&&t.show_dialog_s.length>0){let e=t.show_dialog_s[t.show_dialog_s.length-1];t.ref[e].getCloseable()&&t.ref[e].closeDialog()}};return(0,n.sV)((()=>{window.addEventListener("keyup",s)})),(0,n.xo)((()=>{window.removeEventListener("keyup",s)})),(e,s)=>((0,n.uX)(),(0,n.Wv)(ae,{use:t},null,8,["use"]))}},oe=ie,ne=oe;var le=s(604),re=s(587);const de=(0,le.M_)((()=>{const e=(0,re.Ey)();return e})),ue=[{name:"base",path:"/:base_id",component:()=>Promise.all([s.e(121),s.e(782)]).then(s.bind(s,4782)),props:!0},{name:"view",path:"/:base_id/:view_id",component:()=>Promise.all([s.e(121),s.e(782)]).then(s.bind(s,4782)),props:!0},{name:"dialog",path:"/:base_id/:view_id/:dialog_id/:item_id",component:()=>Promise.all([s.e(121),s.e(782)]).then(s.bind(s,4782)),props:!0},{name:"subdialog",path:"/:base_id/:view_id/:dialog_id/:item_id/:subdialog_id/:subitem_id",component:()=>Promise.all([s.e(121),s.e(782)]).then(s.bind(s,4782)),props:!0},{name:"login",path:"/login",redirect:"/dbi_mayor_priv/dbi_login_view/dbi_login_dialog/empty"},{name:"404",path:"/404",component:()=>s.e(33).then(s.bind(s,5033))},{path:"/:catchAll(.*)*",component:()=>s.e(33).then(s.bind(s,5033))}],ce=ue,he=(0,le.wE)((function(){const e=d.LA,t=(0,d.aE)({scrollBehavior:()=>({left:0,top:0}),routes:ce,history:e("/")});return t.beforeEach(((e,t,s)=>{const a=(0,r.V)();let i=localStorage.getItem("user_token"),o=!1;function n(e){let t=!1;return e in a.use&&(t=!0),t}function l(e){let t=!1;return e in a.use&&(t=!0),t}"base_id"in e.params&&!n(e.params.base_id)&&(o=!0),"view_id"in e.params&&!l(e.params.view_id)&&(o=!0),o?a.use.app.role>1&&null==i?s("/login"):s("/404"):s()})),t}));async function me(e,t){const s=e(ne);s.use(i.A,t);const a="function"===typeof de?await de({}):de;s.use(a);const n=(0,o.IG)("function"===typeof he?await he({store:a}):he);return a.use((({store:e})=>{e.router=n})),{app:s,store:a,router:n}}const pe={config:{}};var _e=s(9012);(0,_e.k)("/static/service-worker.js",{ready(){},registered(){},cached(){},updatefound(){},updated(){},offline(){},error(){}});const ge="/static/",fe=/\/\//,be=e=>(ge+e).replace(fe,"/");async function ve({app:e,router:t,store:s},a){let i=!1;const o=e=>{try{return be(t.resolve(e).href)}catch(s){}return Object(e)===e?null:e},n=e=>{if(i=!0,"string"===typeof e&&/^https?:\/\//.test(e))return void(window.location.href=e);const t=o(e);null!==t&&(window.location.href=t)},l=window.location.href.replace(window.location.origin,"");for(let d=0;!1===i&&d<a.length;d++)try{await a[d]({app:e,router:t,store:s,ssrContext:null,redirect:n,urlPath:l,publicPath:ge})}catch(r){return r&&r.url?void n(r.url):void console.error("[Quasar] boot error:",r)}!0!==i&&(e.use(t),e.mount("#q-app"))}me(a.Ef,pe).then((e=>{const[t,a]=void 0!==Promise.allSettled?["allSettled",e=>e.map((e=>{if("rejected"!==e.status)return e.value.default;console.error("[Quasar] boot error:",e.reason)}))]:["all",e=>e.map((e=>e.default))];return Promise[t]([Promise.resolve().then(s.bind(s,5336))]).then((t=>{const s=a(t).filter((e=>"function"===typeof e));ve(e,s)}))}))},5336:(e,t,s)=>{s.r(t),s.d(t,{default:()=>d});var a=s(604),i=s(6306),o=s.n(i),n=s(562);let l=document.querySelector('meta[name="fqdn"]').content,r=document.querySelector('meta[name="port"]').content;"{{fqdn}}"===l&&(l="localhost"),"{{port}}"===r&&(r="5555"),o().defaults.baseURL="http://"+l+":"+r,console.log("axios.defaults.baseURL",o().defaults.baseURL);const d=(0,a.zj)((async({router:e,store:t})=>{t.use((()=>({axios:o()})));const s=(0,n.V)();await s.setHelper(),await s.setupInterceptor(),await s.loginUser(),await s.setUse(),await s.setChildren(),s.use.app.start_base?e.addRoute({path:"/",redirect:s.use.app.start_base.id}):e.addRoute({path:"/",redirect:"/404"})}))},562:(e,t,s)=>{s.d(t,{V:()=>R});s(4748);var a=s(587),i=s(6306),o=s.n(i);class n{constructor(e,t){this.id=e.id,this.model=e.model,this.field_s=e.field_s,this.rel_field_s=e.rel_field_s,this.schema=e.schema,this.ref=t}getItem(e,t={}){return o().post("/post_item/"+this.id+"/"+e,t)}getItems(e){return o().post("/post_item_s/"+this.id,e)}getRelItems(e){return o().post("/post_rel_item_s/"+this.id,e)}getFilterValues(e,t,s){return o().post("/post_filter_value_s/"+this.id,{query:e,attr:t,rel_attr:s})}getRefByModel(e){let t=null;for(const s in this.ref)this.ref[s].model==e&&(t=this.ref[s]);return t}}class l{constructor(){this.data=[],this.setData()}setData(){o().get("/get_query_s").then((e=>{this.data=e.data}))}saveQuery(e){o().post("/post_save_query/"+e.params.base_id+"/"+e.params.view_id,e.query).then((e=>{"success"==e.data&&this.setData()}))}removeQuery(e){o().get("get_remove_query/"+e).then((e=>{"success"==e.data&&this.setData()}))}}s(4559);class r{constructor(e){this.decore=e,this.active_s=[],this.item_s=[],this.interval=null}async callGetActorActives(e){this.active_s.push(e),this.item_s.push(e),this.interval||(this.interval=setInterval((()=>{this.getActorActives(),0===this.active_s.length&&(clearInterval(this.interval),this.interval=null)}),1e3))}getActorActives(){o().get("/get_actor_active_s").then((e=>{this.active_s=e.data}))}getActorItems(){o().get("/get_actor_item_s").then((e=>{this.item_s=e.data}))}async postAction(e,t,s,a){let i={};return this.callGetActorActives({id:"init",title:e.title,desc:e.desc,finished:!1,progress:0}),"standard"==e.type?await o().post("/post_action/"+e.id,{sender:t,event:s,data:a}).then((t=>{i=t.data,this.decore.use[e.parent_id].setProperties(i.object),this.getActorItems()})):"submit"==e.type?await o().post("/post_action/"+e.id,a).then((e=>{i=e.data,this.getActorItems()})):"file"==e.type?o().post("/post_action/"+e.id,a,{responseType:"blob"}).then((e=>{let t=e.headers["content-disposition"].split(";")[1].split("=")[1];this.downloadFile(e.data,t)})):await o().post("/post_action/"+e.id,null).then((e=>{i=e.data,this.getActorItems()})),i}downloadFile(e,t){const s=URL.createObjectURL(e),a=document.createElement("a");a.href=s,a.download=t,a.click()}}class d{async getTemplate(e){let t={};return await o().get("/get_template/"+e).then((e=>{t=e.data})),t}}class u{constructor(e){this.decore=e}async getHook(e){await o().get("/get_hook/"+e.id).then((t=>{if(Object.keys(t.data.meta).length>0)for(const e in t.data.meta)this.decore.use[e].setProperties(t.data.meta[e]);t.data.route&&this.decore.use.app.router.push(t.data.route),this.decore.use[e.parent_id].break=!1}))}}class c{constructor(e,t){this.decore=R(),this.ref=t,this.base_s=[],this.view_s=[],this.dialog_s=[],this.widget_s=[],this.action_s=[],this.template_s=[],this.hook_s=[],this.setProperties(e)}setProperties(e){var t=Object.keys(e);t.forEach((t=>{this[t]=e[t]}))}}class h extends c{constructor(e,t){super(e,t),this.router=null,this.route=null,this.ql={},this.drawer_icon="mdi-backburger",this.drawer_mini=!1,this.expanded_nodes=[],this.shrink=!1,this.show_dialog_s=[]}get start_base(){let e=null;for(const t of this.base_s)if(!t.hide){e=t;break}return e}toogleLayoutDrawer(){this.drawer_mini=!this.drawer_mini,this.drawer_mini?this.drawer_icon="mdi-forwardburger":this.drawer_icon="mdi-backburger"}toogleAppDialog(e){this.ref[e].showDialog()}}class m extends c{constructor(e,t,s){super(e,t),this.app=s,this.break=!0}get start_view(){let e=null;for(const t of this.view_s)if(!t.hide){e=t;break}return e}triggerHooks(){if(this.hook_s.length>0)for(const e in this.hook_s){const t=this.hook_s[e];t.trigger();break}else this.break=!1}}class p{constructor(e,t,s,a,i){this.items_mode=!1,this.route=e,this.source=t,this.parent_source=s,this.field_s=a,this.query=i,this.search="",this.item={},this.item_s=[],this.rel_item_s={},this.select_s=[],this.count=0,this.errors={},this.setErrors({}),this.loaded=!1}export(){let e={};return e.item=this.item,e.select_s=this.select_s,e.field_s=this.field_s,e}setQuery(e){this.parent_source.field_s.forEach((t=>{if(t.class.includes("ForeignKeyField")&&this.source.model==t.rel_model){let s=t.backref+"__id__eq";this.query[s]=e.id}})),this.parent_source.rel_field_s.forEach((t=>{if(t.class.includes("ForeignKeyField")&&this.source.model==t.model){let s=t.name+"__eq";this.query[s]=e.id}else if(t.class.includes("ManyToManyField")&&this.source.model==t.rel_model){let s=t.backref+"__id__eq";this.query[s]=e.id}}))}extendItem(e){this.parent_source.rel_field_s.forEach((t=>{t.class.includes("ForeignKeyField")&&this.source.model==t.model&&(this.item[t.name]={...e})}))}setItem(e){null==e&&(e=this.route.params.item_id);let t="default";"dialog"==this.route.name&&(t=this.route.params.item_id),"subdialog"==this.route.name&&(t=this.route.params.subitem_id),this.parent_source.getItem(e).then((e=>{let s=e.data;this.parent_source.model!=this.source.model?(this.setQuery(s),this.source.getItem(t,this.query).then((e=>{this.item=e.data,this.extendItem(s),this.setRelItems(),this.setItems(),this.loaded=!0}))):(this.item=s,this.setRelItems(),this.setItems(),this.loaded=!0)}))}setItems(){this.items_mode?this.source.getItems(this.query).then((e=>{this.item_s=e.data.item_s,this.purgeSelects(),this.count=e.data.count})):(this.item_s=[],this.select_s=[],this.count=0)}setRelItems(){this.field_s.forEach((e=>{if("ForeignKeyField"==e.class){let t=this.source.getRefByModel(e.rel_model);t.getRelItems(e.choice_query).then((t=>{this.rel_item_s[e.name]=t.data}))}else if("BackrefAccessor"==e.class){let t=this.source.getRefByModel(e.rel_model);this.item.id&&(e.choice_query[e.field.name+"__eq"]=[null,this.item.id]),t.getRelItems(e.choice_query).then((t=>{this.rel_item_s[e.name]=t.data}))}else if("ManyToManyField"==e.class){let t=this.source.getRefByModel(e.rel_model);t.getRelItems(e.choice_query).then((t=>{this.rel_item_s[e.name]=t.data}))}}))}purgeSelects(){let e=[];for(const t of this.select_s)this.item_s.includes(t)&&e.push(t);this.select_s=e}setErrors(e){for(const t of this.field_s)t.name in e?this.errors[t.name]=e[t.name]:this.errors[t.name]=[]}}class _{constructor(e){this.rowsPerPageOptions=[4,8,16,32,64,128,265,512,1024],this.rowsPerPage=e,this.page=1}}var g=s(8734);class f extends c{constructor(e,t,s){super(e,t),this.app=s,this.ql={},this.item_menu_row_id=null,this.item_menu_target=!1,this.item_menu_model=!1}get sum_dialog_s(){let e=[];for(const t in this.ref){const s=this.ref[t];"dialog"!==s.kind&&"subdialog"!==s.kind||s.root_view.id!=this.id||e.push(s)}return e}hideDialogs(){this.sum_dialog_s.forEach((e=>{this.ref[e.id]&&this.ref[e.id].show&&this.ref[e.id].hideDialog()}))}showMainDialog(e){this.sum_dialog_s.forEach((t=>{t.id===e?this.ref[t.id]&&this.ref[t.id].showDialog():this.ref[t.id]&&1==this.ref[t.id].show&&this.ref[t.id].hideDialog()}))}showSubDialog(e){this.sum_dialog_s.forEach((t=>{t.id===e&&this.ref[t.id]&&this.ref[t.id].showDialog()}))}setData(){this.data=(0,g.Kh)(new p(this.app.route,this.decore.source[this.source_id],null,this.active_s,{...this.query,...this.app.route.query})),this.pagination=(0,g.Kh)(new _(this.pag_recs))}get column_s(){let e=[];return e.push({name:"gotos",label:"",field:"gotos"}),e.push({name:"actions",label:"",filed:"actions"}),this.active_s.forEach((t=>{var s={};s=t.class.includes("ForeignKeyField")?{name:t.column_name,label:t.verbose_name,field:function(e){return e[t.name]?e[t.name]["title"]:null},sortable:!0}:{name:t.column_name,label:t.verbose_name,field:t.column_name,sortable:!0},e.push(s)})),e}get rel_view_s(){let e=[];return this.decore.meta.app.base_s.forEach((t=>{t.view_s.forEach((t=>{this.decore.source[t.source_id].field_s.forEach((s=>{s.class.includes("ForeignKeyField")&&this.data.source.model==s.rel_model&&e.push({id:t.id,icon:t.icon,title:t.title,parent_id:t.parent_id,rel_field_name:s.name})}))}))})),e}onItemClick(e,t,s){if("td"==e.target.localName)for(const a of this.dialog_s)if("click"==a.activator){this.app.router.push({name:"dialog",params:{dialog_id:a.id,item_id:t.id},query:this.app.route.query});break}}onItemMenuClick(e,t){this.item_menu_row_id=t.id,this.item_menu_target=e.target,this.item_menu_model=!0}}class b extends c{constructor(e,t,s){super(e,t),this.app=s,this.ql={},this.show=!1}get root_view(){return this.getRootView(this)}getRootView(e){return"view"===e.kind||"app"===e.kind?e:this.getRootView(this.ref[e.parent_id])}getSumWidgets(){let e=[];return this.widget_s.forEach((t=>{e.push(t),t.widget_s.forEach((t=>{e.push(t)}))})),e}normalizeWidgets(){for(const e of this.getSumWidgets())e.parent_id=this.id}getCloseable(){let e=!1;return("app"==this.parent_kind||"empty"!=this.activator&&"first"!=this.activator&&"last"!=this.activator)&&(e=!0),e}getSubmitable(){let e=!1;return this.getSumWidgets().forEach((t=>{t.action_s.forEach((t=>{"submit"==t.type&&(e=!0)}))})),e}async showDialog(){this.main,this.widget_s.forEach((e=>{this.ref[e.id].initWidget(),e.widget_s.forEach((e=>{this.ref[e.id].initWidget()}))})),this.app.show_dialog_s.push(this.id),this.show=!0}async submitWidgets(){let e=!0;for(const t of this.widget_s){await this.ref[t.id].submit(),e=1==e&&1==this.ref[t.id].valid;for(const s of t.widget_s)await this.ref[s.id].submit(),e=1==e&&1==this.ref[t.id].valid}e&&this.closeDialog()}closeDialog(){1==this.getCloseable()&&("app"==this.parent_kind?this.hideDialog():"view"==this.parent_kind?this.app.router.push({name:"view",params:{base_id:this.app.route.params.base_id,view_id:this.app.route.params.view_id},query:this.app.route.query}):"widget"==this.parent_kind&&this.app.router.push({name:"dialog",params:{dialog_id:this.app.route.params.dialog_id,item_id:this.app.route.params.item_id},query:this.app.route.query}))}hideDialog(){this.show=!1,this.app.show_dialog_s=this.app.show_dialog_s.filter((e=>e!=this.id))}}class v extends c{constructor(e,t,s){super(e,t),this.app=s,this.form_ref=void 0,this.composer_ref=void 0,this.valid=!0}setData(){this.data=(0,g.Kh)(new p(this.app.route,this.decore.source[this.source_id],this.getParentSource(this.id),this.active_s,{}))}getParentSource(e){let t=this.decore.use[e];return"view"==t.kind||"app"==t.parent_kind?this.decore.source[t.source_id]:this.getParentSource(t.parent_id)}initWidget(){this.data.loaded=!1,this.data.setErrors({}),Object.values(this.app.route.params).includes(this.parent_id)?this.data.setItem(null):this.data.setItem(this.decore.use[this.parent_id].activator)}async submit(){for(const e of this.action_s)if("submit"==e.type){let t=await this.ref[e.id].trigger();this.data.setErrors(t.errors),this.valid=!(Object.keys(t.errors).length>0)}}getErrorMessage(e){let t="";for(const s of this.data.errors[e])t+=s;return t}}class k extends c{constructor(e,t,s){super(e,t),this.app=s,this.htmlTemplate=""}async setHtmlTemplate(){let e=await this.decore.loader.getTemplate(this.id);this.htmlTemplate=e}}class y extends c{constructor(e,t,s){super(e,t),this.app=s,this.actor=this.decore.actor}async trigger(e,t){let s=await this.actor.postAction(this,e,t,this.getData("parent"));return this.refreshRouteItems(this.parent_id),s}refreshRouteItems(e){const t=this.ref[e];t.data&&t.data.setItems(),"app"!=t.parent_id&&this.refreshRouteItems(t.parent_id)}getData(e){let t={};if("this"==e)t[this.parent_id]=this.ref[this.parent_id].data.export();else if("parent"==e){var s=this.parent_id;while("app"!=s)for(const e of Object.values(this.ref))e.id==s&&(e.data&&(t[e.id]=e.data.export()),s=e.parent_id)}else if("all"==e)for(const a of Object.values(this.ref))a.data&&(t[a.id]=a.data.export());return t}}class w extends c{constructor(e,t,s){super(e,t),this.app=s}trigger(){this.decore.pulser.getHook(this)}}const R=(0,a.nY)("decore",{state:()=>({use:{},source:{},queries:null,actor:null,loader:null}),getters:{},actions:{clear(){this.use={},this.source={}},async setHelper(){this.actor=new r(this),this.queries=new l,this.loader=new d,this.pulser=new u(this)},async setupInterceptor(){this.axios.interceptors.response.use((e=>(e.config.url.includes("post_action")&&null!=e.data.token&&(this.setToken(e.data.token),e.data.token=null),e)),(e=>(console.error("Ein Fehler ist aufgetreten:",e),401===e.response.status||422===e.response.status?this.removeToken():console.error(e.message),Promise.reject(e))))},async loginUser(){const e=localStorage.getItem("user_token");e?this.axios.defaults.headers.common["Authorization"]=`Bearer ${e}`:await this.axios.get("/guest_login").then((e=>{this.axios.defaults.headers.common["Authorization"]=`Bearer ${e.data.token}`,console.log(e.data.result)}))},setToken(e){"remove"!=e?(localStorage.setItem("user_token",e),window.location.href="/"):this.removeToken()},removeToken(){localStorage.removeItem("user_token"),window.location.href="/"},getUse(e){return this.use[e]?this.use[e]:null},async setUse(){await this.axios.get("/get_meta").then((e=>{this.use.app=new h(e.data.app,this.use);for(const t in e.data){const s=e.data[t];"base"===s.kind?(this.use[s.id]=new m(s,this.use,this.use.app),this.source[s.id]=new n(s,this.source)):"view"===s.kind?this.use[s.id]=new f(s,this.use,this.use.app):"dialog"===s.kind||"subdialog"===s.kind?this.use[s.id]=new b(s,this.use,this.use.app):"widget"===s.kind?this.use[s.id]=new v(s,this.use,this.use.app):"template"===s.kind?this.use[s.id]=new k(s,this.use,this.use.app):"action"===s.kind?this.use[s.id]=new y(s,this.use,this.use.app):"hook"===s.kind&&(this.use[s.id]=new w(s,this.use,this.use.app))}}))},async setChildren(){for(const e in this.use){const t=this.use[e];"base"===t.kind&&this.use.app.base_s.push(t),"view"===t.kind&&this.use[t.parent_id].view_s.push(t),"dialog"!==t.kind&&"subdialog"!==t.kind||this.use[t.parent_id].dialog_s.push(t),"widget"===t.kind&&this.use[t.parent_id].widget_s.push(t),"template"===t.kind&&this.use[t.parent_id].template_s.push(t),"action"===t.kind&&this.use[t.parent_id].action_s.push(t),"hook"===t.kind&&this.use[t.parent_id].hook_s.push(t)}},getSourceByModel(e){for(const t of Object.values(this.source))if(e==t.model)return t},getSourceByMetaID(e){return this.source[this.meta[e].source_id]}}})},7630:(e,t,s)=>{s.d(t,{A:()=>tt});var a=s(1758),i=s(8734),o=s(562),n=s(8790),l=s(9104),r=s(2703);const d={class:"dialog-content"},u={inheritAttrs:!1},c=Object.assign(u,{__name:"uf-dialog-layout",setup(e){const t=(0,a.OA)().use,s=(0,a.EW)((()=>{let e=0;return t.app.ql.hasOwnProperty("header")&&(e=t.app.ql.header.size),t.app.ql.hasOwnProperty("footer")&&(e+=t.app.ql.footer.size),e})),o=(0,a.EW)((()=>{let e="none";return 1==t.show&&(e="block"),e}));return(e,u)=>{const c=(0,a.g2)("q-toolbar-title"),h=(0,a.g2)("q-space"),m=(0,a.g2)("q-btn"),p=(0,a.g2)("q-toolbar"),_=(0,a.g2)("q-header"),g=(0,a.g2)("q-footer"),f=(0,a.g2)("q-layout");return(0,a.uX)(),(0,a.CE)("div",{style:(0,n.Tr)({display:o.value})},[(0,a.bF)(f,{container:"",style:(0,n.Tr)({height:`calc(100vh - ${s.value}px)`})},{default:(0,a.k6)((()=>[(0,a.bF)(r.A,{use:(0,i.R1)(t)},null,8,["use"]),(0,a.bF)(_,{style:{position:"fixed",width:"100%",top:"0"}},{default:(0,a.k6)((()=>[(0,a.bF)(p,{class:"bg-grey-2"},{default:(0,a.k6)((()=>[(0,a.bF)(c,{class:"text-black"},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)((0,i.R1)(t).title),1)])),_:1}),(0,a.bF)(h),(0,i.R1)(t).getCloseable()?((0,a.uX)(),(0,a.Wv)(m,{key:0,class:"text-black",round:"",flat:"",dense:"",onClick:u[0]||(u[0]=e=>(0,i.R1)(t).closeDialog()),icon:"close"})):(0,a.Q3)("",!0)])),_:1})])),_:1}),(0,a.Lk)("div",d,[(0,a.RG)(e.$slots,"dialog-content")]),(0,a.bF)(g,{style:{position:"fixed",width:"100%",bottom:"0"}},{default:(0,a.k6)((()=>[(0,a.bF)(p,{class:"bg-grey-2"},{default:(0,a.k6)((()=>[(0,i.R1)(t).getSubmitable()?((0,a.uX)(),(0,a.Wv)(m,{key:0,class:"text-black",label:"Submit",flat:"",onClick:u[1]||(u[1]=e=>(0,i.R1)(t).submitWidgets()),onKeyup:u[2]||(u[2]=(0,l.jR)((e=>(0,i.R1)(t).submitWidgets()),["enter"]))})):(0,a.Q3)("",!0),(0,i.R1)(t).getCloseable()?((0,a.uX)(),(0,a.Wv)(m,{key:1,class:"text-black",label:"Close",flat:"",onClick:u[3]||(u[3]=e=>(0,i.R1)(t).closeDialog()),onKeyup:u[4]||(u[4]=(0,l.jR)((e=>(0,i.R1)(t).closeDialog()),["esc"]))})):(0,a.Q3)("",!0)])),_:1})])),_:1})])),_:3},8,["style"])],4)}}});var h=s(500),m=s(133),p=s(9351),_=s(6769),g=s(1173),f=s(9001),b=s(8889),v=s(8582),k=s.n(v);const y=c,w=y;k()(c,"components",{QLayout:h.A,QHeader:m.A,QToolbar:p.A,QToolbarTitle:_.A,QSpace:g.A,QBtn:f.A,QFooter:b.A});const R={key:0,class:"overlay"},E={inheritAttrs:!1},C=Object.assign(E,{__name:"uf-dialog-display",setup(e){const t=(0,a.OA)().use,s=(0,a.EW)((()=>{let e=1;return t.display.includes("full")&&(e=1),t.display.includes("half")&&(e=.5),e})),o=((0,a.EW)((()=>{let e="";return"app"==t.parent_kind?e="appdialog":"view"==t.parent_kind?e="maindialog":"widget"==t.parent_kind&&(e="subdialog"),e})),(0,a.EW)((()=>{let e=t.app.ql.totalWidth-t.app.ql.left.offset-14;return e}))),l=`\n  .q-drawer {\n    top: ${t.app.ql.header.size}px;\n    bottom: ${t.app.ql.footer.size}px;\n  }\n`,r=document.createElement("style");return r.textContent=l,document.head.appendChild(r),(e,l)=>{const r=(0,a.g2)("q-drawer");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,i.R1)(t).show&&"subdialog"===(0,i.R1)(t).kind?((0,a.uX)(),(0,a.CE)("div",R)):(0,a.Q3)("",!0),(0,a.Lk)("div",{class:(0,n.C4)((0,i.R1)(t).kind)},[(0,i.R1)(t).display.includes("draw")?((0,a.uX)(),(0,a.Wv)(r,{key:0,modelValue:(0,i.R1)(t).show,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,i.R1)(t).show=e),bordered:"",overlay:"",persistent:"",side:"right",breakpoint:0,width:o.value*s.value},{default:(0,a.k6)((()=>[(0,a.bF)(w,{use:(0,i.R1)(t)},{"dialog-content":(0,a.k6)((()=>[(0,a.RG)(e.$slots,"dialog-content")])),_:3},8,["use"])])),_:3},8,["modelValue","width"])):(0,a.Q3)("",!0)],2)],64)}}});var q=s(2701);const F=C,A=F;k()(C,"components",{QDrawer:q.A});s(4748);const X=["innerHTML"],Q={__name:"uf-template",props:{id:{}},setup(e){const t=e,s=(0,i.Kh)((0,o.V)().use[t.id]);return s.setHtmlTemplate(),(e,t)=>((0,a.uX)(),(0,a.CE)("div",{innerHTML:s.htmlTemplate},null,8,X))}},x=Q,V=x,W={key:0},I={key:1},O={key:2},U={key:3},D={key:4},j={key:5},T={inheritAttrs:!1},S=Object.assign(T,{__name:"uf-widget-composer",setup(e){const t=(0,a.OA)().use;return(e,s)=>{const o=(0,a.g2)("q-checkbox"),l=(0,a.g2)("q-field"),r=(0,a.g2)("q-form");return(0,a.uX)(),(0,a.Wv)(r,{greedy:"",ref:e=>{(0,i.R1)(t).refComposer(e)}},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)((0,i.R1)(t).compose_store.el,(e=>((0,a.uX)(),(0,a.CE)("span",{key:e.id},["p"==e.type?((0,a.uX)(),(0,a.CE)("p",W,(0,n.v_)((0,i.R1)(t).item[e.id]),1)):(0,a.Q3)("",!0),"h1"==e.type?((0,a.uX)(),(0,a.CE)("h1",I,(0,n.v_)((0,i.R1)(t).item[e.id]),1)):(0,a.Q3)("",!0),"h2"==e.type?((0,a.uX)(),(0,a.CE)("h2",O,(0,n.v_)((0,i.R1)(t).item[e.id]),1)):(0,a.Q3)("",!0),"h3"==e.type?((0,a.uX)(),(0,a.CE)("h3",U,(0,n.v_)((0,i.R1)(t).item[e.id]),1)):(0,a.Q3)("",!0),"h4"==e.type?((0,a.uX)(),(0,a.CE)("h4",D,(0,n.v_)((0,i.R1)(t).item[e.id]),1)):(0,a.Q3)("",!0),"h5"==e.type?((0,a.uX)(),(0,a.CE)("h5",j,(0,n.v_)((0,i.R1)(t).item[e.id]),1)):(0,a.Q3)("",!0),"checkbox"==e.type?((0,a.uX)(),(0,a.Wv)(l,{key:6,"hide-bottom-space":"",dense:"",borderless:"",modelValue:(0,i.R1)(t).item[e.id],"onUpdate:modelValue":s=>(0,i.R1)(t).item[e.id]=s,rules:(0,i.R1)(t).getRules(e.id),"lazy-rules":"ondemand"},{default:(0,a.k6)((()=>[(0,a.bF)(o,{modelValue:(0,i.R1)(t).item[e.id],"onUpdate:modelValue":[s=>(0,i.R1)(t).item[e.id]=s,s=>(0,i.R1)(t).compose_store.sendElement(e.id,"update",(0,i.R1)(t).item[e.id],(0,i.R1)(t).compose_store.el)],label:e.title,disable:e.disable},null,8,["modelValue","onUpdate:modelValue","label","disable"])])),_:2},1032,["modelValue","onUpdate:modelValue","rules"])):(0,a.Q3)("",!0)])))),128))])),_:1},512)}}});var M=s(1565),K=s(1225),L=s(2225);k()(S,"components",{QForm:M.A,QField:K.A,QCheckbox:L.A});const P={key:0},B={key:1},z={key:2},H={inheritAttrs:!1},Y=Object.assign(H,{__name:"uf-widget-layout",setup(e){const t=(0,a.OA)().use;return(e,s)=>{const o=(0,a.g2)("q-space"),l=(0,a.g2)("q-icon"),r=(0,a.g2)("q-toolbar"),d=(0,a.g2)("q-card-section"),u=(0,a.g2)("q-btn"),c=(0,a.g2)("q-card-actions"),h=(0,a.g2)("q-separator"),m=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.Wv)(m,{class:"widget-card",flat:""},{default:(0,a.k6)((()=>[(0,a.bF)(r,{class:"widget-card-toolbar"},{default:(0,a.k6)((()=>[(0,a.Lk)("h5",null,(0,n.v_)((0,i.R1)(t).title),1),(0,a.bF)(o),(0,a.bF)(l,{name:(0,i.R1)(t).icon},null,8,["name"])])),_:1}),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)((0,i.R1)(t).layout,(s=>((0,a.uX)(),(0,a.CE)("span",{key:s},["c"==s?((0,a.uX)(),(0,a.CE)("span",P,[(0,a.bF)(d,{class:"widget-card-section"},{default:(0,a.k6)((()=>[(0,a.RG)(e.$slots,"widget-content")])),_:3})])):(0,a.Q3)("",!0),"t"==s?((0,a.uX)(),(0,a.CE)("span",B,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)((0,i.R1)(t).template_s,(e=>((0,a.uX)(),(0,a.CE)("span",{key:e.id},[(0,a.bF)(d,{class:"widget-card-section"},{default:(0,a.k6)((()=>[(0,a.bF)(V,{id:e.id},null,8,["id"])])),_:2},1024)])))),128))])):(0,a.Q3)("",!0),"a"==s?((0,a.uX)(),(0,a.CE)("span",z,[(0,a.bF)(c,null,{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)((0,i.R1)(t).dialog_s,(e=>((0,a.uX)(),(0,a.CE)("span",{key:e.id},["default"==e.activator?((0,a.uX)(),(0,a.Wv)(u,{key:0,onClick:s=>(0,i.R1)(t).app.router.push({name:"subdialog",params:{subdialog_id:e.id,subitem_id:e.activator},query:(0,i.R1)(t).app.route.query}),icon:e.icon,dense:"",flat:""},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.title)+"...",1)])),_:2},1032,["onClick","icon"])):(0,a.Q3)("",!0)])))),128)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)((0,i.R1)(t).action_s,(e=>((0,a.uX)(),(0,a.CE)("span",{key:e.id},["default"==e.activator?((0,a.uX)(),(0,a.Wv)(u,{key:0,onClick:s=>(0,i.R1)(t).ref[e.id].trigger(e.id,"click"),icon:e.icon,dense:"",flat:""},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.title),1)])),_:2},1032,["onClick","icon"])):(0,a.Q3)("",!0)])))),128))])),_:1})])):(0,a.Q3)("",!0)])))),128)),(0,a.bF)(h)])),_:3})}}});var N=s(7569),$=s(4609),G=s(7066),J=s(6334),Z=s(7015);const ee=Y,te=ee;k()(Y,"components",{QCard:N.A,QToolbar:p.A,QSpace:g.A,QIcon:$.A,QCardSection:G.A,QCardActions:J.A,QBtn:f.A,QSeparator:Z.A});const se={key:0,class:"q-pb-sm"},ae={class:"q-field__bottom"},ie={key:1,class:"q-pb-sm"},oe={key:2,class:"q-pb-sm"},ne={key:3,class:"q-pb-sm"},le={class:"q-gutter-xs row items-start"},re={key:4,class:"q-pb-sm"},de={key:5,class:"q-pb-sm"},ue={key:6,class:"q-pb-sm"},ce={key:7,class:"q-pb-sm"},he={key:8,class:"q-pb-sm"},me={key:9,class:"q-pb-sm"},pe={key:10,class:"q-pb-sm"},_e={key:11,class:"text-negative"},ge=(0,a.Lk)("br",null,null,-1),fe=(0,a.Lk)("br",null,null,-1),be={inheritAttrs:!1},ve=Object.assign(be,{__name:"uf-widget-form",setup(e){const t=(0,a.OA)().use;return t.data.rel_items_mode=!0,(e,s)=>{const o=(0,a.g2)("q-toggle"),l=(0,a.g2)("q-input"),r=(0,a.g2)("q-select"),d=(0,a.g2)("q-date"),u=(0,a.g2)("q-popup-proxy"),c=(0,a.g2)("q-time"),h=(0,a.g2)("q-form");return(0,a.uX)(),(0,a.Wv)(h,{greedy:""},{default:(0,a.k6)((()=>[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)((0,i.R1)(t).active_s,(e=>((0,a.uX)(),(0,a.CE)("span",{key:e.id},[e.class.includes("BooleanField")?((0,a.uX)(),(0,a.CE)("div",se,[(0,a.bF)(o,{modelValue:(0,i.R1)(t).data.item[e.name],"onUpdate:modelValue":s=>(0,i.R1)(t).data.item[e.name]=s,label:e.verbose_name},null,8,["modelValue","onUpdate:modelValue","label"]),(0,a.Lk)("div",ae,(0,n.v_)(e.help_text),1)])):e.class.includes("CharField")?((0,a.uX)(),(0,a.CE)("div",ie,[e.choices?((0,a.uX)(),(0,a.Wv)(r,{key:1,dense:"",outlined:"","hide-bottom-space":"",modelValue:(0,i.R1)(t).data.item[e.name],"onUpdate:modelValue":s=>(0,i.R1)(t).data.item[e.name]=s,label:e.verbose_name,hint:e.help_text,"option-value":"value","option-label":"label",options:Object.entries(e.choices).map((([e,t])=>({label:e,value:t}))),"emit-value":"","map-options":""},null,8,["modelValue","onUpdate:modelValue","label","hint","options"])):((0,a.uX)(),(0,a.Wv)(l,{key:0,dense:"",outlined:"","hide-bottom-space":"",modelValue:(0,i.R1)(t).data.item[e.name],"onUpdate:modelValue":s=>(0,i.R1)(t).data.item[e.name]=s,label:e.verbose_name,hint:e.help_text,error:(0,i.R1)(t).data.errors[e.name].length>0,"error-message":(0,i.R1)(t).getErrorMessage(e.name)},null,8,["modelValue","onUpdate:modelValue","label","hint","error","error-message"]))])):e.class.includes("DateField")?((0,a.uX)(),(0,a.CE)("div",oe,[(0,a.bF)(l,{dense:"",outlined:"","hide-bottom-space":"",modelValue:(0,i.R1)(t).data.item[e.name],"onUpdate:modelValue":s=>(0,i.R1)(t).data.item[e.name]=s,mask:"####-##-##",label:e.verbose_name,hint:e.help_text,error:(0,i.R1)(t).data.errors[e.name].length>0,"error-message":(0,i.R1)(t).getErrorMessage(e.name)},{default:(0,a.k6)((()=>[(0,a.bF)(u,{"transition-show":"scale","transition-hide":"scale"},{default:(0,a.k6)((()=>[(0,a.bF)(d,{modelValue:(0,i.R1)(t).data.item[e.name],"onUpdate:modelValue":s=>(0,i.R1)(t).data.item[e.name]=s,mask:"YYYY-MM-DD",color:"black"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1032,["modelValue","onUpdate:modelValue","label","hint","error","error-message"])])):e.class.includes("DateTimeField")?((0,a.uX)(),(0,a.CE)("div",ne,[(0,a.bF)(l,{dense:"",outlined:"","hide-bottom-space":"",modelValue:(0,i.R1)(t).data.item[e.name],"onUpdate:modelValue":s=>(0,i.R1)(t).data.item[e.name]=s,mask:"####-##-## ##:##",label:e.verbose_name,hint:e.help_text,error:(0,i.R1)(t).data.errors[e.name].length>0,"error-message":(0,i.R1)(t).getErrorMessage(e.name)},{default:(0,a.k6)((()=>[(0,a.bF)(u,{"transition-show":"scale","transition-hide":"scale"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",le,[(0,a.bF)(d,{modelValue:(0,i.R1)(t).data.item[e.name],"onUpdate:modelValue":s=>(0,i.R1)(t).data.item[e.name]=s,mask:"YYYY-MM-DD HH:mm",color:"black"},null,8,["modelValue","onUpdate:modelValue"]),(0,a.bF)(c,{modelValue:(0,i.R1)(t).data.item[e.name],"onUpdate:modelValue":s=>(0,i.R1)(t).data.item[e.name]=s,format24h:"",mask:"YYYY-MM-DD HH:mm",color:"black"},null,8,["modelValue","onUpdate:modelValue"])])])),_:2},1024)])),_:2},1032,["modelValue","onUpdate:modelValue","label","hint","error","error-message"])])):e.class.includes("TextField")?((0,a.uX)(),(0,a.CE)("div",re,[(0,a.bF)(l,{dense:"",outlined:"","hide-bottom-space":"",modelValue:(0,i.R1)(t).data.item[e.name],"onUpdate:modelValue":s=>(0,i.R1)(t).data.item[e.name]=s,label:e.verbose_name,hint:e.help_text,error:(0,i.R1)(t).data.errors[e.name].length>0,"error-message":(0,i.R1)(t).getErrorMessage(e.name),autogrow:""},null,8,["modelValue","onUpdate:modelValue","label","hint","error","error-message"])])):e.class.includes("FloatField")?((0,a.uX)(),(0,a.CE)("div",de,[(0,a.bF)(l,{type:"number",dense:"",outlined:"","hide-bottom-space":"",modelValue:(0,i.R1)(t).data.item[e.name],"onUpdate:modelValue":s=>(0,i.R1)(t).data.item[e.name]=s,modelModifiers:{number:!0},label:e.verbose_name,hint:e.help_text,error:(0,i.R1)(t).data.errors[e.name].length>0,"error-message":(0,i.R1)(t).getErrorMessage(e.name)},null,8,["modelValue","onUpdate:modelValue","label","hint","error","error-message"])])):e.class.includes("IntegerField")?((0,a.uX)(),(0,a.CE)("div",ue,[e.choices?((0,a.uX)(),(0,a.Wv)(r,{key:1,dense:"",outlined:"","hide-bottom-space":"",modelValue:(0,i.R1)(t).data.item[e.name],"onUpdate:modelValue":s=>(0,i.R1)(t).data.item[e.name]=s,modelModifiers:{number:!0},label:e.verbose_name,hint:e.help_text,"option-value":"value","option-label":"label",options:Object.entries(e.choices).map((([e,t])=>({label:e,value:t}))),"emit-value":"","map-options":""},null,8,["modelValue","onUpdate:modelValue","label","hint","options"])):((0,a.uX)(),(0,a.Wv)(l,{key:0,type:"number",dense:"",outlined:"","hide-bottom-space":"",modelValue:(0,i.R1)(t).data.item[e.name],"onUpdate:modelValue":s=>(0,i.R1)(t).data.item[e.name]=s,modelModifiers:{number:!0},label:e.verbose_name,hint:e.help_text,error:(0,i.R1)(t).data.errors[e.name].length>0,"error-message":(0,i.R1)(t).getErrorMessage(e.name)},null,8,["modelValue","onUpdate:modelValue","label","hint","error","error-message"]))])):e.class.includes("PasswordField")?((0,a.uX)(),(0,a.CE)("div",ce,[(0,a.bF)(l,{type:"password",dense:"",outlined:"","hide-bottom-space":"",modelValue:(0,i.R1)(t).data.item[e.name],"onUpdate:modelValue":s=>(0,i.R1)(t).data.item[e.name]=s,label:e.verbose_name,hint:e.help_text,error:(0,i.R1)(t).data.errors[e.name].length>0,"error-message":(0,i.R1)(t).getErrorMessage(e.name)},null,8,["modelValue","onUpdate:modelValue","label","hint","error","error-message"])])):e.class.includes("ForeignKeyField")?((0,a.uX)(),(0,a.CE)("div",he,[(0,a.bF)(r,{dense:"",outlined:"",modelValue:(0,i.R1)(t).data.item[e.name],"onUpdate:modelValue":s=>(0,i.R1)(t).data.item[e.name]=s,"options-dense":"",label:e.verbose_name,hint:e.help_text,"option-value":"id","option-label":"title",options:(0,i.R1)(t).data.rel_item_s[e.name],error:(0,i.R1)(t).data.errors[e.name].length>0,"error-message":(0,i.R1)(t).getErrorMessage(e.name)},null,8,["modelValue","onUpdate:modelValue","label","hint","options","error","error-message"])])):e.class.includes("BackrefAccessor")?((0,a.uX)(),(0,a.CE)("div",me,[(0,a.bF)(r,{dense:"",outlined:"",modelValue:(0,i.R1)(t).data.item[e.name],"onUpdate:modelValue":s=>(0,i.R1)(t).data.item[e.name]=s,multiple:"","options-dense":"",label:e.verbose_name,hint:e.help_text,"option-value":"id","option-label":"title",options:(0,i.R1)(t).data.rel_item_s[e.name]},null,8,["modelValue","onUpdate:modelValue","label","hint","options"])])):e.class.includes("ManyToManyField")?((0,a.uX)(),(0,a.CE)("div",pe,[(0,a.bF)(r,{dense:"",outlined:"",modelValue:(0,i.R1)(t).data.item[e.name],"onUpdate:modelValue":s=>(0,i.R1)(t).data.item[e.name]=s,multiple:"","options-dense":"",label:e.verbose_name,hint:e.help_text,"option-value":"id","option-label":"title",options:(0,i.R1)(t).data.rel_item_s[e.name]},null,8,["modelValue","onUpdate:modelValue","label","hint","options"])])):((0,a.uX)(),(0,a.CE)("div",_e,[(0,a.eW)((0,n.v_)(e.class)+" is momentarily not implemented.",1),ge,fe]))])))),128))])),_:1})}}});var ke=s(449),ye=s(8020),we=s(9378),Re=s(7308),Ee=s(8605),Ce=s(9765);const qe=ve,Fe=qe;k()(ve,"components",{QForm:M.A,QToggle:ke.A,QField:K.A,QInput:ye.A,QSelect:we.A,QPopupProxy:Re.A,QDate:Ee.A,QTime:Ce.A});const Ae={key:0},Xe={class:"row"},Qe={class:"row items-center"},xe={key:0,class:"col-auto text-body"},Ve={key:1,class:"col-auto text-body"},We={key:2,class:"col-auto text-body"},Ie={class:"col-auto"},Oe={key:1},Ue=(0,a.Lk)("span",{style:{"font-size":"12px"}},"No data available",-1),De={inheritAttrs:!1},je=Object.assign(De,{__name:"uf-widget-info",setup(e){const t=(0,a.OA)().use;return(e,s)=>{const o=(0,a.g2)("q-btn"),l=(0,a.g2)("q-icon");return null!=(0,i.R1)(t).data.item.title?((0,a.uX)(),(0,a.CE)("div",Ae,[(0,a.Lk)("div",Xe,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)((0,i.R1)(t).active_s,(e=>((0,a.uX)(),(0,a.CE)("div",{class:"widget-info-col col-lg-3 col-md-6 col-sm-12",key:e.id},[(0,a.Lk)("h6",null,(0,n.v_)(e.verbose_name),1),(0,a.Lk)("div",Qe,[null!=(0,i.R1)(t).data.item[e.name]&&"ForeignKeyField"!=e.class?((0,a.uX)(),(0,a.CE)("div",xe,(0,n.v_)((0,i.R1)(t).data.item[e.name]),1)):null!=(0,i.R1)(t).data.item[e.name]&&"ForeignKeyField"==e.class?((0,a.uX)(),(0,a.CE)("div",Ve,(0,n.v_)((0,i.R1)(t).data.item[e.name].title),1)):((0,a.uX)(),(0,a.CE)("div",We,"--")),(0,a.Lk)("div",Ie,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)((0,i.R1)(t).dialog_s,(s=>((0,a.uX)(),(0,a.CE)("span",{key:s.id},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.widget_s,(n=>((0,a.uX)(),(0,a.CE)("span",{key:n.key},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.active_s,(n=>((0,a.uX)(),(0,a.CE)("span",{key:n.name},["context"==s.activator&&e.name==n.name?((0,a.uX)(),(0,a.Wv)(o,{key:0,class:"widget-info-col-btn",round:"",dense:"",flat:"",size:"xs",icon:s.icon,onClick:e=>(0,i.R1)(t).app.router.push({name:"subdialog",params:{subdialog_id:s.id,subitem_id:(0,i.R1)(t).data.item.id},query:(0,i.R1)(t).app.route.query})},null,8,["icon","onClick"])):(0,a.Q3)("",!0)])))),128))])))),128))])))),128))])])])))),128))])])):((0,a.uX)(),(0,a.CE)("div",Oe,[(0,a.bF)(l,{name:"mdi-alert",size:"22px"}),(0,a.eW)(),Ue]))}}}),Te=je,Se=Te;k()(je,"components",{QBtn:f.A,QIcon:$.A});const Me={inheritAttrs:!1},Ke=Object.assign(Me,{__name:"uf-widget-table",setup(e){const t=(0,a.OA)().use;function s(){let e=[];return e.push({name:"gotos",label:"",field:"gotos"}),e.push({name:"actions",label:"",filed:"actions"}),t.active_s.forEach((t=>{var s={};s=t.class.includes("ForeignKeyField")?{name:t.column_name,label:t.verbose_name,field:function(e){return e[t.name]?e[t.name]["title"]:null},sortable:!0}:{name:t.column_name,label:t.verbose_name,field:t.column_name,sortable:!0},e.push(s)})),e}return t.data.items_mode=!0,(e,o)=>{const n=(0,a.g2)("q-table");return(0,a.uX)(),(0,a.Wv)(n,{columns:s(),rows:(0,i.R1)(t).data.item_s,flat:""},null,8,["columns","rows"])}}});var Le=s(481);const Pe=Ke,Be=Pe;k()(Ke,"components",{QTable:Le.A});const ze={__name:"uf-widget",props:{id:{}},setup(e){const t=e,s=(0,i.Kh)((0,o.V)().use[t.id]);return s.setData(),(e,t)=>((0,a.uX)(),(0,a.Wv)(te,{use:s},{"widget-content":(0,a.k6)((()=>["form"==s.type?((0,a.uX)(),(0,a.Wv)(Fe,{key:0,use:s},null,8,["use"])):(0,a.Q3)("",!0),"info"==s.type?((0,a.uX)(),(0,a.Wv)(Se,{key:1,use:s},null,8,["use"])):(0,a.Q3)("",!0),"table"==s.type?((0,a.uX)(),(0,a.Wv)(Be,{key:2,use:s},null,8,["use"])):(0,a.Q3)("",!0)])),_:1},8,["use"]))}},He=ze,Ye=He,Ne={inheritAttrs:!1},$e=Object.assign(Ne,{__name:"uf-dialog-standard",setup(e){const t=(0,a.OA)().use;return(e,s)=>((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)((0,i.R1)(t).getSumWidgets(),(e=>((0,a.uX)(),(0,a.CE)("span",{key:e.id},[(0,a.bF)(Ye,{id:e.id},null,8,["id"])])))),128))}}),Ge=$e,Je=Ge,Ze={__name:"uf-dialog",props:{id:{}},setup(e){const t=e,s=(0,i.Kh)((0,o.V)().use[t.id]);return s.normalizeWidgets(),(e,t)=>((0,a.uX)(),(0,a.Wv)(A,{use:s},{"dialog-content":(0,a.k6)((()=>["standard"==s.type?((0,a.uX)(),(0,a.Wv)(Je,{key:0,use:s},null,8,["use"])):(0,a.Q3)("",!0)])),_:1},8,["use"]))}},et=Ze,tt=et},2703:(e,t,s)=>{s.d(t,{A:()=>l});var a=s(1758);const i={inheritAttrs:!1},o=Object.assign(i,{__name:"uf-layout-injector",setup(e){const t=(0,a.OA)().use;return t.ql=(0,a.WQ)("_q_l_"),(e,t)=>((0,a.uX)(),(0,a.CE)("span"))}}),n=o,l=n}},t={};function s(a){var i=t[a];if(void 0!==i)return i.exports;var o=t[a]={exports:{}};return e[a](o,o.exports,s),o.exports}s.m=e,(()=>{var e=[];s.O=(t,a,i,o)=>{if(!a){var n=1/0;for(u=0;u<e.length;u++){for(var[a,i,o]=e[u],l=!0,r=0;r<a.length;r++)(!1&o||n>=o)&&Object.keys(s.O).every((e=>s.O[e](a[r])))?a.splice(r--,1):(l=!1,o<n&&(n=o));if(l){e.splice(u--,1);var d=i();void 0!==d&&(t=d)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[a,i,o]}})(),(()=>{s.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;return s.d(t,{a:t}),t}})(),(()=>{s.d=(e,t)=>{for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}})(),(()=>{s.f={},s.e=e=>Promise.all(Object.keys(s.f).reduce(((t,a)=>(s.f[a](e,t),t)),[]))})(),(()=>{s.u=e=>"js/"+e+"."+{33:"669626ed",782:"7d497546"}[e]+".js"})(),(()=>{s.miniCssF=e=>"css/"+e+".a28b87fc.css"})(),(()=>{s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{var e={},t="uniform_front:";s.l=(a,i,o,n)=>{if(e[a])e[a].push(i);else{var l,r;if(void 0!==o)for(var d=document.getElementsByTagName("script"),u=0;u<d.length;u++){var c=d[u];if(c.getAttribute("src")==a||c.getAttribute("data-webpack")==t+o){l=c;break}}l||(r=!0,l=document.createElement("script"),l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.setAttribute("data-webpack",t+o),l.src=a),e[a]=[i];var h=(t,s)=>{l.onerror=l.onload=null,clearTimeout(m);var i=e[a];if(delete e[a],l.parentNode&&l.parentNode.removeChild(l),i&&i.forEach((e=>e(s))),t)return t(s)},m=setTimeout(h.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=h.bind(null,l.onerror),l.onload=h.bind(null,l.onload),r&&document.head.appendChild(l)}}})(),(()=>{s.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{s.p="/static/"})(),(()=>{if("undefined"!==typeof document){var e=(e,t,s,a,i)=>{var o=document.createElement("link");o.rel="stylesheet",o.type="text/css";var n=s=>{if(o.onerror=o.onload=null,"load"===s.type)a();else{var n=s&&("load"===s.type?"missing":s.type),l=s&&s.target&&s.target.href||t,r=new Error("Loading CSS chunk "+e+" failed.\n("+l+")");r.code="CSS_CHUNK_LOAD_FAILED",r.type=n,r.request=l,o.parentNode.removeChild(o),i(r)}};return o.onerror=o.onload=n,o.href=t,s?s.parentNode.insertBefore(o,s.nextSibling):document.head.appendChild(o),o},t=(e,t)=>{for(var s=document.getElementsByTagName("link"),a=0;a<s.length;a++){var i=s[a],o=i.getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(o===e||o===t))return i}var n=document.getElementsByTagName("style");for(a=0;a<n.length;a++){i=n[a],o=i.getAttribute("data-href");if(o===e||o===t)return i}},a=a=>new Promise(((i,o)=>{var n=s.miniCssF(a),l=s.p+n;if(t(n,l))return i();e(a,l,null,i,o)})),i={524:0};s.f.miniCss=(e,t)=>{var s={782:1};i[e]?t.push(i[e]):0!==i[e]&&s[e]&&t.push(i[e]=a(e).then((()=>{i[e]=0}),(t=>{throw delete i[e],t})))}}})(),(()=>{var e={524:0};s.f.j=(t,a)=>{var i=s.o(e,t)?e[t]:void 0;if(0!==i)if(i)a.push(i[2]);else{var o=new Promise(((s,a)=>i=e[t]=[s,a]));a.push(i[2]=o);var n=s.p+s.u(t),l=new Error,r=a=>{if(s.o(e,t)&&(i=e[t],0!==i&&(e[t]=void 0),i)){var o=a&&("load"===a.type?"missing":a.type),n=a&&a.target&&a.target.src;l.message="Loading chunk "+t+" failed.\n("+o+": "+n+")",l.name="ChunkLoadError",l.type=o,l.request=n,i[1](l)}};s.l(n,r,"chunk-"+t,t)}},s.O.j=t=>0===e[t];var t=(t,a)=>{var i,o,[n,l,r]=a,d=0;if(n.some((t=>0!==e[t]))){for(i in l)s.o(l,i)&&(s.m[i]=l[i]);if(r)var u=r(s)}for(t&&t(a);d<n.length;d++)o=n[d],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(u)},a=globalThis["webpackChunkuniform_front"]=globalThis["webpackChunkuniform_front"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var a=s.O(void 0,[121],(()=>s(1530)));a=s.O(a)})();
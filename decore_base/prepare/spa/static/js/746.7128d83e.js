"use strict";(globalThis["webpackChunkuniform_front"]=globalThis["webpackChunkuniform_front"]||[]).push([[746],{7746:(e,t,l)=>{l.r(t),l.d(t,{default:()=>Ul});var a=l(9835),s=l(499),i=(l(9665),l(5360)),o=l(8339);class n extends i.y{constructor(e){super(e),this.base_dialog_s=[],this.pushBaseDialogs(this.getView().id)}getView(){let e,t=(0,o.yj)();return this.view_s.forEach((l=>{l.id==t.params.view_id&&(e=l)})),e}pushBaseDialogs(e){for(const t in this.uniform.meta){const l=this.uniform.meta[t];e==l.parent_id&&(l.class.includes("Decore_dialog")&&this.base_dialog_s.push(l),this.pushBaseDialogs(l.id))}}}class r extends i.y{constructor(e){super(e),this.ql={},this.root=this.getRoot(),this.show=!1,this.sum_widget_s=this.getSumWidgets(),this.closeable=this.getCloseable(),this.submitable=this.getSubmitable()}getRoot(){let e=!1;return this.uniform.meta[this.parent_id].class.includes("Decore_view")&&(e=!0),e}getSumWidgets(){let e=[];return this.widget_s.forEach((t=>{e.push(t),t.widget_s.forEach((t=>{e.push(t)}))})),e}getCloseable(){let e=!1;return"none"!=this.activator&&(e=!0),e}getSubmitable(){let e=!1;return this.sum_widget_s.forEach((t=>{t.action_s.forEach((t=>{"submit"==t.type&&(e=!0)}))})),e}async showDialog(e,t){let l=null;e&&(l=e.id),t.getItem(l).then((e=>{let l=e.data;this.closeRootDialogs(),this.widget_s.forEach((e=>{this.ref[e.id].initWidget(l,this.activator,t),e.widget_s.forEach((e=>{this.ref[e.id].initWidget(l,this.activator,t)}))})),this.show=!0}))}closeRootDialogs(){if(1==this.root)for(const e in this.ref){const t=this.ref[e];1==t.root&&1==t.show&&this.id!=t.id&&t.closeDialog()}}async submitWidgets(){let e=!0;for(const t of this.widget_s){await this.ref[t.id].submit(),e=1==e&&1==this.ref[t.id].valid;for(const l of t.widget_s)await this.ref[l.id].submit(),e=1==e&&1==this.ref[t.id].valid}e&&(this.ref[this.parent_id].data.setItems(),this.closeDialog())}closeDialog(){this.closeable&&(this.show=!1)}}var d=l(6970),u=l(5288);const c={class:"dialog-content"},m={inheritAttrs:!1},p=Object.assign(m,{__name:"uf-dialog-layout",setup(e){const t=(0,a.l1)().use,l=(0,a.Fl)((()=>{let e="none";return t.show&&(e="block"),e}));(0,a.Fl)((()=>{let e="sub-dialog";return t.ref[t.parent_id].class.includes("view")&&(e="main-dialog"),e}));return(e,i)=>{const o=(0,a.up)("q-toolbar-title"),n=(0,a.up)("q-space"),r=(0,a.up)("q-btn"),m=(0,a.up)("q-toolbar"),p=(0,a.up)("q-header"),h=(0,a.up)("q-footer"),g=(0,a.up)("q-layout");return(0,a.wg)(),(0,a.iD)("div",{style:(0,d.j5)({display:(0,s.SU)(l)})},[(0,a.Wm)(g,{container:"",style:{height:"calc(100vh - 102px)"}},{default:(0,a.w5)((()=>[(0,a.Wm)(u.Z,{use:(0,s.SU)(t)},null,8,["use"]),(0,a.Wm)(p,{reveal:""},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{class:"bg-grey-2"},{default:(0,a.w5)((()=>[(0,a.Wm)(o,{class:"text-black"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)((0,s.SU)(t).title),1)])),_:1}),(0,a.Wm)(n),(0,s.SU)(t).closeable?((0,a.wg)(),(0,a.j4)(r,{key:0,class:"text-black",round:"",flat:"",dense:"",onClick:i[0]||(i[0]=e=>(0,s.SU)(t).closeDialog()),icon:"close"})):(0,a.kq)("",!0)])),_:1})])),_:1}),(0,a._)("div",c,[(0,a.WI)(e.$slots,"dialog-content")]),(0,a.Wm)(h,{reveal:""},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{class:"bg-grey-2"},{default:(0,a.w5)((()=>[(0,s.SU)(t).submitable?((0,a.wg)(),(0,a.j4)(r,{key:0,class:"text-black",label:"Submit",flat:"",onClick:i[1]||(i[1]=e=>(0,s.SU)(t).submitWidgets())})):(0,a.kq)("",!0),(0,s.SU)(t).closeable?((0,a.wg)(),(0,a.j4)(r,{key:1,class:"text-black",label:"Close",flat:"",onClick:i[2]||(i[2]=e=>(0,s.SU)(t).closeDialog())})):(0,a.kq)("",!0)])),_:1})])),_:1})])),_:3})],4)}}});var h=l(7605),g=l(6602),_=l(1663),f=l(1973),w=l(136),b=l(8879),v=l(1378),U=l(9984),k=l.n(U);const y=p,S=y;k()(p,"components",{QLayout:h.Z,QHeader:g.Z,QToolbar:_.Z,QToolbarTitle:f.Z,QSpace:w.Z,QBtn:b.Z,QFooter:v.Z});const q={inheritAttrs:!1},D=Object.assign(q,{__name:"uf-dialog-display",setup(e){const t=(0,a.l1)().use;var l=.5;"none"==t.activator&&(l=1);const i=(0,a.Fl)((()=>{let e=0;return t.root||(e=t.ref.app.ql.totalWidth+10),e})),o=(0,a.Fl)((()=>{let e=t.ref.app.ql.totalWidth-t.ref.app.ql.left.offset-14;return e})),n=`\n  .q-drawer {\n    top: ${t.ref.app.ql.header.size}px;\n    bottom: ${t.ref.app.ql.footer.size}px;\n  }\n`,r=document.createElement("style");return r.textContent=n,document.head.appendChild(r),(e,n)=>{const r=(0,a.up)("q-drawer");return"drawer"==(0,s.SU)(t).display?((0,a.wg)(),(0,a.j4)(r,{key:0,modelValue:(0,s.SU)(t).show,"onUpdate:modelValue":n[0]||(n[0]=e=>(0,s.SU)(t).show=e),bordered:"",overlay:"",side:"right",breakpoint:(0,s.SU)(i),width:(0,s.SU)(o)*(0,s.SU)(l)},{default:(0,a.w5)((()=>[(0,a.Wm)(S,{use:(0,s.SU)(t)},{"dialog-content":(0,a.w5)((()=>[(0,a.WI)(e.$slots,"dialog-content")])),_:3},8,["use"])])),_:3},8,["modelValue","breakpoint","width"])):(0,a.kq)("",!0)}}});var V=l(906);const W=D,j=W;k()(D,"components",{QDrawer:V.Z});class x{constructor(e,t,l){this.items_mode=!1,this.rel_items_mode=!1,this.source=e,this.field_s=t,this.query=l,this.search="",this.item={},this.item_s=[],this.rel_item_s={},this.select_s=[],this.count=0,this.errors={}}export(){let e={};return e.item=this.item,e.select_s=this.select_s,e.field_s=this.field_s,e}setItems(){this.items_mode&&this.source.getItems(this.query).then((e=>{this.item_s=e.data.item_s,this.count=e.data.count,this.purgeSelects()})).catch((e=>{console.log(e)}))}setRelItems(){this.field_s.forEach((e=>{if("ForeignKeyField"==e.class){let t=this.source.getRefByModel(e.rel_model);t.getRelItems(e.choice_query).then((t=>{this.rel_item_s[e.name]=t.data}))}else if("BackrefAccessor"==e.class){let t=this.source.getRefByModel(e.rel_model);this.item.id&&(e.choice_query[e.field.name+"__eq"]=[null,this.item.id]),t.getRelItems(e.choice_query).then((t=>{this.rel_item_s[e.name]=t.data}))}else if("ManyToManyField"==e.class){let t=this.source.getRefByModel(e.rel_model);t.getRelItems(e.choice_query).then((t=>{this.rel_item_s[e.name]=t.data}))}}))}purgeSelects(){let e=[];for(const t of this.select_s)this.item_s.includes(t)&&e.push(t);this.select_s=e}setErrors(e){for(const t of this.field_s)t.name in e?this.errors[t.name]=e[t.name]:this.errors[t.name]=[]}}var Z=l(1809);function F(e){const t=(0,Z.Q_)(e,{state:()=>({el:{}}),getters:{},actions:{sendElement(e,t,l,a){let s={event:t,value:l,el:a};this.axios.post("/element/"+this.$id+"/"+e,s).then((e=>{this.el=e.data.el})).catch((e=>{console.log(e)}))}}}),l=t();return l}class Q extends i.y{constructor(e){super(e),this.data=(0,s.qj)(new x(this.uniform.source[this.source_id],this.active_s,{})),this.data.setErrors({}),this.compose_store=F(this.id),this.form_ref=void 0,this.composer_ref=void 0,this.valid=!0}regComposerElement(e){e.id in this.item||(this.item[e.id]=e.default),e.schema&&(this.source.schema[e.id]=e.schema),this.compose_store.el[e.id]=e}refForm(e){this.form_ref=e}refComposer(e){this.composer_ref=e}initWidget(e,t,l){const a=l;this.data.item_s=[],"default"==t&&(null==e?this.data.source.getDefault().then((e=>{this.data.item=e.data,this.data.setItems(),this.data.setRelItems()})):(this.data.item={...e},this.data.setItems(),this.data.setRelItems())),"context"!=t&&"click"!=t||(this.data.source.model==a.model?(this.data.item={...e},this.data.setItems(),this.data.setRelItems()):this.data.source.getDefault().then((t=>{this.data.item=t.data,a.rel_field_s.forEach((t=>{if(t.class.includes("ForeignKeyField")&&this.data.source.model==t.model){let l=t.name+"__eq";this.data.query[l]=e.id,this.data.item[t.name]={...e}}if(t.class.includes("ManyToManyField")&&this.data.source.model==t.rel_model){let l=t.backref+"__id__eq";this.data.query[l]=e.id}})),this.data.setItems(),this.data.setRelItems()}))),"none"==t&&this.data.source.getLast().then((e=>{this.data.item=e.data,this.data.setItems(),this.data.setRelItems()})),this.element_s.forEach((e=>{this.regComposerElement(e)}))}async submit(){for(const e of this.action_s)if("submit"==e.type){let t=await this.ref[e.id].trigger();this.data.setErrors(t.errors),this.valid=!(Object.keys(t.errors).length>0)}}getErrorMessage(e){let t="";for(const l of this.data.errors[e])t+=" & "+l;return t}getRules(e){let t=[];if(e in this.data.source.schema){const l=this.data.source.schema[e];"string"==l.type&&t.push((e=>e&&e.length>0||"Not valid")),"integer"==l.type&&t.push((e=>null!==e&&""!==e&&NaN!=parseInt(e)||"Not valid")),"allowed"in l&&l.allowed.forEach((e=>{t.push((t=>t&&t==e||"Not valid"))}))}return t}}class C extends i.y{constructor(e){super(e),this.actor=this.uniform.actor}async trigger(){let e=await this.actor.postAction(this,this.getData("parent"));return this.refreshRouteItems(this.parent_id),e}refreshRouteItems(e){const t=this.ref[e];t.data&&t.data.setItems(),"app"!=t.parent_id&&this.refreshRouteItems(t.parent_id)}getData(e){let t={};if("this"==e)t[this.parent_id]=this.ref[this.parent_id].data.export();else if("parent"==e){var l=this.parent_id;while("app"!=l)for(const e of Object.values(this.ref))e.id==l&&(e.data&&(t[e.id]=e.data.export()),l=e.parent_id)}else if("all"==e)for(const a of Object.values(this.ref))a.data&&(t[a.id]=a.data.export());return t}}const I={key:0},E={key:1},M={key:2},H={key:3},Y={key:4},K={key:5},z={inheritAttrs:!1},O=Object.assign(z,{__name:"uf-widget-composer",setup(e){const t=(0,a.l1)().use;return(e,l)=>{const i=(0,a.up)("q-checkbox"),o=(0,a.up)("q-field"),n=(0,a.up)("q-form");return(0,a.wg)(),(0,a.j4)(n,{greedy:"",ref:e=>{(0,s.SU)(t).refComposer(e)}},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,s.SU)(t).compose_store.el,(e=>((0,a.wg)(),(0,a.iD)("span",{key:e.id},["p"==e.type?((0,a.wg)(),(0,a.iD)("p",I,(0,d.zw)((0,s.SU)(t).item[e.id]),1)):(0,a.kq)("",!0),"h1"==e.type?((0,a.wg)(),(0,a.iD)("h1",E,(0,d.zw)((0,s.SU)(t).item[e.id]),1)):(0,a.kq)("",!0),"h2"==e.type?((0,a.wg)(),(0,a.iD)("h2",M,(0,d.zw)((0,s.SU)(t).item[e.id]),1)):(0,a.kq)("",!0),"h3"==e.type?((0,a.wg)(),(0,a.iD)("h3",H,(0,d.zw)((0,s.SU)(t).item[e.id]),1)):(0,a.kq)("",!0),"h4"==e.type?((0,a.wg)(),(0,a.iD)("h4",Y,(0,d.zw)((0,s.SU)(t).item[e.id]),1)):(0,a.kq)("",!0),"h5"==e.type?((0,a.wg)(),(0,a.iD)("h5",K,(0,d.zw)((0,s.SU)(t).item[e.id]),1)):(0,a.kq)("",!0),"checkbox"==e.type?((0,a.wg)(),(0,a.j4)(o,{key:6,"hide-bottom-space":"",dense:"",borderless:"",modelValue:(0,s.SU)(t).item[e.id],"onUpdate:modelValue":l=>(0,s.SU)(t).item[e.id]=l,rules:(0,s.SU)(t).getRules(e.id),"lazy-rules":"ondemand"},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{modelValue:(0,s.SU)(t).item[e.id],"onUpdate:modelValue":[l=>(0,s.SU)(t).item[e.id]=l,l=>(0,s.SU)(t).compose_store.sendElement(e.id,"update",(0,s.SU)(t).item[e.id],(0,s.SU)(t).compose_store.el)],label:e.title,disable:e.disable},null,8,["modelValue","onUpdate:modelValue","label","disable"])])),_:2},1032,["modelValue","onUpdate:modelValue","rules"])):(0,a.kq)("",!0)])))),128))])),_:1},512)}}});var R=l(8326),A=l(8149),T=l(1221);const P=O,B=P;k()(O,"components",{QForm:R.Z,QField:A.Z,QCheckbox:T.Z});const L={key:0},$={key:1},N={key:2},G={inheritAttrs:!1},J=Object.assign(G,{__name:"uf-widget-layout",setup(e){const t=(0,a.l1)().use;return(e,l)=>{const i=(0,a.up)("q-space"),o=(0,a.up)("q-icon"),n=(0,a.up)("q-toolbar"),r=(0,a.up)("q-card-section"),u=(0,a.up)("q-btn"),c=(0,a.up)("q-card-actions"),m=(0,a.up)("q-separator"),p=(0,a.up)("q-card");return(0,a.wg)(),(0,a.j4)(p,{class:"widget-card",flat:""},{default:(0,a.w5)((()=>[(0,a.Wm)(n,{class:"widget-card-toolbar"},{default:(0,a.w5)((()=>[(0,a._)("h5",null,(0,d.zw)((0,s.SU)(t).title),1),(0,a.Wm)(i),(0,a.Wm)(o,{name:(0,s.SU)(t).icon},null,8,["name"])])),_:1}),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,s.SU)(t).layout,(l=>((0,a.wg)(),(0,a.iD)("span",{key:l},["c"==l?((0,a.wg)(),(0,a.iD)("span",L,[(0,a.Wm)(r,{class:"widget-card-section"},{default:(0,a.w5)((()=>[(0,a.WI)(e.$slots,"widget-content")])),_:3})])):(0,a.kq)("",!0),"e"==l&&(0,s.SU)(t).element_s.length>=1?((0,a.wg)(),(0,a.iD)("span",$,[(0,a.Wm)(r,{class:"widget-card-section"},{default:(0,a.w5)((()=>[(0,a.Wm)(B,{use:(0,s.SU)(t)},null,8,["use"])])),_:1})])):(0,a.kq)("",!0),"a"==l?((0,a.wg)(),(0,a.iD)("span",N,[(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,s.SU)(t).dialog_s,(e=>((0,a.wg)(),(0,a.iD)("span",{key:e.id},["default"==e.activator?((0,a.wg)(),(0,a.j4)(u,{key:0,onClick:l=>(0,s.SU)(t).ref[e.id].showDialog((0,s.SU)(t).data.item,"default",(0,s.SU)(t).data.source),icon:e.icon,dense:"",flat:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(e.title)+"...",1)])),_:2},1032,["onClick","icon"])):(0,a.kq)("",!0)])))),128)),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,s.SU)(t).action_s,(e=>((0,a.wg)(),(0,a.iD)("span",{key:e.id},["default"==e.activator?((0,a.wg)(),(0,a.j4)(u,{key:0,icon:e.icon,dense:"",flat:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(e.title)+"...",1)])),_:2},1032,["icon"])):(0,a.kq)("",!0)])))),128))])),_:1})])):(0,a.kq)("",!0)])))),128)),(0,a.Wm)(m)])),_:3})}}});var X=l(4458),ee=l(2857),te=l(3190),le=l(1821),ae=l(926);const se=J,ie=se;k()(J,"components",{QCard:X.Z,QToolbar:_.Z,QSpace:w.Z,QIcon:ee.Z,QCardSection:te.Z,QCardActions:le.Z,QBtn:b.Z,QSeparator:ae.Z});const oe={inheritAttrs:!1},ne=Object.assign(oe,{__name:"uf-widget-default",setup(e){(0,a.l1)().use;return(e,t)=>((0,a.wg)(),(0,a.iD)("span"))}}),re=ne,de=re,ue={key:0,class:"q-pb-sm"},ce={class:"q-field__bottom"},me={key:1,class:"q-pb-sm"},pe={key:2,class:"q-pb-sm"},he={key:3,class:"q-pb-sm"},ge={class:"q-gutter-xs row items-start"},_e={key:4,class:"q-pb-sm"},fe={key:5,class:"q-pb-sm"},we={key:6,class:"q-pb-sm"},be={key:7,class:"q-pb-sm"},ve={key:8,class:"q-pb-sm"},Ue={key:9,class:"q-pb-sm"},ke={key:10,class:"q-pb-sm"},ye={key:11,class:"text-negative"},Se=(0,a._)("br",null,null,-1),qe=(0,a._)("br",null,null,-1),De={inheritAttrs:!1},Ve=Object.assign(De,{__name:"uf-widget-form",setup(e){const t=(0,a.l1)().use;return t.data.rel_items_mode=!0,(e,l)=>{const i=(0,a.up)("q-toggle"),o=(0,a.up)("q-input"),n=(0,a.up)("q-select"),r=(0,a.up)("q-date"),u=(0,a.up)("q-popup-proxy"),c=(0,a.up)("q-time"),m=(0,a.up)("q-form");return(0,a.wg)(),(0,a.j4)(m,{greedy:"",ref:e=>{(0,s.SU)(t).refForm(e)}},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,s.SU)(t).active_s,(e=>((0,a.wg)(),(0,a.iD)("span",{key:e.id},[e.class.includes("BooleanField")?((0,a.wg)(),(0,a.iD)("div",ue,[(0,a.Wm)(i,{modelValue:(0,s.SU)(t).data.item[e.name],"onUpdate:modelValue":l=>(0,s.SU)(t).data.item[e.name]=l,label:e.verbose_name},null,8,["modelValue","onUpdate:modelValue","label"]),(0,a._)("div",ce,(0,d.zw)(e.help_text),1)])):e.class.includes("CharField")?((0,a.wg)(),(0,a.iD)("div",me,[e.choices?((0,a.wg)(),(0,a.j4)(n,{key:1,dense:"",outlined:"","hide-bottom-space":"",modelValue:(0,s.SU)(t).data.item[e.name],"onUpdate:modelValue":l=>(0,s.SU)(t).data.item[e.name]=l,label:e.verbose_name,hint:e.help_text,"option-value":"value","option-label":"label",options:Object.entries(e.choices).map((([e,t])=>({label:e,value:t}))),"emit-value":"","map-options":""},null,8,["modelValue","onUpdate:modelValue","label","hint","options"])):((0,a.wg)(),(0,a.j4)(o,{key:0,dense:"",outlined:"","hide-bottom-space":"",modelValue:(0,s.SU)(t).data.item[e.name],"onUpdate:modelValue":l=>(0,s.SU)(t).data.item[e.name]=l,label:e.verbose_name,hint:e.help_text,error:(0,s.SU)(t).data.errors[e.name].length>0,"error-message":(0,s.SU)(t).getErrorMessage(e.name)},null,8,["modelValue","onUpdate:modelValue","label","hint","error","error-message"]))])):e.class.includes("DateField")?((0,a.wg)(),(0,a.iD)("div",pe,[(0,a.Wm)(o,{dense:"",outlined:"","hide-bottom-space":"",modelValue:(0,s.SU)(t).data.item[e.name],"onUpdate:modelValue":l=>(0,s.SU)(t).data.item[e.name]=l,mask:"####-##-##",label:e.verbose_name,hint:e.help_text,error:(0,s.SU)(t).data.errors[e.name].length>0,"error-message":(0,s.SU)(t).getErrorMessage(e.name)},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{"transition-show":"scale","transition-hide":"scale"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{modelValue:(0,s.SU)(t).data.item[e.name],"onUpdate:modelValue":l=>(0,s.SU)(t).data.item[e.name]=l,mask:"YYYY-MM-DD",color:"black"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1032,["modelValue","onUpdate:modelValue","label","hint","error","error-message"])])):e.class.includes("DateTimeField")?((0,a.wg)(),(0,a.iD)("div",he,[(0,a.Wm)(o,{dense:"",outlined:"","hide-bottom-space":"",modelValue:(0,s.SU)(t).data.item[e.name],"onUpdate:modelValue":l=>(0,s.SU)(t).data.item[e.name]=l,mask:"####-##-## ##:##",label:e.verbose_name,hint:e.help_text,error:(0,s.SU)(t).data.errors[e.name].length>0,"error-message":(0,s.SU)(t).getErrorMessage(e.name)},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{"transition-show":"scale","transition-hide":"scale"},{default:(0,a.w5)((()=>[(0,a._)("div",ge,[(0,a.Wm)(r,{modelValue:(0,s.SU)(t).data.item[e.name],"onUpdate:modelValue":l=>(0,s.SU)(t).data.item[e.name]=l,mask:"YYYY-MM-DD HH:mm",color:"black"},null,8,["modelValue","onUpdate:modelValue"]),(0,a.Wm)(c,{modelValue:(0,s.SU)(t).data.item[e.name],"onUpdate:modelValue":l=>(0,s.SU)(t).data.item[e.name]=l,format24h:"",mask:"YYYY-MM-DD HH:mm",color:"black"},null,8,["modelValue","onUpdate:modelValue"])])])),_:2},1024)])),_:2},1032,["modelValue","onUpdate:modelValue","label","hint","error","error-message"])])):e.class.includes("TextField")?((0,a.wg)(),(0,a.iD)("div",_e,[(0,a.Wm)(o,{dense:"",outlined:"","hide-bottom-space":"",modelValue:(0,s.SU)(t).data.item[e.name],"onUpdate:modelValue":l=>(0,s.SU)(t).data.item[e.name]=l,label:e.verbose_name,hint:e.help_text,error:(0,s.SU)(t).data.errors[e.name].length>0,"error-message":(0,s.SU)(t).getErrorMessage(e.name),autogrow:""},null,8,["modelValue","onUpdate:modelValue","label","hint","error","error-message"])])):e.class.includes("FloatField")?((0,a.wg)(),(0,a.iD)("div",fe,[(0,a.Wm)(o,{type:"number",dense:"",outlined:"","hide-bottom-space":"",modelValue:(0,s.SU)(t).data.item[e.name],"onUpdate:modelValue":l=>(0,s.SU)(t).data.item[e.name]=l,modelModifiers:{number:!0},label:e.verbose_name,hint:e.help_text,error:(0,s.SU)(t).data.errors[e.name].length>0,"error-message":(0,s.SU)(t).getErrorMessage(e.name)},null,8,["modelValue","onUpdate:modelValue","label","hint","error","error-message"])])):e.class.includes("IntegerField")?((0,a.wg)(),(0,a.iD)("div",we,[e.choices?((0,a.wg)(),(0,a.j4)(n,{key:1,dense:"",outlined:"","hide-bottom-space":"",modelValue:(0,s.SU)(t).data.item[e.name],"onUpdate:modelValue":l=>(0,s.SU)(t).data.item[e.name]=l,modelModifiers:{number:!0},label:e.verbose_name,hint:e.help_text,"option-value":"value","option-label":"label",options:Object.entries(e.choices).map((([e,t])=>({label:e,value:t}))),"emit-value":"","map-options":""},null,8,["modelValue","onUpdate:modelValue","label","hint","options"])):((0,a.wg)(),(0,a.j4)(o,{key:0,type:"number",dense:"",outlined:"","hide-bottom-space":"",modelValue:(0,s.SU)(t).data.item[e.name],"onUpdate:modelValue":l=>(0,s.SU)(t).data.item[e.name]=l,modelModifiers:{number:!0},label:e.verbose_name,hint:e.help_text,error:(0,s.SU)(t).data.errors[e.name].length>0,"error-message":(0,s.SU)(t).getErrorMessage(e.name)},null,8,["modelValue","onUpdate:modelValue","label","hint","error","error-message"]))])):e.class.includes("PasswordField")?((0,a.wg)(),(0,a.iD)("div",be,[(0,a.Wm)(o,{type:"password",dense:"",outlined:"","hide-bottom-space":"",modelValue:(0,s.SU)(t).data.item[e.name],"onUpdate:modelValue":l=>(0,s.SU)(t).data.item[e.name]=l,label:e.verbose_name,hint:e.help_text,error:(0,s.SU)(t).data.errors[e.name].length>0,"error-message":(0,s.SU)(t).getErrorMessage(e.name)},null,8,["modelValue","onUpdate:modelValue","label","hint","error","error-message"])])):e.class.includes("ForeignKeyField")?((0,a.wg)(),(0,a.iD)("div",ve,[(0,a.Wm)(n,{dense:"",outlined:"",modelValue:(0,s.SU)(t).data.item[e.name],"onUpdate:modelValue":l=>(0,s.SU)(t).data.item[e.name]=l,"options-dense":"",label:e.verbose_name,hint:e.help_text,"option-value":"id","option-label":"title",options:(0,s.SU)(t).data.rel_item_s[e.name],error:(0,s.SU)(t).data.errors[e.name].length>0,"error-message":(0,s.SU)(t).getErrorMessage(e.name)},null,8,["modelValue","onUpdate:modelValue","label","hint","options","error","error-message"])])):e.class.includes("BackrefAccessor")?((0,a.wg)(),(0,a.iD)("div",Ue,[(0,a.Wm)(n,{dense:"",outlined:"",modelValue:(0,s.SU)(t).data.item[e.name],"onUpdate:modelValue":l=>(0,s.SU)(t).data.item[e.name]=l,multiple:"","options-dense":"",label:e.verbose_name,hint:e.help_text,"option-value":"id","option-label":"title",options:(0,s.SU)(t).data.rel_item_s[e.name]},null,8,["modelValue","onUpdate:modelValue","label","hint","options"])])):e.class.includes("ManyToManyField")?((0,a.wg)(),(0,a.iD)("div",ke,[(0,a.Wm)(n,{dense:"",outlined:"",modelValue:(0,s.SU)(t).data.item[e.name],"onUpdate:modelValue":l=>(0,s.SU)(t).data.item[e.name]=l,multiple:"","options-dense":"",label:e.verbose_name,hint:e.help_text,"option-value":"id","option-label":"title",options:(0,s.SU)(t).data.rel_item_s[e.name]},null,8,["modelValue","onUpdate:modelValue","label","hint","options"])])):((0,a.wg)(),(0,a.iD)("div",ye,[(0,a.Uk)((0,d.zw)(e.class)+" is momentarily not implemented.",1),Se,qe]))])))),128))])),_:1},512)}}});var We=l(3175),je=l(6611),xe=l(2762),Ze=l(2765),Fe=l(2952),Qe=l(6770);const Ce=Ve,Ie=Ce;k()(Ve,"components",{QForm:R.Z,QToggle:We.Z,QField:A.Z,QInput:je.Z,QSelect:xe.Z,QPopupProxy:Ze.Z,QDate:Fe.Z,QTime:Qe.Z});const Ee={class:"row"},Me={class:"row"},He={key:0,class:"col-auto text-body"},Ye={key:1,class:"col-auto text-body"},Ke={class:"col-auto"},ze={inheritAttrs:!1},Oe=Object.assign(ze,{__name:"uf-widget-info",setup(e){const t=(0,a.l1)().use;return(e,l)=>{const i=(0,a.up)("q-btn");return(0,a.wg)(),(0,a.iD)("div",Ee,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,s.SU)(t).active_s,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"widget-info-col col-lg-3 col-md-6 col-sm-12",key:e.id},[(0,a._)("h6",null,(0,d.zw)(e.verbose_name),1),(0,a._)("div",Me,[(0,s.SU)(t).data.item[e.column_name]?((0,a.wg)(),(0,a.iD)("div",He,(0,d.zw)((0,s.SU)(t).data.item[e.column_name]),1)):((0,a.wg)(),(0,a.iD)("div",Ye,"null "+(0,d.zw)(e.verbose_name),1)),(0,a._)("div",Ke,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,s.SU)(t).dialog_s,(l=>((0,a.wg)(),(0,a.iD)("span",{key:l.id},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.widget_s,(o=>((0,a.wg)(),(0,a.iD)("span",{key:o.key},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.active_s,(o=>((0,a.wg)(),(0,a.iD)("span",{key:o.name},["context"==l.activator&&e.column_name==o.column_name?((0,a.wg)(),(0,a.j4)(i,{key:0,class:"widget-info-col-btn",round:"",dense:"",flat:"",size:"xs",icon:l.icon,onClick:e=>(0,s.SU)(t).ref[l.id].showDialog((0,s.SU)(t).data.item,(0,s.SU)(t).data.source)},null,8,["icon","onClick"])):(0,a.kq)("",!0)])))),128))])))),128))])))),128))])])])))),128))])}}}),Re=Oe,Ae=Re;k()(Oe,"components",{QBtn:b.Z});const Te={inheritAttrs:!1},Pe=Object.assign(Te,{__name:"uf-widget-table",setup(e){const t=(0,a.l1)().use;function l(){let e=[];return e.push({name:"gotos",label:"",field:"gotos"}),e.push({name:"actions",label:"",filed:"actions"}),t.active_s.forEach((t=>{var l={};l=t.class.includes("ForeignKeyField")?{name:t.column_name,label:t.verbose_name,field:function(e){return e[t.name]?e[t.name]["title"]:null},sortable:!0}:{name:t.column_name,label:t.verbose_name,field:t.column_name,sortable:!0},e.push(l)})),e}return t.data.items_mode=!0,(e,i)=>{const o=(0,a.up)("q-table");return(0,a.wg)(),(0,a.j4)(o,{columns:l(),rows:(0,s.SU)(t).data.item_s,flat:""},null,8,["columns","rows"])}}});var Be=l(7580);const Le=Pe,$e=Le;k()(Pe,"components",{QTable:Be.Z});const Ne={__name:"uf-widget",props:{id:{}},setup(e){const t=e,l=(0,s.qj)(new Q(t.id));for(const a of l.action_s)new C(a.id);return(e,t)=>((0,a.wg)(),(0,a.j4)(ie,{use:l},{"widget-content":(0,a.w5)((()=>["default"==l.type?((0,a.wg)(),(0,a.j4)(de,{key:0,use:l},null,8,["use"])):(0,a.kq)("",!0),"form"==l.type?((0,a.wg)(),(0,a.j4)(Ie,{key:1,use:l},null,8,["use"])):(0,a.kq)("",!0),"info"==l.type?((0,a.wg)(),(0,a.j4)(Ae,{key:2,use:l},null,8,["use"])):(0,a.kq)("",!0),"table"==l.type?((0,a.wg)(),(0,a.j4)($e,{key:3,use:l},null,8,["use"])):(0,a.kq)("",!0)])),_:1},8,["use"]))}},Ge=Ne,Je=Ge,Xe={inheritAttrs:!1},et=Object.assign(Xe,{__name:"uf-dialog-standard",setup(e){const t=(0,a.l1)().use;return(e,l)=>((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,s.SU)(t).widget_s,(e=>((0,a.wg)(),(0,a.iD)("span",{key:e.id},[(0,a.Wm)(Je,{id:e.id},null,8,["id"]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.widget_s,(e=>((0,a.wg)(),(0,a.iD)("span",{key:e.id},[(0,a.Wm)(Je,{id:e.id},null,8,["id"])])))),128))])))),128))}}),tt=et,lt=tt,at={__name:"uf-dialog",props:{id:{}},setup(e){const t=e,l=(0,s.qj)(new r(t.id));return(e,t)=>((0,a.wg)(),(0,a.j4)(j,{use:l},{"dialog-content":(0,a.w5)((()=>["standard"==l.type?((0,a.wg)(),(0,a.j4)(lt,{key:0,use:l},null,8,["use"])):(0,a.kq)("",!0)])),_:1},8,["use"]))}},st=at,it=st;class ot{constructor(e){this.rowsPerPageOptions=[4,8,16,32,64,128,265,512,1024],this.rowsPerPage=e,this.page=1}}class nt extends i.y{constructor(e){super(e),this.ql={},this.route=(0,o.yj)(),this.data=(0,s.qj)(new x(this.uniform.source[this.source_id],this.active_s,{...this.query,...this.route.query})),this.pagination=(0,s.qj)(new ot(this.pag_recs)),this.item_menu_target=!1,this.item_menu_model=!1,this.item_menu_row={}}get column_s(){let e=[];return e.push({name:"gotos",label:"",field:"gotos"}),e.push({name:"actions",label:"",filed:"actions"}),this.active_s.forEach((t=>{var l={};l=t.class.includes("ForeignKeyField")?{name:t.column_name,label:t.verbose_name,field:function(e){return e[t.name]?e[t.name]["title"]:null},sortable:!0}:{name:t.column_name,label:t.verbose_name,field:t.column_name,sortable:!0},e.push(l)})),e}get rel_view_s(){let e=[];return this.uniform.meta.app.base_s.forEach((t=>{t.view_s.forEach((t=>{this.uniform.source[t.source_id].field_s.forEach((l=>{l.class.includes("ForeignKeyField")&&this.data.source.model==l.rel_model&&e.push({id:t.id,icon:t.icon,title:t.title,parent_id:t.parent_id,rel_field_name:l.name})}))}))})),e}onItemClick(e,t,l){if("td"==e.target.localName)for(const a of this.dialog_s)if("click"==a.activator){this.ref[a.id].showDialog(t,this.data.source);break}}onItemMenuClick(e,t){this.data.item=t,this.item_menu_target=e.target,this.item_menu_model=!0}}const rt={inheritAttrs:!1},dt=Object.assign(rt,{__name:"uf-view-context-menu",setup(e){const t=(0,a.l1)().use;return(e,l)=>{const i=(0,a.up)("q-icon"),o=(0,a.up)("q-item-section"),n=(0,a.up)("q-item"),r=(0,a.up)("q-list"),u=(0,a.up)("q-menu");return(0,a.wg)(),(0,a.j4)(u,{"auto-close":"",target:(0,s.SU)(t).item_menu_target,modelValue:(0,s.SU)(t).item_menu_model,"onUpdate:modelValue":l[0]||(l[0]=e=>(0,s.SU)(t).item_menu_model=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{style:{"min-width":"100px"}},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,s.SU)(t).dialog_s,(e=>((0,a.wg)(),(0,a.iD)("span",{key:e.id},["context"==e.activator?((0,a.wg)(),(0,a.j4)(n,{key:0,dense:"",clickable:"",onClick:l=>(0,s.SU)(t).ref[e.id].showDialog((0,s.SU)(t).data.item,(0,s.SU)(t).data.source)},{default:(0,a.w5)((()=>[(0,a.Wm)(o,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{name:e.icon},null,8,["name"])])),_:2},1024),(0,a.Wm)(o,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(e.title),1)])),_:2},1024)])),_:2},1032,["onClick"])):(0,a.kq)("",!0)])))),128)),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,s.SU)(t).action_s,(e=>((0,a.wg)(),(0,a.iD)("span",{key:e.id},["context"==e.activator?((0,a.wg)(),(0,a.j4)(n,{key:0,dense:"",clickable:"",onClick:l=>(0,s.SU)(t).ref[e.id].trigger()},{default:(0,a.w5)((()=>[(0,a.Wm)(o,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{name:e.icon},null,8,["name"])])),_:2},1024),(0,a.Wm)(o,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(e.title),1)])),_:2},1024)])),_:2},1032,["onClick"])):(0,a.kq)("",!0)])))),128))])),_:1})])),_:1},8,["target","modelValue"])}}});var ut=l(7858),ct=l(3246),mt=l(490),pt=l(1233);const ht=dt,gt=ht;k()(dt,"components",{QMenu:ut.Z,QList:ct.Z,QItem:mt.Z,QItemSection:pt.Z,QIcon:ee.Z});const _t={class:"row full-width items-center"},ft={class:"col-auto float-left"},wt={class:"col"},bt={inheritAttrs:!1},vt=Object.assign(bt,{__name:"uf-view-header-menu",setup(e){const t=(0,a.l1)().use,l=(0,s.iH)(null),i=(0,s.iH)(null),o=(0,a.Fl)((()=>{let e=[];return t.dialog_s.forEach((t=>{"default"==t.activator&&e.push(t)})),t.action_s.forEach((t=>{"default"==t.activator&&e.push(t)})),e})),n=(0,a.Fl)((()=>{let e=[];return t.ql.totalWidth&&i.value&&l.value&&i.value.forEach(((t,a)=>{t.offsetLeft+t.offsetWidth>l.value.offsetWidth&&e.push(a)})),e}));return(0,a.YP)(n,(()=>{i.value&&i.value.forEach(((e,t)=>{n.value.includes(t)?e.classList.add("overflowed"):e.classList.remove("overflowed")}))})),(e,r)=>{const d=(0,a.up)("q-btn"),u=(0,a.up)("q-item-section"),c=(0,a.up)("q-item"),m=(0,a.up)("q-list"),p=(0,a.up)("q-menu");return(0,a.wg)(),(0,a.iD)("div",_t,[(0,a._)("div",ft,[(0,s.SU)(n).length>0?((0,a.wg)(),(0,a.j4)(d,{key:0,class:"float-right text-black",dense:"",round:"",flat:"",icon:"mdi-dots-vertical"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,s.SU)(o),((e,l)=>((0,a.wg)(),(0,a.iD)("div",{key:e.id},["Decore_dialog"==e.class&&(0,s.SU)(n).includes(l)?((0,a.wg)(),(0,a.j4)(c,{key:0,clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a.Wm)(d,{class:"text-black no-wrap",flat:"",icon:e.icon,label:e.title,onClick:l=>(0,s.SU)(t).ref[e.id].showDialog(null,(0,s.SU)(t).data.source)},null,8,["icon","label","onClick"])])),_:2},1024)])),_:2},1024)):(0,a.kq)("",!0),"Decore_action"==e.class&&(0,s.SU)(n).includes(l)?((0,a.wg)(),(0,a.j4)(c,{key:1,clickable:""},{default:(0,a.w5)((()=>[(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a.Wm)(d,{class:"text-black no-wrap",flat:"",icon:e.icon,label:e.title,onClick:l=>(0,s.SU)(t).ref[e.id].trigger()},null,8,["icon","label","onClick"])])),_:2},1024)])),_:2},1024)):(0,a.kq)("",!0)])))),128))])),_:1})])),_:1})])),_:1})):(0,a.kq)("",!0)]),(0,a._)("div",wt,[(0,a._)("div",{ref_key:"menu",ref:l,class:"row no-wrap items-center"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,s.SU)(o),(e=>((0,a.wg)(),(0,a.iD)("div",{class:"col-auto",key:e.id},[(0,a._)("div",{ref_for:!0,ref_key:"component",ref:i,class:"menu-item row no-wrap"},["Decore_dialog"==e.class?((0,a.wg)(),(0,a.j4)(d,{key:0,class:"text-black",flat:"",icon:e.icon,label:e.title,onClick:l=>(0,s.SU)(t).ref[e.id].showDialog(null,(0,s.SU)(t).data.source)},null,8,["icon","label","onClick"])):(0,a.kq)("",!0),"Decore_action"==e.class?((0,a.wg)(),(0,a.j4)(d,{key:1,class:"text-black",flat:"",icon:e.icon,label:e.title,onClick:l=>(0,s.SU)(t).ref[e.id].trigger(e,null,(0,s.SU)(t).data.select_s)},null,8,["icon","label","onClick"])):(0,a.kq)("",!0)],512)])))),128))],512)])])}}});var Ut=l(1639);const kt=(0,Ut.Z)(vt,[["__scopeId","data-v-61d55b57"]]),yt=kt;k()(vt,"components",{QBtn:b.Z,QMenu:ut.Z,QList:ct.Z,QItem:mt.Z,QItemSection:pt.Z});const St={class:"row full-width items-center"},qt={class:"col-auto"},Dt={class:"col-auto"},Vt={key:0,class:"col"},Wt={key:1,class:"col"},jt={key:2,class:"col full-width"},xt={class:"row full-width items-center"},Zt={class:"col-auto"},Ft={class:"col"},Qt={class:"col-auto"},Ct={inheritAttrs:!1},It=Object.assign(Ct,{__name:"uf-view-filter",setup(e){const t=(0,a.l1)().use,l=(0,o.tv)(),i=(0,o.yj)(),n=(0,s.iH)(null),r=(0,s.iH)(null),d=(0,s.iH)("eq"),u=(0,s.iH)(null);function c(){n.value&&!r.value?(n.value=null,_.value=null,u.value=null):n.value&&r.value&&(r.value=null,_.value=null,u.value=null)}const m=(0,a.Fl)((()=>{let e=!1;return!n.value||"ForeignKeyField"!=n.value.class&&"ManyToManyField"!=n.value.class&&"BackrefAccessor"!=n.value.class||(e=!0),e})),p=(0,a.Fl)((()=>{let e=[];return t.filter_s.forEach((l=>{let a=!1;Object.entries(t.data.query).forEach((([e])=>{e.includes(l.name)&&"ForeignKeyField"!=l.class&&(a=!0)})),a||e.push(l)})),e})),h=(0,a.Fl)((()=>{let e,l=[];if("ForeignKeyField"==n.value.class)e=n.value.rel_model;else{let l=t.data.source.rel_field_s.filter((e=>"ForeignKeyField"==e.class&&e.backref==n.value.name||"ManyToManyField"==e.class&&e.name==n.value.name))[0];e="ForeignKeyField"==l.class?l.model:l.rel_model}let a=t.uniform.getSourceByModel(e);return a.field_s.forEach((e=>{let a=!1;Object.entries(t.data.query).forEach((([t])=>{t.includes(e.name)&&(a=!0)})),a||"ForeignKeyField"!=e.class&&n.value.filter_fields.includes(e.name)&&l.push(e)})),l})),g=(0,a.Fl)((()=>{let e=[{name:"eq",verbose_name:"==",types:"*"}],t=[];return n.value&&e.forEach((e=>{"*"==e.types&&t.push(e),e.types.includes(n.value.class)&&t.push(e)})),t})),_=(0,s.iH)({});function f(){let e=i.query;n.value&&!m.value?t.data.source.getFilterValues(e,n.value.name,null).then((e=>{_.value=_.value=e.data})):r.value&&m.value&&t.data.source.getFilterValues(e,n.value.name,r.value.name).then((e=>{_.value=e.data}))}function w(){let e={...i.query},t="";m.value?m.value&&(t=t+n.value.name+"__"+r.value.name):t=n.value.name,t=t+"__"+d.value,e[t]=u.value,l.push({path:i.path,query:e})}return(e,l)=>{const o=(0,a.up)("q-btn"),b=(0,a.up)("q-select");return(0,a.wg)(),(0,a.iD)("div",St,[(0,a._)("div",qt,[(0,a.Wm)(o,{class:"float-right text-black",dense:"",round:"",flat:"",icon:"mdi-content-save",onClick:l[0]||(l[0]=e=>(0,s.SU)(t).uniform.queries.saveQuery((0,s.SU)(i)))})]),(0,a._)("div",Dt,[(0,a.Wm)(o,{class:"float-right text-black",dense:"",round:"",flat:"",icon:"mdi-undo",onClick:l[1]||(l[1]=e=>c()),disable:!n.value},null,8,["disable"])]),n.value?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",Vt,[(0,a.Wm)(b,{dense:"",outlined:"",modelValue:n.value,"onUpdate:modelValue":[l[2]||(l[2]=e=>n.value=e),l[3]||(l[3]=e=>f())],options:(0,s.SU)(p),"option-value":"name","option-label":"verbose_name","options-dense":"",label:"Select field for filtering",style:{width:"100%"}},null,8,["modelValue","options"])])),(0,s.SU)(m)&&n.value&&!r.value?((0,a.wg)(),(0,a.iD)("div",Wt,[(0,a.Wm)(b,{dense:"",outlined:"",modelValue:r.value,"onUpdate:modelValue":[l[4]||(l[4]=e=>r.value=e),l[5]||(l[5]=e=>f())],options:(0,s.SU)(h),"option-value":"name","option-label":"verbose_name","options-dense":"",label:"Select related field for filtering",style:{width:"100%"}},null,8,["modelValue","options"])])):(0,a.kq)("",!0),(0,s.SU)(m)&&n.value&&r.value||!(0,s.SU)(m)&&n.value?((0,a.wg)(),(0,a.iD)("div",jt,[(0,a._)("div",xt,[(0,a._)("div",Zt,[(0,a.Wm)(b,{dense:"",outlined:"",modelValue:d.value,"onUpdate:modelValue":l[6]||(l[6]=e=>d.value=e),options:(0,s.SU)(g),"option-value":"name","option-label":"verbose_name","options-dense":"","map-options":"","emit-value":""},null,8,["modelValue","options"])]),(0,a._)("div",Ft,["eq"==d.value?((0,a.wg)(),(0,a.j4)(b,{key:0,dense:"",outlined:"",modelValue:u.value,"onUpdate:modelValue":l[7]||(l[7]=e=>u.value=e),multiple:"","option-label":"label","option-value":"value","map-options":"","emit-value":"",options:Object.entries(_.value).map((([e,t])=>({label:e,value:t}))),"options-dense":"",label:"Select value for filtering",style:{width:"100%"},disable:!_.value,loading:!_.value},null,8,["modelValue","options","disable","loading"])):(0,a.kq)("",!0)])])])):(0,a.kq)("",!0),(0,a._)("div",Qt,[(0,a.Wm)(o,{class:"float-right text-black",dense:"",round:"",flat:"",icon:"mdi-database-search",onClick:l[8]||(l[8]=e=>w()),disable:!u.value},null,8,["disable"])])])}}}),Et=It,Mt=Et;k()(It,"components",{QBtn:b.Z,QSelect:xe.Z});const Ht={class:"row full-width row items-center"},Yt={class:"col-4"},Kt={class:"col-4"},zt={class:"col-4"},Ot={class:"row items-center"},Rt={class:"col-2"},At={class:"col"},Tt={class:"row full-width items-center"},Pt={inheritAttrs:!1},Bt=Object.assign(Pt,{__name:"uf-view-header",setup(e){const t=(0,a.l1)().use,l=(0,o.yj)();return(e,i)=>{const o=(0,a.up)("q-btn"),n=(0,a.up)("q-input"),r=(0,a.up)("q-toolbar"),d=(0,a.up)("q-chip");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(r,{class:"bg-grey-2"},{default:(0,a.w5)((()=>[(0,a._)("div",Ht,[(0,a._)("div",Yt,[(0,a.Wm)(yt,{use:(0,s.SU)(t)},null,8,["use"])]),(0,a._)("div",Kt,[(0,a.Wm)(Mt,{use:(0,s.SU)(t)},null,8,["use"])]),(0,a._)("div",zt,[(0,a._)("div",Ot,[(0,a._)("div",Rt,[(0,a.Wm)(o,{class:"float-right text-black",dense:"",round:"",flat:"",icon:"clear",disable:!(0,s.SU)(t).data.search,onClick:i[0]||(i[0]=e=>(0,s.SU)(t).data.search=null)},null,8,["disable"])]),(0,a._)("div",At,[(0,a.Wm)(n,{class:"text-black",dense:"",outlined:"",modelValue:(0,s.SU)(t).data.search,"onUpdate:modelValue":i[1]||(i[1]=e=>(0,s.SU)(t).data.search=e),label:"Fast search in "+(0,s.SU)(t).title},null,8,["modelValue","label"])])])])])])),_:1}),(0,a._)("div",Tt,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,s.SU)(l).query,((e,t)=>((0,a.wg)(),(0,a.j4)(d,{label:t+"="+e,key:t},null,8,["label"])))),128))])],64)}}});var Lt=l(7691);const $t=Bt,Nt=$t;k()(Bt,"components",{QToolbar:_.Z,QBtn:b.Z,QInput:je.Z,QChip:Lt.Z});const Gt={class:"row items-center"},Jt={class:"view-footer-pagination col-auto"},Xt={class:"col-auto"},el={inheritAttrs:!1},tl=Object.assign(el,{__name:"uf-view-footer",setup(e){const t=(0,a.l1)().use,l=(0,a.Fl)((()=>{let e=Math.ceil(t.data.count/t.pagination.rowsPerPage);return e}));return(e,i)=>{const o=(0,a.up)("q-space"),n=(0,a.up)("q-pagination"),r=(0,a.up)("q-select"),d=(0,a.up)("q-toolbar");return(0,a.wg)(),(0,a.j4)(d,{class:"bg-grey-2"},{default:(0,a.w5)((()=>[(0,a.Wm)(o),(0,a._)("div",Gt,[(0,a._)("div",Jt,[(0,a.Wm)(n,{modelValue:(0,s.SU)(t).pagination.page,"onUpdate:modelValue":i[0]||(i[0]=e=>(0,s.SU)(t).pagination.page=e),max:(0,s.SU)(l),"max-pages":5,"direction-links":"","boundary-links":"","boundary-numbers":"",color:"black"},null,8,["modelValue","max"])]),(0,a._)("div",Xt,[(0,a.Wm)(r,{modelValue:(0,s.SU)(t).pagination.rowsPerPage,"onUpdate:modelValue":i[1]||(i[1]=e=>(0,s.SU)(t).pagination.rowsPerPage=e),options:(0,s.SU)(t).pagination.rowsPerPageOptions,dense:"",outlined:""},null,8,["modelValue","options"])])])])),_:1})}}});var ll=l(996);const al=tl,sl=al;k()(tl,"components",{QToolbar:_.Z,QSpace:w.Z,QPagination:ll.Z,QSelect:xe.Z});const il={inheritAttrs:!1},ol=Object.assign(il,{__name:"uf-view-layout",setup(e){const t=(0,a.l1)().use,l=(0,a.Fl)((()=>{let e="0 px";return t.ql.hasOwnProperty("header")&&(e=t.ql.header.size+"px"),e}));return(e,i)=>{const o=(0,a.up)("q-header"),n=(0,a.up)("q-footer"),r=(0,a.up)("q-layout");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(gt,{use:(0,s.SU)(t)},null,8,["use"]),(0,a.Wm)(r,{container:"",style:{height:"calc(100vh - 102px)"}},{default:(0,a.w5)((()=>[(0,a.Wm)(u.Z,{use:(0,s.SU)(t)},null,8,["use"]),(0,a.Wm)(o,{reveal:"",class:"bg-white"},{default:(0,a.w5)((()=>[(0,a.Wm)(Nt,{use:(0,s.SU)(t)},null,8,["use"])])),_:1}),(0,a._)("div",{class:"view-content",style:(0,d.j5)({"padding-top":(0,s.SU)(l)})},[(0,a.WI)(e.$slots,"view-content")],4),(0,a.Wm)(n,{reveal:""},{default:(0,a.w5)((()=>[(0,a.Wm)(sl,{use:(0,s.SU)(t)},null,8,["use"])])),_:1})])),_:3})],64)}}}),nl=ol,rl=nl;k()(ol,"components",{QLayout:h.Z,QHeader:g.Z,QFooter:v.Z});const dl={inheritAttrs:!1},ul=Object.assign(dl,{__name:"uf-view-table",setup(e){const t=(0,a.l1)().use;t.data.items_mode=!0;const l=(0,a.Fl)((()=>{let e=16,l="0 px";return e+=t.ref.app.ql.header.size,e+=t.ref.app.ql.footer.size,e+=t.ql.header.size,e+=t.ql.footer.size,l="calc(100vh - "+e+"px)",l}));return(e,i)=>{const o=(0,a.up)("q-item-section"),n=(0,a.up)("q-item"),r=(0,a.up)("q-list"),u=(0,a.up)("q-menu"),c=(0,a.up)("q-btn"),m=(0,a.up)("q-td"),p=(0,a.up)("q-table");return(0,a.wg)(),(0,a.j4)(p,{columns:(0,s.SU)(t).column_s,filter:(0,s.SU)(t).data.search,rows:(0,s.SU)(t).data.item_s,style:(0,d.j5)({height:(0,s.SU)(l)}),class:"sticky-header-table",dense:"",flat:"","hide-bottom":"","row-key":"id",selection:"multiple",pagination:(0,s.SU)(t).pagination,"onUpdate:pagination":i[0]||(i[0]=e=>(0,s.SU)(t).pagination=e),selected:(0,s.SU)(t).data.select_s,"onUpdate:selected":i[1]||(i[1]=e=>(0,s.SU)(t).data.select_s=e),onRowClick:i[2]||(i[2]=(e,l,a)=>{(0,s.SU)(t).onItemClick(e,l,a)})},{"body-cell-gotos":(0,a.w5)((e=>[(0,a.Wm)(m,{props:e},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{dense:"",round:"",flat:"",icon:"mdi-link"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{"auto-close":""},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{style:{"min-width":"100px"}},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,s.SU)(t).rel_view_s,(t=>((0,a.wg)(),(0,a.j4)(n,{dense:"",key:t.id,to:"/"+t.parent_id+"/"+t.id+"?"+t.rel_field_name+"__eq="+e.row.id},{default:(0,a.w5)((()=>[(0,a.Wm)(o,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)("view "+t.title+" from "+e.row.title),1)])),_:2},1024)])),_:2},1032,["to"])))),128))])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["props"])])),"body-cell-actions":(0,a.w5)((e=>[(0,a.Wm)(m,{props:e},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{dense:"",round:"",flat:"",icon:"mdi-dots-vertical",onClick:l=>{(0,s.SU)(t).onItemMenuClick(l,e.row)}},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["columns","filter","rows","style","pagination","selected"])}}});var cl=l(7220);const ml=ul,pl=ml;k()(ul,"components",{QTable:Be.Z,QTd:cl.Z,QBtn:b.Z,QMenu:ut.Z,QList:ct.Z,QItem:mt.Z,QItemSection:pt.Z});const hl={__name:"uf-view",props:{id:{}},setup(e){const t=e,l=(0,s.qj)(new nt(t.id));for(const a of l.action_s)new C(a.id);return(0,a.bv)((()=>{l.data.setItems();for(const e of l.dialog_s)if("none"==e.activator){l.ref[e.id].showDialog(null,l.data.source);break}})),(e,t)=>((0,a.wg)(),(0,a.j4)(rl,{use:l},{"view-content":(0,a.w5)((()=>["table"==l.type?((0,a.wg)(),(0,a.j4)(pl,{key:0,use:l},null,8,["use"])):(0,a.kq)("",!0)])),_:1},8,["use"]))}},gl=hl,_l=gl,fl={key:0},wl={__name:"uf-base",setup(e){const t=(0,o.yj)(),l=(0,s.qj)(new n(t.params.base_id));return(e,t)=>{const s=(0,a.up)("q-page");return(0,a.wg)(),(0,a.iD)(a.HY,null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.base_dialog_s,(e=>((0,a.wg)(),(0,a.j4)(it,{key:e.id,id:e.id},null,8,["id"])))),128)),(0,a.Wm)(s,null,{default:(0,a.w5)((()=>[l.getView().id?((0,a.wg)(),(0,a.iD)("span",fl,[(0,a.Wm)(_l,{id:l.getView().id},null,8,["id"])])):(0,a.kq)("",!0)])),_:1})],64)}}};var bl=l(9885);const vl=wl,Ul=vl;k()(wl,"components",{QPage:bl.Z})}}]);
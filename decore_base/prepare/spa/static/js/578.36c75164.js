"use strict";(globalThis["webpackChunkuniform_front"]=globalThis["webpackChunkuniform_front"]||[]).push([[578],{578:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ba});a(9665);var l=a(9835),s=a(499),i=a(5360);class o extends i.y{constructor(e){super(e)}get base_view(){let e=null;return this.view_s.forEach((t=>{t.id==this.app.route.params.view_id&&(e=t)})),e}get base_view_dialog_s(){let e=[];for(const t in this.decore.meta){const a=this.decore.meta[t];if(a.class.includes("Decore_dialog")){let t=this.getParentView(this.decore.meta[a.parent_id]);this.base_view&&this.base_view.id==t.id&&e.push(a)}}return e}getParentView(e){return e.class.includes("Decore_view")?e:this.getParentView(this.decore.meta[e.parent_id])}hideDialogs(){this.base_view_dialog_s.forEach((e=>{this.ref[e.id]&&this.ref[e.id].show&&this.ref[e.id].hideDialog()}))}showMainDialog(e){this.base_view_dialog_s.forEach((t=>{t.id===e?this.ref[t.id]&&this.ref[t.id].showDialog():this.ref[t.id]&&this.ref[t.id].show&&this.ref[t.id].hideDialog()}))}showSubDialog(e){this.base_view_dialog_s.forEach((t=>{t.id===e&&this.ref[t.id]&&this.ref[t.id].showDialog()}))}}class n{constructor(e,t,a,l,s){this.items_mode=!1,this.route=e,this.source=t,this.parent_source=a,this.field_s=l,this.query=s,this.search="",this.item={},this.item_s=[],this.rel_item_s={},this.select_s=[],this.count=0,this.errors={},this.setErrors({})}export(){let e={};return e.item=this.item,e.select_s=this.select_s,e.field_s=this.field_s,e}setItem(){let e=this.route.params.item_id;this.loadItem(this.parent_source,e).then((e=>{let t=e.data;this.parent_source.model!=this.source.model?this.loadItem(this.source,"default").then((e=>{this.item=e.data,this.parent_source.rel_field_s.forEach((e=>{if(e.class.includes("ForeignKeyField")&&this.source.model==e.model){let a=e.name+"__eq";this.query[a]=t.id,this.item[e.name]={...t}}if(e.class.includes("ManyToManyField")&&this.source.model==e.rel_model){let a=e.backref+"__id__eq";this.query[a]=t.id}})),this.setRelItems(),this.setItems()})):(this.item=t,this.setRelItems(),this.setItems())}))}loadItem(e,t){return"empty"==t?e.getDefault():"first"==t?e.getFirst():"last"==t?e.getLast():"default"==t?e.getDefault():e.getItem(t)}setItems(){this.items_mode?this.source.getItems(this.query).then((e=>{this.item_s=e.data.item_s,this.purgeSelects(),this.count=e.data.count})):(this.item_s=[],this.select_s=[],this.count=0)}setRelItems(){this.field_s.forEach((e=>{if("ForeignKeyField"==e.class){let t=this.source.getRefByModel(e.rel_model);t.getRelItems(e.choice_query).then((t=>{this.rel_item_s[e.name]=t.data}))}else if("BackrefAccessor"==e.class){let t=this.source.getRefByModel(e.rel_model);this.item.id&&(e.choice_query[e.field.name+"__eq"]=[null,this.item.id]),t.getRelItems(e.choice_query).then((t=>{this.rel_item_s[e.name]=t.data}))}else if("ManyToManyField"==e.class){let t=this.source.getRefByModel(e.rel_model);t.getRelItems(e.choice_query).then((t=>{this.rel_item_s[e.name]=t.data}))}}))}purgeSelects(){let e=[];for(const t of this.select_s)this.item_s.includes(t)&&e.push(t);this.select_s=e}setErrors(e){for(const t of this.field_s)t.name in e?this.errors[t.name]=e[t.name]:this.errors[t.name]=[]}}class r{constructor(e){this.rowsPerPageOptions=[4,8,16,32,64,128,265,512,1024],this.rowsPerPage=e,this.page=1}}var d=a(8339);class u extends i.y{constructor(e){super(e),this.ql={},this.route=(0,d.yj)(),this.data=(0,s.qj)(new n(this.app.route,this.decore.source[this.source_id],null,this.active_s,{...this.query,...this.route.query})),this.pagination=(0,s.qj)(new r(this.pag_recs)),this.item_menu_target=!1,this.item_menu_model=!1,this.item_menu_row={}}get column_s(){let e=[];return e.push({name:"gotos",label:"",field:"gotos"}),e.push({name:"actions",label:"",filed:"actions"}),this.active_s.forEach((t=>{var a={};a=t.class.includes("ForeignKeyField")?{name:t.column_name,label:t.verbose_name,field:function(e){return e[t.name]?e[t.name]["title"]:null},sortable:!0}:{name:t.column_name,label:t.verbose_name,field:t.column_name,sortable:!0},e.push(a)})),e}get rel_view_s(){let e=[];return this.decore.meta.app.base_s.forEach((t=>{t.view_s.forEach((t=>{this.decore.source[t.source_id].field_s.forEach((a=>{a.class.includes("ForeignKeyField")&&this.data.source.model==a.rel_model&&e.push({id:t.id,icon:t.icon,title:t.title,parent_id:t.parent_id,rel_field_name:a.name})}))}))})),e}onItemClick(e,t,a){if("td"==e.target.localName)for(const l of this.dialog_s)if("click"==l.activator){this.data.item=t,this.app.router.push({name:"dialog",params:{dialog_id:l.id,item_id:t.id},query:this.app.route.query});break}}onItemMenuClick(e,t){this.data.item=t,this.item_menu_target=e.target,this.item_menu_model=!0}}class m extends i.y{constructor(e){super(e),this.actor=this.decore.actor}async trigger(){let e=await this.actor.postAction(this,this.getData("parent"));return this.refreshRouteItems(this.parent_id),e}refreshRouteItems(e){const t=this.ref[e];t.data&&t.data.setItems(),"app"!=t.parent_id&&this.refreshRouteItems(t.parent_id)}getData(e){let t={};if("this"==e)t[this.parent_id]=this.ref[this.parent_id].data.export();else if("parent"==e){var a=this.parent_id;while("app"!=a)for(const e of Object.values(this.ref))e.id==a&&(e.data&&(t[e.id]=e.data.export()),a=e.parent_id)}else if("all"==e)for(const l of Object.values(this.ref))l.data&&(t[l.id]=l.data.export());return t}}var c=a(6970),p=a(5288);const h={inheritAttrs:!1},_=Object.assign(h,{__name:"uf-view-context-menu",setup(e){const t=(0,l.l1)().use;return(e,a)=>{const i=(0,l.up)("q-icon"),o=(0,l.up)("q-item-section"),n=(0,l.up)("q-item"),r=(0,l.up)("q-list"),d=(0,l.up)("q-menu");return(0,l.wg)(),(0,l.j4)(d,{"auto-close":"",target:(0,s.SU)(t).item_menu_target,modelValue:(0,s.SU)(t).item_menu_model,"onUpdate:modelValue":a[0]||(a[0]=e=>(0,s.SU)(t).item_menu_model=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{style:{"min-width":"100px"}},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,s.SU)(t).dialog_s,(e=>((0,l.wg)(),(0,l.iD)("span",{key:e.id},["context"==e.activator?((0,l.wg)(),(0,l.j4)(n,{key:0,dense:"",clickable:"",onClick:a=>(0,s.SU)(t).app.router.push({name:"dialog",params:{dialog_id:e.id,item_id:(0,s.SU)(t).data.item.id},query:(0,s.SU)(t).app.route.query})},{default:(0,l.w5)((()=>[(0,l.Wm)(o,{avatar:""},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{name:e.icon},null,8,["name"])])),_:2},1024),(0,l.Wm)(o,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,c.zw)(e.title),1)])),_:2},1024)])),_:2},1032,["onClick"])):(0,l.kq)("",!0)])))),128)),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,s.SU)(t).action_s,(e=>((0,l.wg)(),(0,l.iD)("span",{key:e.id},["context"==e.activator?((0,l.wg)(),(0,l.j4)(n,{key:0,dense:"",clickable:"",onClick:a=>(0,s.SU)(t).ref[e.id].trigger()},{default:(0,l.w5)((()=>[(0,l.Wm)(o,{avatar:""},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{name:e.icon},null,8,["name"])])),_:2},1024),(0,l.Wm)(o,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,c.zw)(e.title),1)])),_:2},1024)])),_:2},1032,["onClick"])):(0,l.kq)("",!0)])))),128))])),_:1})])),_:1},8,["target","modelValue"])}}});var g=a(7858),w=a(3246),f=a(490),b=a(1233),v=a(2857),U=a(9984),y=a.n(U);const k=_,S=k;y()(_,"components",{QMenu:g.Z,QList:w.Z,QItem:f.Z,QItemSection:b.Z,QIcon:v.Z});const q={class:"row full-width items-center"},D={class:"col-auto float-left"},V={class:"col"},W={inheritAttrs:!1},j=Object.assign(W,{__name:"uf-view-header-menu",setup(e){const t=(0,l.l1)().use,a=(0,s.iH)(null),i=(0,s.iH)(null),o=(0,l.Fl)((()=>{let e=[];return t.dialog_s.forEach((t=>{"default"==t.activator&&e.push(t)})),t.action_s.forEach((t=>{"default"==t.activator&&e.push(t)})),e})),n=(0,l.Fl)((()=>{let e=[];return t.ql.totalWidth&&i.value&&a.value&&i.value.forEach(((t,l)=>{t.offsetLeft+t.offsetWidth>a.value.offsetWidth&&e.push(l)})),e}));return(0,l.YP)(n,(()=>{i.value&&i.value.forEach(((e,t)=>{n.value.includes(t)?e.classList.add("overflowed"):e.classList.remove("overflowed")}))})),(e,r)=>{const d=(0,l.up)("q-btn"),u=(0,l.up)("q-item-section"),m=(0,l.up)("q-item"),c=(0,l.up)("q-list"),p=(0,l.up)("q-menu");return(0,l.wg)(),(0,l.iD)("div",q,[(0,l._)("div",D,[(0,s.SU)(n).length>0?((0,l.wg)(),(0,l.j4)(d,{key:0,class:"float-right text-black",dense:"",round:"",flat:"",icon:"mdi-dots-vertical"},{default:(0,l.w5)((()=>[(0,l.Wm)(p,null,{default:(0,l.w5)((()=>[(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,s.SU)(o),((e,a)=>((0,l.wg)(),(0,l.iD)("div",{key:e.id},["Decore_dialog"==e.class&&(0,s.SU)(n).includes(a)?((0,l.wg)(),(0,l.j4)(m,{key:0,clickable:""},{default:(0,l.w5)((()=>[(0,l.Wm)(u,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d,{class:"text-black no-wrap",flat:"",icon:e.icon,label:e.title,onClick:a=>(0,s.SU)(t).app.router.push({name:"dialog",params:{dialog_id:e.id,item_id:"null"},query:(0,s.SU)(t).app.route.query})},null,8,["icon","label","onClick"])])),_:2},1024)])),_:2},1024)):(0,l.kq)("",!0),"Decore_action"==e.class&&(0,s.SU)(n).includes(a)?((0,l.wg)(),(0,l.j4)(m,{key:1,clickable:""},{default:(0,l.w5)((()=>[(0,l.Wm)(u,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d,{class:"text-black no-wrap",flat:"",icon:e.icon,label:e.title,onClick:a=>(0,s.SU)(t).ref[e.id].trigger()},null,8,["icon","label","onClick"])])),_:2},1024)])),_:2},1024)):(0,l.kq)("",!0)])))),128))])),_:1})])),_:1})])),_:1})):(0,l.kq)("",!0)]),(0,l._)("div",V,[(0,l._)("div",{ref_key:"menu",ref:a,class:"row no-wrap items-center"},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,s.SU)(o),(e=>((0,l.wg)(),(0,l.iD)("div",{class:"col-auto",key:e.id},[(0,l._)("div",{ref_for:!0,ref_key:"component",ref:i,class:"menu-item row no-wrap"},["Decore_dialog"==e.class?((0,l.wg)(),(0,l.j4)(d,{key:0,class:"text-black",flat:"",icon:e.icon,label:e.title,onClick:a=>(0,s.SU)(t).app.router.push({name:"dialog",params:{dialog_id:e.id,item_id:e.activator},query:(0,s.SU)(t).app.route.query})},null,8,["icon","label","onClick"])):(0,l.kq)("",!0),"Decore_action"==e.class?((0,l.wg)(),(0,l.j4)(d,{key:1,class:"text-black",flat:"",icon:e.icon,label:e.title,onClick:a=>(0,s.SU)(t).ref[e.id].trigger(e,null,(0,s.SU)(t).data.select_s)},null,8,["icon","label","onClick"])):(0,l.kq)("",!0)],512)])))),128))],512)])])}}});var x=a(1639),Z=a(8879);const F=(0,x.Z)(j,[["__scopeId","data-v-50bcf3c2"]]),Q=F;y()(j,"components",{QBtn:Z.Z,QMenu:g.Z,QList:w.Z,QItem:f.Z,QItemSection:b.Z});const C={class:"row full-width items-center"},M={class:"col-auto"},I={class:"col-auto"},E={key:0,class:"col"},Y={key:1,class:"col"},H={key:2,class:"col full-width"},z={class:"row full-width items-center"},K={class:"col-auto"},O={class:"col"},P={class:"col-auto"},A={inheritAttrs:!1},T=Object.assign(A,{__name:"uf-view-filter",setup(e){const t=(0,l.l1)().use,a=(0,d.tv)(),i=(0,d.yj)(),o=(0,s.iH)(null),n=(0,s.iH)(null),r=(0,s.iH)("eq"),u=(0,s.iH)(null);function m(){o.value&&!n.value?(o.value=null,g.value=null,u.value=null):o.value&&n.value&&(n.value=null,g.value=null,u.value=null)}const c=(0,l.Fl)((()=>{let e=!1;return!o.value||"ForeignKeyField"!=o.value.class&&"ManyToManyField"!=o.value.class&&"BackrefAccessor"!=o.value.class||(e=!0),e})),p=(0,l.Fl)((()=>{let e=[];return t.filter_s.forEach((a=>{let l=!1;Object.entries(t.data.query).forEach((([e])=>{e.includes(a.name)&&"ForeignKeyField"!=a.class&&(l=!0)})),l||e.push(a)})),e})),h=(0,l.Fl)((()=>{let e,a=[];if("ForeignKeyField"==o.value.class)e=o.value.rel_model;else{let a=t.data.source.rel_field_s.filter((e=>"ForeignKeyField"==e.class&&e.backref==o.value.name||"ManyToManyField"==e.class&&e.name==o.value.name))[0];e="ForeignKeyField"==a.class?a.model:a.rel_model}let l=t.decore.getSourceByModel(e);return l.field_s.forEach((e=>{let l=!1;Object.entries(t.data.query).forEach((([t])=>{t.includes(e.name)&&(l=!0)})),l||"ForeignKeyField"!=e.class&&o.value.filter_fields.includes(e.name)&&a.push(e)})),a})),_=(0,l.Fl)((()=>{let e=[{name:"eq",verbose_name:"==",types:"*"}],t=[];return o.value&&e.forEach((e=>{"*"==e.types&&t.push(e),e.types.includes(o.value.class)&&t.push(e)})),t})),g=(0,s.iH)({});function w(){let e=i.query;o.value&&!c.value?t.data.source.getFilterValues(e,o.value.name,null).then((e=>{g.value=g.value=e.data})):n.value&&c.value&&t.data.source.getFilterValues(e,o.value.name,n.value.name).then((e=>{g.value=e.data}))}function f(){let e={...i.query},t="";c.value?c.value&&(t=t+o.value.name+"__"+n.value.name):t=o.value.name,t=t+"__"+r.value,e[t]=u.value,a.push({path:i.path,query:e})}return(e,a)=>{const d=(0,l.up)("q-btn"),b=(0,l.up)("q-select");return(0,l.wg)(),(0,l.iD)("div",C,[(0,l._)("div",M,[(0,l.Wm)(d,{class:"float-right text-black",dense:"",round:"",flat:"",icon:"mdi-content-save",onClick:a[0]||(a[0]=e=>(0,s.SU)(t).decore.queries.saveQuery((0,s.SU)(i)))})]),(0,l._)("div",I,[(0,l.Wm)(d,{class:"float-right text-black",dense:"",round:"",flat:"",icon:"mdi-undo",onClick:a[1]||(a[1]=e=>m()),disable:!o.value},null,8,["disable"])]),o.value?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",E,[(0,l.Wm)(b,{dense:"",outlined:"",modelValue:o.value,"onUpdate:modelValue":[a[2]||(a[2]=e=>o.value=e),a[3]||(a[3]=e=>w())],options:(0,s.SU)(p),"option-value":"name","option-label":"verbose_name","options-dense":"",label:"Select field for filtering",style:{width:"100%"}},null,8,["modelValue","options"])])),(0,s.SU)(c)&&o.value&&!n.value?((0,l.wg)(),(0,l.iD)("div",Y,[(0,l.Wm)(b,{dense:"",outlined:"",modelValue:n.value,"onUpdate:modelValue":[a[4]||(a[4]=e=>n.value=e),a[5]||(a[5]=e=>w())],options:(0,s.SU)(h),"option-value":"name","option-label":"verbose_name","options-dense":"",label:"Select related field for filtering",style:{width:"100%"}},null,8,["modelValue","options"])])):(0,l.kq)("",!0),(0,s.SU)(c)&&o.value&&n.value||!(0,s.SU)(c)&&o.value?((0,l.wg)(),(0,l.iD)("div",H,[(0,l._)("div",z,[(0,l._)("div",K,[(0,l.Wm)(b,{dense:"",outlined:"",modelValue:r.value,"onUpdate:modelValue":a[6]||(a[6]=e=>r.value=e),options:(0,s.SU)(_),"option-value":"name","option-label":"verbose_name","options-dense":"","map-options":"","emit-value":""},null,8,["modelValue","options"])]),(0,l._)("div",O,["eq"==r.value?((0,l.wg)(),(0,l.j4)(b,{key:0,dense:"",outlined:"",modelValue:u.value,"onUpdate:modelValue":a[7]||(a[7]=e=>u.value=e),multiple:"","option-label":"label","option-value":"value","map-options":"","emit-value":"",options:Object.entries(g.value).map((([e,t])=>({label:e,value:t}))),"options-dense":"",label:"Select value for filtering",style:{width:"100%"},disable:!g.value,loading:!g.value},null,8,["modelValue","options","disable","loading"])):(0,l.kq)("",!0)])])])):(0,l.kq)("",!0),(0,l._)("div",P,[(0,l.Wm)(d,{class:"float-right text-black",dense:"",round:"",flat:"",icon:"mdi-database-search",onClick:a[8]||(a[8]=e=>f()),disable:!u.value},null,8,["disable"])])])}}});var B=a(2762);const R=T,L=R;y()(T,"components",{QBtn:Z.Z,QSelect:B.Z});const $={class:"row full-width row items-center"},N={class:"col-4"},G={class:"col-4"},J={class:"col-4"},X={class:"row items-center"},ee={class:"col-2"},te={class:"col"},ae={class:"row full-width items-center"},le={inheritAttrs:!1},se=Object.assign(le,{__name:"uf-view-header",setup(e){const t=(0,l.l1)().use,a=(0,d.yj)();return(e,i)=>{const o=(0,l.up)("q-btn"),n=(0,l.up)("q-input"),r=(0,l.up)("q-toolbar"),d=(0,l.up)("q-chip");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(r,{class:"bg-grey-2"},{default:(0,l.w5)((()=>[(0,l._)("div",$,[(0,l._)("div",N,[(0,l.Wm)(Q,{use:(0,s.SU)(t)},null,8,["use"])]),(0,l._)("div",G,[(0,l.Wm)(L,{use:(0,s.SU)(t)},null,8,["use"])]),(0,l._)("div",J,[(0,l._)("div",X,[(0,l._)("div",ee,[(0,l.Wm)(o,{class:"float-right text-black",dense:"",round:"",flat:"",icon:"clear",disable:!(0,s.SU)(t).data.search,onClick:i[0]||(i[0]=e=>(0,s.SU)(t).data.search=null)},null,8,["disable"])]),(0,l._)("div",te,[(0,l.Wm)(n,{class:"text-black",dense:"",outlined:"",modelValue:(0,s.SU)(t).data.search,"onUpdate:modelValue":i[1]||(i[1]=e=>(0,s.SU)(t).data.search=e),label:"Fast search in "+(0,s.SU)(t).title},null,8,["modelValue","label"])])])])])])),_:1}),(0,l._)("div",ae,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,s.SU)(a).query,((e,t)=>((0,l.wg)(),(0,l.j4)(d,{label:t+"="+e,key:t},null,8,["label"])))),128))])],64)}}});var ie=a(1663),oe=a(6611),ne=a(7691);const re=se,de=re;y()(se,"components",{QToolbar:ie.Z,QBtn:Z.Z,QInput:oe.Z,QChip:ne.Z});const ue={class:"row items-center"},me={class:"view-footer-pagination col-auto"},ce={class:"col-auto"},pe={inheritAttrs:!1},he=Object.assign(pe,{__name:"uf-view-footer",setup(e){const t=(0,l.l1)().use,a=(0,l.Fl)((()=>{let e=Math.ceil(t.data.count/t.pagination.rowsPerPage);return e}));return(e,i)=>{const o=(0,l.up)("q-space"),n=(0,l.up)("q-pagination"),r=(0,l.up)("q-select"),d=(0,l.up)("q-toolbar");return(0,l.wg)(),(0,l.j4)(d,{class:"bg-grey-2"},{default:(0,l.w5)((()=>[(0,l.Wm)(o),(0,l._)("div",ue,[(0,l._)("div",me,[(0,l.Wm)(n,{modelValue:(0,s.SU)(t).pagination.page,"onUpdate:modelValue":i[0]||(i[0]=e=>(0,s.SU)(t).pagination.page=e),max:(0,s.SU)(a),"max-pages":5,"direction-links":"","boundary-links":"","boundary-numbers":"",color:"black"},null,8,["modelValue","max"])]),(0,l._)("div",ce,[(0,l.Wm)(r,{modelValue:(0,s.SU)(t).pagination.rowsPerPage,"onUpdate:modelValue":i[1]||(i[1]=e=>(0,s.SU)(t).pagination.rowsPerPage=e),options:(0,s.SU)(t).pagination.rowsPerPageOptions,dense:"",outlined:""},null,8,["modelValue","options"])])])])),_:1})}}});var _e=a(136),ge=a(996);const we=he,fe=we;y()(he,"components",{QToolbar:ie.Z,QSpace:_e.Z,QPagination:ge.Z,QSelect:B.Z});const be={inheritAttrs:!1},ve=Object.assign(be,{__name:"uf-view-layout",setup(e){const t=(0,l.l1)().use,a=(0,l.Fl)((()=>{let e="0 px";return t.ql.hasOwnProperty("header")&&(e=t.ql.header.size+"px"),e}));return(e,i)=>{const o=(0,l.up)("q-header"),n=(0,l.up)("q-footer"),r=(0,l.up)("q-layout");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(S,{use:(0,s.SU)(t)},null,8,["use"]),(0,l.Wm)(r,{container:"",style:{height:"calc(100vh - 102px)"}},{default:(0,l.w5)((()=>[(0,l.Wm)(p.Z,{use:(0,s.SU)(t)},null,8,["use"]),(0,l.Wm)(o,{reveal:"",class:"bg-white"},{default:(0,l.w5)((()=>[(0,l.Wm)(de,{use:(0,s.SU)(t)},null,8,["use"])])),_:1}),(0,l._)("div",{class:"view-content",style:(0,c.j5)({"padding-top":(0,s.SU)(a)})},[(0,l.WI)(e.$slots,"view-content")],4),(0,l.Wm)(n,{reveal:""},{default:(0,l.w5)((()=>[(0,l.Wm)(fe,{use:(0,s.SU)(t)},null,8,["use"])])),_:1})])),_:3})],64)}}});var Ue=a(7605),ye=a(6602),ke=a(1378);const Se=ve,qe=Se;y()(ve,"components",{QLayout:Ue.Z,QHeader:ye.Z,QFooter:ke.Z});const De={inheritAttrs:!1},Ve=Object.assign(De,{__name:"uf-view-table",setup(e){const t=(0,l.l1)().use;t.data.items_mode=!0;const a=(0,l.Fl)((()=>{let e=16,a="0 px";return e+=t.app.ql.header.size,e+=t.app.ql.footer.size,e+=t.ql.header.size,e+=t.ql.footer.size,a="calc(100vh - "+e+"px)",a}));return(e,i)=>{const o=(0,l.up)("q-item-section"),n=(0,l.up)("q-item"),r=(0,l.up)("q-list"),d=(0,l.up)("q-menu"),u=(0,l.up)("q-btn"),m=(0,l.up)("q-td"),p=(0,l.up)("q-table");return(0,l.wg)(),(0,l.j4)(p,{columns:(0,s.SU)(t).column_s,filter:(0,s.SU)(t).data.search,rows:(0,s.SU)(t).data.item_s,style:(0,c.j5)({height:(0,s.SU)(a)}),class:"sticky-header-table",dense:"",flat:"","hide-bottom":"","row-key":"id",selection:"multiple",pagination:(0,s.SU)(t).pagination,"onUpdate:pagination":i[0]||(i[0]=e=>(0,s.SU)(t).pagination=e),selected:(0,s.SU)(t).data.select_s,"onUpdate:selected":i[1]||(i[1]=e=>(0,s.SU)(t).data.select_s=e),onRowClick:i[2]||(i[2]=(e,a,l)=>{(0,s.SU)(t).onItemClick(e,a,l)})},{"body-cell-gotos":(0,l.w5)((e=>[(0,l.Wm)(m,{props:e},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{dense:"",round:"",flat:"",icon:"mdi-link"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{"auto-close":""},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{style:{"min-width":"100px"}},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,s.SU)(t).rel_view_s,(t=>((0,l.wg)(),(0,l.j4)(n,{dense:"",key:t.id,to:"/"+t.parent_id+"/"+t.id+"?"+t.rel_field_name+"__eq="+e.row.id},{default:(0,l.w5)((()=>[(0,l.Wm)(o,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,c.zw)("view "+t.title+" from "+e.row.title),1)])),_:2},1024)])),_:2},1032,["to"])))),128))])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["props"])])),"body-cell-actions":(0,l.w5)((e=>[(0,l.Wm)(m,{props:e},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{dense:"",round:"",flat:"",icon:"mdi-dots-vertical",onClick:a=>{(0,s.SU)(t).onItemMenuClick(a,e.row)}},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["columns","filter","rows","style","pagination","selected"])}}});var We=a(7580),je=a(7220);const xe=Ve,Ze=xe;y()(Ve,"components",{QTable:We.Z,QTd:je.Z,QBtn:Z.Z,QMenu:g.Z,QList:w.Z,QItem:f.Z,QItemSection:b.Z});const Fe={__name:"uf-view",props:{id:{}},setup(e){const t=e,a=(0,s.qj)(new u(t.id));for(const l of a.action_s)new m(l.id);return(0,l.bv)((()=>{a.data.setItems();for(const e of a.dialog_s)if("empty"==e.activator||"first"==e.activator||"last"==e.activator){a.app.router.push({name:"dialog",params:{dialog_id:e.id,item_id:e.activator},query:a.app.route.query});break}})),(e,t)=>((0,l.wg)(),(0,l.j4)(qe,{use:a},{"view-content":(0,l.w5)((()=>["table"==a.type?((0,l.wg)(),(0,l.j4)(Ze,{key:0,use:a},null,8,["use"])):(0,l.kq)("",!0)])),_:1},8,["use"]))}},Qe=Fe,Ce=Qe;class Me extends i.y{constructor(e){super(e),this.ql={},this.main=this.getMain(),this.show=!1,this.sum_widget_s=this.getSumWidgets(),this.closeable=this.getCloseable(),this.submitable=this.getSubmitable(),this.normalizeWidgets()}getMain(){let e=!1;return this.decore.meta[this.parent_id].class.includes("Decore_view")&&(e=!0),e}getSumWidgets(){let e=[];return this.widget_s.forEach((t=>{e.push(t),t.widget_s.forEach((t=>{e.push(t)}))})),e}normalizeWidgets(){for(const e of this.sum_widget_s)e.parent_id=this.id}getCloseable(){let e=!1;return"empty"!=this.activator&&"first"!=this.activator&&"last"!=this.activator&&(e=!0),e}getSubmitable(){let e=!1;return this.sum_widget_s.forEach((t=>{t.action_s.forEach((t=>{"submit"==t.type&&(e=!0)}))})),e}async showDialog(){this.main,this.widget_s.forEach((e=>{this.ref[e.id].initWidget(),e.widget_s.forEach((e=>{this.ref[e.id].initWidget()}))})),this.show=!0}async submitWidgets(){let e=!0;for(const t of this.widget_s){await this.ref[t.id].submit(),e=1==e&&1==this.ref[t.id].valid;for(const a of t.widget_s)await this.ref[a.id].submit(),e=1==e&&1==this.ref[t.id].valid}e&&this.closeDialog()}closeDialog(){this.closeable&&(1==this.main?this.app.router.push({name:"view",params:{base_id:this.app.route.params.base_id,view_id:this.app.route.params.view_id},query:this.app.route.query}):this.app.router.push({name:"dialog",params:{dialog_id:this.app.route.params.dialog_id,item_id:this.app.route.params.item_id},query:this.app.route.query}))}hideDialog(){this.show=!1}}const Ie={class:"dialog-content"},Ee={inheritAttrs:!1},Ye=Object.assign(Ee,{__name:"uf-dialog-layout",setup(e){const t=(0,l.l1)().use,a=(0,l.Fl)((()=>{let e="none";return 1==t.show&&(e="block"),e}));(0,l.Fl)((()=>{let e="sub-dialog";return t.ref[t.parent_id].class.includes("view")&&(e="main-dialog"),e}));return(e,i)=>{const o=(0,l.up)("q-toolbar-title"),n=(0,l.up)("q-space"),r=(0,l.up)("q-btn"),d=(0,l.up)("q-toolbar"),u=(0,l.up)("q-header"),m=(0,l.up)("q-footer"),h=(0,l.up)("q-layout");return(0,l.wg)(),(0,l.iD)("div",{style:(0,c.j5)({display:(0,s.SU)(a)})},[(0,l.Wm)(h,{container:"",style:{height:"calc(100vh - 102px)"}},{default:(0,l.w5)((()=>[(0,l.Wm)(p.Z,{use:(0,s.SU)(t)},null,8,["use"]),(0,l.Wm)(u,{reveal:""},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{class:"bg-grey-2"},{default:(0,l.w5)((()=>[(0,l.Wm)(o,{class:"text-black"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,c.zw)((0,s.SU)(t).title),1)])),_:1}),(0,l.Wm)(n),(0,s.SU)(t).closeable?((0,l.wg)(),(0,l.j4)(r,{key:0,class:"text-black",round:"",flat:"",dense:"",onClick:i[0]||(i[0]=e=>(0,s.SU)(t).closeDialog()),icon:"close"})):(0,l.kq)("",!0)])),_:1})])),_:1}),(0,l._)("div",Ie,[(0,l.WI)(e.$slots,"dialog-content")]),(0,l.Wm)(m,{reveal:""},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{class:"bg-grey-2"},{default:(0,l.w5)((()=>[(0,s.SU)(t).submitable?((0,l.wg)(),(0,l.j4)(r,{key:0,class:"text-black",label:"Submit",flat:"",onClick:i[1]||(i[1]=e=>(0,s.SU)(t).submitWidgets())})):(0,l.kq)("",!0),(0,s.SU)(t).closeable?((0,l.wg)(),(0,l.j4)(r,{key:1,class:"text-black",label:"Close",flat:"",onClick:i[2]||(i[2]=e=>(0,s.SU)(t).closeDialog())})):(0,l.kq)("",!0)])),_:1})])),_:1})])),_:3})],4)}}});var He=a(1973);const ze=Ye,Ke=ze;y()(Ye,"components",{QLayout:Ue.Z,QHeader:ye.Z,QToolbar:ie.Z,QToolbarTitle:He.Z,QSpace:_e.Z,QBtn:Z.Z,QFooter:ke.Z});const Oe={inheritAttrs:!1},Pe=Object.assign(Oe,{__name:"uf-dialog-display",setup(e){const t=(0,l.l1)().use;var a=.5;const i=(0,l.Fl)((()=>{let e=0;return t.main||(e=t.app.ql.totalWidth+10),e})),o=(0,l.Fl)((()=>{let e=t.app.ql.totalWidth-t.app.ql.left.offset-14;return e})),n=`\n  .q-drawer {\n    top: ${t.app.ql.header.size}px;\n    bottom: ${t.app.ql.footer.size}px;\n  }\n`,r=document.createElement("style");return r.textContent=n,document.head.appendChild(r),(e,n)=>{const r=(0,l.up)("q-drawer");return"drawer"==(0,s.SU)(t).display?((0,l.wg)(),(0,l.j4)(r,{key:0,modelValue:(0,s.SU)(t).show,"onUpdate:modelValue":n[0]||(n[0]=e=>(0,s.SU)(t).show=e),bordered:"",overlay:"",persistent:"",side:"right",breakpoint:(0,s.SU)(i),width:(0,s.SU)(o)*(0,s.SU)(a)},{default:(0,l.w5)((()=>[(0,l.Wm)(Ke,{use:(0,s.SU)(t)},{"dialog-content":(0,l.w5)((()=>[(0,l.WI)(e.$slots,"dialog-content")])),_:3},8,["use"])])),_:3},8,["modelValue","breakpoint","width"])):(0,l.kq)("",!0)}}});var Ae=a(906);const Te=Pe,Be=Te;y()(Pe,"components",{QDrawer:Ae.Z});class Re extends i.y{constructor(e){super(e),this.data=(0,s.qj)(new n(this.app.route,this.decore.source[this.source_id],this.decore.source[this.getParentView(this).source_id],this.active_s,{})),this.form_ref=void 0,this.composer_ref=void 0,this.valid=!0}getParentView(e){return e.class.includes("Decore_view")?e:this.getParentView(this.decore.meta[e.parent_id])}initWidget(){this.data.setItem()}async submit(){for(const e of this.action_s)if("submit"==e.type){let t=await this.ref[e.id].trigger();this.data.setErrors(t.errors),this.valid=!(Object.keys(t.errors).length>0)}}getErrorMessage(e){let t="";for(const a of this.data.errors[e])t+=" & "+a;return t}}const Le={key:0},$e={key:1},Ne={key:2},Ge={key:3},Je={key:4},Xe={key:5},et={inheritAttrs:!1},tt=Object.assign(et,{__name:"uf-widget-composer",setup(e){const t=(0,l.l1)().use;return(e,a)=>{const i=(0,l.up)("q-checkbox"),o=(0,l.up)("q-field"),n=(0,l.up)("q-form");return(0,l.wg)(),(0,l.j4)(n,{greedy:"",ref:e=>{(0,s.SU)(t).refComposer(e)}},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,s.SU)(t).compose_store.el,(e=>((0,l.wg)(),(0,l.iD)("span",{key:e.id},["p"==e.type?((0,l.wg)(),(0,l.iD)("p",Le,(0,c.zw)((0,s.SU)(t).item[e.id]),1)):(0,l.kq)("",!0),"h1"==e.type?((0,l.wg)(),(0,l.iD)("h1",$e,(0,c.zw)((0,s.SU)(t).item[e.id]),1)):(0,l.kq)("",!0),"h2"==e.type?((0,l.wg)(),(0,l.iD)("h2",Ne,(0,c.zw)((0,s.SU)(t).item[e.id]),1)):(0,l.kq)("",!0),"h3"==e.type?((0,l.wg)(),(0,l.iD)("h3",Ge,(0,c.zw)((0,s.SU)(t).item[e.id]),1)):(0,l.kq)("",!0),"h4"==e.type?((0,l.wg)(),(0,l.iD)("h4",Je,(0,c.zw)((0,s.SU)(t).item[e.id]),1)):(0,l.kq)("",!0),"h5"==e.type?((0,l.wg)(),(0,l.iD)("h5",Xe,(0,c.zw)((0,s.SU)(t).item[e.id]),1)):(0,l.kq)("",!0),"checkbox"==e.type?((0,l.wg)(),(0,l.j4)(o,{key:6,"hide-bottom-space":"",dense:"",borderless:"",modelValue:(0,s.SU)(t).item[e.id],"onUpdate:modelValue":a=>(0,s.SU)(t).item[e.id]=a,rules:(0,s.SU)(t).getRules(e.id),"lazy-rules":"ondemand"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{modelValue:(0,s.SU)(t).item[e.id],"onUpdate:modelValue":[a=>(0,s.SU)(t).item[e.id]=a,a=>(0,s.SU)(t).compose_store.sendElement(e.id,"update",(0,s.SU)(t).item[e.id],(0,s.SU)(t).compose_store.el)],label:e.title,disable:e.disable},null,8,["modelValue","onUpdate:modelValue","label","disable"])])),_:2},1032,["modelValue","onUpdate:modelValue","rules"])):(0,l.kq)("",!0)])))),128))])),_:1},512)}}});var at=a(8326),lt=a(8149),st=a(1221);const it=tt,ot=it;y()(tt,"components",{QForm:at.Z,QField:lt.Z,QCheckbox:st.Z});const nt={key:0},rt={key:1},dt={key:2},ut={inheritAttrs:!1},mt=Object.assign(ut,{__name:"uf-widget-layout",setup(e){const t=(0,l.l1)().use;return(e,a)=>{const i=(0,l.up)("q-space"),o=(0,l.up)("q-icon"),n=(0,l.up)("q-toolbar"),r=(0,l.up)("q-card-section"),d=(0,l.up)("q-btn"),u=(0,l.up)("q-card-actions"),m=(0,l.up)("q-separator"),p=(0,l.up)("q-card");return(0,l.wg)(),(0,l.j4)(p,{class:"widget-card",flat:""},{default:(0,l.w5)((()=>[(0,l.Wm)(n,{class:"widget-card-toolbar"},{default:(0,l.w5)((()=>[(0,l._)("h5",null,(0,c.zw)((0,s.SU)(t).title),1),(0,l.Wm)(i),(0,l.Wm)(o,{name:(0,s.SU)(t).icon},null,8,["name"])])),_:1}),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,s.SU)(t).layout,(a=>((0,l.wg)(),(0,l.iD)("span",{key:a},["c"==a?((0,l.wg)(),(0,l.iD)("span",nt,[(0,l.Wm)(r,{class:"widget-card-section"},{default:(0,l.w5)((()=>[(0,l.WI)(e.$slots,"widget-content")])),_:3})])):(0,l.kq)("",!0),"e"==a&&(0,s.SU)(t).element_s.length>=1?((0,l.wg)(),(0,l.iD)("span",rt,[(0,l.Wm)(r,{class:"widget-card-section"},{default:(0,l.w5)((()=>[(0,l.Wm)(ot,{use:(0,s.SU)(t)},null,8,["use"])])),_:1})])):(0,l.kq)("",!0),"a"==a?((0,l.wg)(),(0,l.iD)("span",dt,[(0,l.Wm)(u,null,{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,s.SU)(t).dialog_s,(e=>((0,l.wg)(),(0,l.iD)("span",{key:e.id},["default"==e.activator?((0,l.wg)(),(0,l.j4)(d,{key:0,onClick:a=>(0,s.SU)(t).app.router.push({name:"subdialog",params:{subdialog_id:e.id,subitem_id:e.activator},query:(0,s.SU)(t).app.route.query}),icon:e.icon,dense:"",flat:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,c.zw)(e.title)+"...",1)])),_:2},1032,["onClick","icon"])):(0,l.kq)("",!0)])))),128)),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,s.SU)(t).action_s,(e=>((0,l.wg)(),(0,l.iD)("span",{key:e.id},["default"==e.activator?((0,l.wg)(),(0,l.j4)(d,{key:0,onClick:a=>(0,s.SU)(t).ref[e.id].trigger(),icon:e.icon,dense:"",flat:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,c.zw)(e.title),1)])),_:2},1032,["onClick","icon"])):(0,l.kq)("",!0)])))),128))])),_:1})])):(0,l.kq)("",!0)])))),128)),(0,l.Wm)(m)])),_:3})}}});var ct=a(4458),pt=a(3190),ht=a(1821),_t=a(926);const gt=mt,wt=gt;y()(mt,"components",{QCard:ct.Z,QToolbar:ie.Z,QSpace:_e.Z,QIcon:v.Z,QCardSection:pt.Z,QCardActions:ht.Z,QBtn:Z.Z,QSeparator:_t.Z});const ft={inheritAttrs:!1},bt=Object.assign(ft,{__name:"uf-widget-default",setup(e){(0,l.l1)().use;return(e,t)=>((0,l.wg)(),(0,l.iD)("span"))}}),vt=bt,Ut=vt,yt={key:0,class:"q-pb-sm"},kt={class:"q-field__bottom"},St={key:1,class:"q-pb-sm"},qt={key:2,class:"q-pb-sm"},Dt={key:3,class:"q-pb-sm"},Vt={class:"q-gutter-xs row items-start"},Wt={key:4,class:"q-pb-sm"},jt={key:5,class:"q-pb-sm"},xt={key:6,class:"q-pb-sm"},Zt={key:7,class:"q-pb-sm"},Ft={key:8,class:"q-pb-sm"},Qt={key:9,class:"q-pb-sm"},Ct={key:10,class:"q-pb-sm"},Mt={key:11,class:"text-negative"},It=(0,l._)("br",null,null,-1),Et=(0,l._)("br",null,null,-1),Yt={inheritAttrs:!1},Ht=Object.assign(Yt,{__name:"uf-widget-form",setup(e){const t=(0,l.l1)().use;return t.data.rel_items_mode=!0,(e,a)=>{const i=(0,l.up)("q-toggle"),o=(0,l.up)("q-input"),n=(0,l.up)("q-select"),r=(0,l.up)("q-date"),d=(0,l.up)("q-popup-proxy"),u=(0,l.up)("q-time"),m=(0,l.up)("q-form");return(0,l.wg)(),(0,l.j4)(m,{greedy:""},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,s.SU)(t).active_s,(e=>((0,l.wg)(),(0,l.iD)("span",{key:e.id},[e.class.includes("BooleanField")?((0,l.wg)(),(0,l.iD)("div",yt,[(0,l.Wm)(i,{modelValue:(0,s.SU)(t).data.item[e.name],"onUpdate:modelValue":a=>(0,s.SU)(t).data.item[e.name]=a,label:e.verbose_name},null,8,["modelValue","onUpdate:modelValue","label"]),(0,l._)("div",kt,(0,c.zw)(e.help_text),1)])):e.class.includes("CharField")?((0,l.wg)(),(0,l.iD)("div",St,[e.choices?((0,l.wg)(),(0,l.j4)(n,{key:1,dense:"",outlined:"","hide-bottom-space":"",modelValue:(0,s.SU)(t).data.item[e.name],"onUpdate:modelValue":a=>(0,s.SU)(t).data.item[e.name]=a,label:e.verbose_name,hint:e.help_text,"option-value":"value","option-label":"label",options:Object.entries(e.choices).map((([e,t])=>({label:e,value:t}))),"emit-value":"","map-options":""},null,8,["modelValue","onUpdate:modelValue","label","hint","options"])):((0,l.wg)(),(0,l.j4)(o,{key:0,dense:"",outlined:"","hide-bottom-space":"",modelValue:(0,s.SU)(t).data.item[e.name],"onUpdate:modelValue":a=>(0,s.SU)(t).data.item[e.name]=a,label:e.verbose_name,hint:e.help_text,error:(0,s.SU)(t).data.errors[e.name].length>0,"error-message":(0,s.SU)(t).getErrorMessage(e.name)},null,8,["modelValue","onUpdate:modelValue","label","hint","error","error-message"]))])):e.class.includes("DateField")?((0,l.wg)(),(0,l.iD)("div",qt,[(0,l.Wm)(o,{dense:"",outlined:"","hide-bottom-space":"",modelValue:(0,s.SU)(t).data.item[e.name],"onUpdate:modelValue":a=>(0,s.SU)(t).data.item[e.name]=a,mask:"####-##-##",label:e.verbose_name,hint:e.help_text,error:(0,s.SU)(t).data.errors[e.name].length>0,"error-message":(0,s.SU)(t).getErrorMessage(e.name)},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{"transition-show":"scale","transition-hide":"scale"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{modelValue:(0,s.SU)(t).data.item[e.name],"onUpdate:modelValue":a=>(0,s.SU)(t).data.item[e.name]=a,mask:"YYYY-MM-DD",color:"black"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1032,["modelValue","onUpdate:modelValue","label","hint","error","error-message"])])):e.class.includes("DateTimeField")?((0,l.wg)(),(0,l.iD)("div",Dt,[(0,l.Wm)(o,{dense:"",outlined:"","hide-bottom-space":"",modelValue:(0,s.SU)(t).data.item[e.name],"onUpdate:modelValue":a=>(0,s.SU)(t).data.item[e.name]=a,mask:"####-##-## ##:##",label:e.verbose_name,hint:e.help_text,error:(0,s.SU)(t).data.errors[e.name].length>0,"error-message":(0,s.SU)(t).getErrorMessage(e.name)},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{"transition-show":"scale","transition-hide":"scale"},{default:(0,l.w5)((()=>[(0,l._)("div",Vt,[(0,l.Wm)(r,{modelValue:(0,s.SU)(t).data.item[e.name],"onUpdate:modelValue":a=>(0,s.SU)(t).data.item[e.name]=a,mask:"YYYY-MM-DD HH:mm",color:"black"},null,8,["modelValue","onUpdate:modelValue"]),(0,l.Wm)(u,{modelValue:(0,s.SU)(t).data.item[e.name],"onUpdate:modelValue":a=>(0,s.SU)(t).data.item[e.name]=a,format24h:"",mask:"YYYY-MM-DD HH:mm",color:"black"},null,8,["modelValue","onUpdate:modelValue"])])])),_:2},1024)])),_:2},1032,["modelValue","onUpdate:modelValue","label","hint","error","error-message"])])):e.class.includes("TextField")?((0,l.wg)(),(0,l.iD)("div",Wt,[(0,l.Wm)(o,{dense:"",outlined:"","hide-bottom-space":"",modelValue:(0,s.SU)(t).data.item[e.name],"onUpdate:modelValue":a=>(0,s.SU)(t).data.item[e.name]=a,label:e.verbose_name,hint:e.help_text,error:(0,s.SU)(t).data.errors[e.name].length>0,"error-message":(0,s.SU)(t).getErrorMessage(e.name),autogrow:""},null,8,["modelValue","onUpdate:modelValue","label","hint","error","error-message"])])):e.class.includes("FloatField")?((0,l.wg)(),(0,l.iD)("div",jt,[(0,l.Wm)(o,{type:"number",dense:"",outlined:"","hide-bottom-space":"",modelValue:(0,s.SU)(t).data.item[e.name],"onUpdate:modelValue":a=>(0,s.SU)(t).data.item[e.name]=a,modelModifiers:{number:!0},label:e.verbose_name,hint:e.help_text,error:(0,s.SU)(t).data.errors[e.name].length>0,"error-message":(0,s.SU)(t).getErrorMessage(e.name)},null,8,["modelValue","onUpdate:modelValue","label","hint","error","error-message"])])):e.class.includes("IntegerField")?((0,l.wg)(),(0,l.iD)("div",xt,[e.choices?((0,l.wg)(),(0,l.j4)(n,{key:1,dense:"",outlined:"","hide-bottom-space":"",modelValue:(0,s.SU)(t).data.item[e.name],"onUpdate:modelValue":a=>(0,s.SU)(t).data.item[e.name]=a,modelModifiers:{number:!0},label:e.verbose_name,hint:e.help_text,"option-value":"value","option-label":"label",options:Object.entries(e.choices).map((([e,t])=>({label:e,value:t}))),"emit-value":"","map-options":""},null,8,["modelValue","onUpdate:modelValue","label","hint","options"])):((0,l.wg)(),(0,l.j4)(o,{key:0,type:"number",dense:"",outlined:"","hide-bottom-space":"",modelValue:(0,s.SU)(t).data.item[e.name],"onUpdate:modelValue":a=>(0,s.SU)(t).data.item[e.name]=a,modelModifiers:{number:!0},label:e.verbose_name,hint:e.help_text,error:(0,s.SU)(t).data.errors[e.name].length>0,"error-message":(0,s.SU)(t).getErrorMessage(e.name)},null,8,["modelValue","onUpdate:modelValue","label","hint","error","error-message"]))])):e.class.includes("PasswordField")?((0,l.wg)(),(0,l.iD)("div",Zt,[(0,l.Wm)(o,{type:"password",dense:"",outlined:"","hide-bottom-space":"",modelValue:(0,s.SU)(t).data.item[e.name],"onUpdate:modelValue":a=>(0,s.SU)(t).data.item[e.name]=a,label:e.verbose_name,hint:e.help_text,error:(0,s.SU)(t).data.errors[e.name].length>0,"error-message":(0,s.SU)(t).getErrorMessage(e.name)},null,8,["modelValue","onUpdate:modelValue","label","hint","error","error-message"])])):e.class.includes("ForeignKeyField")?((0,l.wg)(),(0,l.iD)("div",Ft,[(0,l.Wm)(n,{dense:"",outlined:"",modelValue:(0,s.SU)(t).data.item[e.name],"onUpdate:modelValue":a=>(0,s.SU)(t).data.item[e.name]=a,"options-dense":"",label:e.verbose_name,hint:e.help_text,"option-value":"id","option-label":"title",options:(0,s.SU)(t).data.rel_item_s[e.name],error:(0,s.SU)(t).data.errors[e.name].length>0,"error-message":(0,s.SU)(t).getErrorMessage(e.name)},null,8,["modelValue","onUpdate:modelValue","label","hint","options","error","error-message"])])):e.class.includes("BackrefAccessor")?((0,l.wg)(),(0,l.iD)("div",Qt,[(0,l.Wm)(n,{dense:"",outlined:"",modelValue:(0,s.SU)(t).data.item[e.name],"onUpdate:modelValue":a=>(0,s.SU)(t).data.item[e.name]=a,multiple:"","options-dense":"",label:e.verbose_name,hint:e.help_text,"option-value":"id","option-label":"title",options:(0,s.SU)(t).data.rel_item_s[e.name]},null,8,["modelValue","onUpdate:modelValue","label","hint","options"])])):e.class.includes("ManyToManyField")?((0,l.wg)(),(0,l.iD)("div",Ct,[(0,l.Wm)(n,{dense:"",outlined:"",modelValue:(0,s.SU)(t).data.item[e.name],"onUpdate:modelValue":a=>(0,s.SU)(t).data.item[e.name]=a,multiple:"","options-dense":"",label:e.verbose_name,hint:e.help_text,"option-value":"id","option-label":"title",options:(0,s.SU)(t).data.rel_item_s[e.name]},null,8,["modelValue","onUpdate:modelValue","label","hint","options"])])):((0,l.wg)(),(0,l.iD)("div",Mt,[(0,l.Uk)((0,c.zw)(e.class)+" is momentarily not implemented.",1),It,Et]))])))),128))])),_:1})}}});var zt=a(3175),Kt=a(2765),Ot=a(2952),Pt=a(6770);const At=Ht,Tt=At;y()(Ht,"components",{QForm:at.Z,QToggle:zt.Z,QField:lt.Z,QInput:oe.Z,QSelect:B.Z,QPopupProxy:Kt.Z,QDate:Ot.Z,QTime:Pt.Z});const Bt={class:"row"},Rt={class:"row"},Lt={key:0,class:"col-auto text-body"},$t={key:1,class:"col-auto text-body"},Nt={class:"col-auto"},Gt={inheritAttrs:!1},Jt=Object.assign(Gt,{__name:"uf-widget-info",setup(e){const t=(0,l.l1)().use;return(e,a)=>{const i=(0,l.up)("q-btn");return(0,l.wg)(),(0,l.iD)("div",Bt,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,s.SU)(t).active_s,(e=>((0,l.wg)(),(0,l.iD)("div",{class:"widget-info-col col-lg-3 col-md-6 col-sm-12",key:e.id},[(0,l._)("h6",null,(0,c.zw)(e.verbose_name),1),(0,l._)("div",Rt,[(0,s.SU)(t).data.item[e.column_name]?((0,l.wg)(),(0,l.iD)("div",Lt,(0,c.zw)((0,s.SU)(t).data.item[e.column_name]),1)):((0,l.wg)(),(0,l.iD)("div",$t,"null "+(0,c.zw)(e.verbose_name),1)),(0,l._)("div",Nt,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,s.SU)(t).dialog_s,(a=>((0,l.wg)(),(0,l.iD)("span",{key:a.id},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.widget_s,(o=>((0,l.wg)(),(0,l.iD)("span",{key:o.key},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(o.active_s,(o=>((0,l.wg)(),(0,l.iD)("span",{key:o.name},["context"==a.activator&&e.column_name==o.column_name?((0,l.wg)(),(0,l.j4)(i,{key:0,class:"widget-info-col-btn",round:"",dense:"",flat:"",size:"xs",icon:a.icon,onClick:e=>(0,s.SU)(t).app.router.push({name:"subdialog",params:{subdialog_id:a.id,subitem_id:(0,s.SU)(t).data.item.id},query:(0,s.SU)(t).app.route.query})},null,8,["icon","onClick"])):(0,l.kq)("",!0)])))),128))])))),128))])))),128))])])])))),128))])}}}),Xt=Jt,ea=Xt;y()(Jt,"components",{QBtn:Z.Z});const ta={inheritAttrs:!1},aa=Object.assign(ta,{__name:"uf-widget-table",setup(e){const t=(0,l.l1)().use;function a(){let e=[];return e.push({name:"gotos",label:"",field:"gotos"}),e.push({name:"actions",label:"",filed:"actions"}),t.active_s.forEach((t=>{var a={};a=t.class.includes("ForeignKeyField")?{name:t.column_name,label:t.verbose_name,field:function(e){return e[t.name]?e[t.name]["title"]:null},sortable:!0}:{name:t.column_name,label:t.verbose_name,field:t.column_name,sortable:!0},e.push(a)})),e}return t.data.items_mode=!0,(e,i)=>{const o=(0,l.up)("q-table");return(0,l.wg)(),(0,l.j4)(o,{columns:a(),rows:(0,s.SU)(t).data.item_s,flat:""},null,8,["columns","rows"])}}}),la=aa,sa=la;y()(aa,"components",{QTable:We.Z});const ia={__name:"uf-widget",props:{id:{}},setup(e){const t=e,a=(0,s.qj)(new Re(t.id));a.data;for(const l of a.action_s)new m(l.id);return(e,t)=>((0,l.wg)(),(0,l.j4)(wt,{use:a},{"widget-content":(0,l.w5)((()=>["default"==a.type?((0,l.wg)(),(0,l.j4)(Ut,{key:0,use:a},null,8,["use"])):(0,l.kq)("",!0),"form"==a.type?((0,l.wg)(),(0,l.j4)(Tt,{key:1,use:a},null,8,["use"])):(0,l.kq)("",!0),"info"==a.type?((0,l.wg)(),(0,l.j4)(ea,{key:2,use:a},null,8,["use"])):(0,l.kq)("",!0),"table"==a.type?((0,l.wg)(),(0,l.j4)(sa,{key:3,use:a},null,8,["use"])):(0,l.kq)("",!0)])),_:1},8,["use"]))}},oa=ia,na=oa,ra={inheritAttrs:!1},da=Object.assign(ra,{__name:"uf-dialog-standard",setup(e){const t=(0,l.l1)().use;return(e,a)=>((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,s.SU)(t).sum_widget_s,(e=>((0,l.wg)(),(0,l.iD)("span",{key:e.id},[(0,l.Wm)(na,{id:e.id},null,8,["id"])])))),128))}}),ua=da,ma=ua,ca={__name:"uf-dialog",props:{id:{}},setup(e){const t=e,a=(0,s.qj)(new Me(t.id));return(e,t)=>((0,l.wg)(),(0,l.j4)(Be,{use:a},{"dialog-content":(0,l.w5)((()=>["standard"==a.type?((0,l.wg)(),(0,l.j4)(ma,{key:0,use:a},null,8,["use"])):(0,l.kq)("",!0)])),_:1},8,["use"]))}},pa=ca,ha=pa,_a={key:0},ga={__name:"uf-base",props:{base_id:{},view_id:{},dialog_id:{},item_id:{},subdialog_id:{},subitem_id:{}},setup(e){const t=e,a=(0,s.qj)(new o(t.base_id));return(0,l.bv)((()=>{"view"===a.app.route.name&&(a.app.expanded_nodes=[],a.app.expanded_nodes.push(a.app.route.params.base_id),a.app.expanded_nodes.push(a.app.route.params.view_id),a.hideDialogs()),"dialog"===a.app.route.name&&(a.app.expanded_nodes=[],a.app.expanded_nodes.push(a.app.route.params.base_id),a.app.expanded_nodes.push(a.app.route.params.view_id),a.showMainDialog(a.app.route.params.dialog_id)),"subdialog"===a.app.route.name&&(a.app.expanded_nodes=[],a.app.expanded_nodes.push(a.app.route.params.base_id),a.app.expanded_nodes.push(a.app.route.params.view_id),a.showMainDialog(a.app.route.params.dialog_id),a.showSubDialog(a.app.route.params.subdialog_id)),(0,l.YP)(a.app.route,(e=>{a.app.expanded_nodes.push(e.params.base_id),"view"===e.name&&a.hideDialogs(),"dialog"===e.name&&a.showMainDialog(e.params.dialog_id),"subdialog"===e.name&&a.showSubDialog(e.params.subdialog_id)}))})),(e,t)=>{const s=(0,l.up)("q-page");return(0,l.wg)(),(0,l.iD)(l.HY,null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.base_view_dialog_s,(e=>((0,l.wg)(),(0,l.j4)(ha,{key:e.id,id:e.id},null,8,["id"])))),128)),(0,l.Wm)(s,null,{default:(0,l.w5)((()=>[a.base_view?((0,l.wg)(),(0,l.iD)("span",_a,[(0,l.Wm)(Ce,{id:a.base_view.id},null,8,["id"])])):(0,l.kq)("",!0)])),_:1})],64)}}};var wa=a(9885);const fa=ga,ba=fa;y()(ga,"components",{QPage:wa.Z})}}]);
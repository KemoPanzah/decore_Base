(()=>{"use strict";var e={5410:(e,t,s)=>{var i=s(1957),a=s(3578),o=s(499),n=s(9835),l=s(5781),r=s(7690),d=s(8339),u=s(6970),c=s(6328);s(9665);const m={key:0,class:"row full-width"},h={key:0,class:"row full-width justify-center tree-mini-item-expand"},p={key:0},g={key:1},_={inheritAttrs:!1},w=Object.assign(_,{__name:"uf-app-navigation",setup(e){const t=(0,n.l1)().use,s=(0,o.iH)([]),a=(0,n.Fl)((()=>{let e=[];return t.base_s.forEach((s=>{if(!s.hide&&s.view_s.length>0&&"main-top"==s.navigation){let i={id:s.id,type:"base",title:s.title,icon:s.icon,selectable:!1,to:"",children:[]};s.view_s.forEach((e=>{if(!e.hide){let a={id:e.id,type:"view",title:e.title,icon:e.icon,to:"/"+s.id+"/"+e.id,children:[]};t.decore.queries.data.forEach((t=>{t.base_id==s.id&&t.view_id==e.id&&null==t.parent&&a.children.push(t)})),i.children.push(a)}})),e.push(i)}})),e}));function l(e){console.log()}return(e,r)=>{const d=(0,n.up)("q-icon"),c=(0,n.up)("q-item-section"),_=(0,n.up)("q-item"),w=(0,n.up)("q-chip"),f=(0,n.up)("q-tree");return(0,n.wg)(),(0,n.j4)(f,{nodes:a.value,"node-key":"id","label-key":"title",expanded:(0,o.SU)(t).expanded_nodes,"onUpdate:expanded":r[0]||(r[0]=e=>(0,o.SU)(t).expanded_nodes=e),selected:s.value,"onUpdate:selected":r[1]||(r[1]=e=>s.value=e),"no-connectors":"",accordion:""},{"default-header":(0,n.w5)((e=>["base"==e.node.type?((0,n.wg)(),(0,n.iD)("div",m,[(0,n.Wm)(_,{class:"tree-item-base full-width row",dense:"",onClick:t=>l(e.node.id)},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{class:"items-center",avatar:""},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{class:"tree-item-base-icon",name:e.node.icon},null,8,["name"])])),_:2},1024),(0,n.Wm)(c,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,u.zw)(e.node.title),1)])),_:2},1024),e.node.children.length>0?((0,n.wg)(),(0,n.j4)(c,{key:0,avatar:""},{default:(0,n.w5)((()=>[(0,o.SU)(t).expanded_nodes.includes(e.node.id)?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(d,{key:0,name:"mdi-chevron-down"})),(0,o.SU)(t).expanded_nodes.includes(e.node.id)?((0,n.wg)(),(0,n.j4)(d,{key:1,name:"mdi-chevron-up"})):(0,n.kq)("",!0)])),_:2},1024)):(0,n.kq)("",!0)])),_:2},1032,["onClick"]),(0,o.SU)(t).drawer_mini?((0,n.wg)(),(0,n.iD)("div",h,[(0,o.SU)(t).expanded_nodes.includes(e.node.id)?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(d,{key:0,name:"mdi-chevron-down"})),(0,o.SU)(t).expanded_nodes.includes(e.node.id)?((0,n.wg)(),(0,n.j4)(d,{key:1,name:"mdi-chevron-up"})):(0,n.kq)("",!0)])):(0,n.kq)("",!0)])):(0,n.kq)("",!0),"view"==e.node.type?((0,n.wg)(),(0,n.j4)(_,{key:1,class:"tree-item-view full-width row",dense:"",exact:"",to:e.node.to},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{class:"items-center",avatar:""},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{class:"tree-item-view-icon",name:e.node.icon},null,8,["name"])])),_:2},1024),(0,n.Wm)(c,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,u.zw)(e.node.title),1)])),_:2},1024),e.node.children.length>0?((0,n.wg)(),(0,n.j4)(c,{key:0,avatar:""},{default:(0,n.w5)((()=>[(0,o.SU)(t).expanded_nodes.includes(e.node.id)?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(d,{key:0,name:"mdi-chevron-down",onClick:(0,i.iM)((s=>(0,o.SU)(t).expanded_nodes.push(e.node.id)),["prevent"])},null,8,["onClick"])),(0,o.SU)(t).expanded_nodes.includes(e.node.id)?((0,n.wg)(),(0,n.j4)(d,{key:1,name:"mdi-chevron-up",onClick:(0,i.iM)((s=>(0,o.SU)(t).expanded_nodes.pop(e.node.id)),["prevent"])},null,8,["onClick"])):(0,n.kq)("",!0)])),_:2},1024)):(0,n.kq)("",!0)])),_:2},1032,["to"])):(0,n.kq)("",!0),"user"!=e.node.type||(0,o.SU)(t).drawer_mini?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(_,{key:2,class:"tree-item-query full-width row",dense:"",exact:"",to:JSON.parse(e.node.to)},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{class:"items-center",avatar:""}),(0,n.Wm)(c,null,{default:(0,n.w5)((()=>[(0,n.Wm)(w,{class:"tree-item-query-chip",style:(0,u.j5)({"padding-left":16*e.node.depth+"px"}),outline:"",label:e.node.title,title:e.node.title},null,8,["style","label","title"])])),_:2},1024),(0,n.Wm)(c,{avatar:""},{default:(0,n.w5)((()=>[e.node.children.length>0?((0,n.wg)(),(0,n.iD)("div",p,[(0,o.SU)(t).expanded_nodes.includes(e.node.id)?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(d,{key:0,name:"mdi-chevron-down",onClick:s=>(0,o.SU)(t).expanded_nodes.push(e.node.id)},null,8,["onClick"])),(0,o.SU)(t).expanded_nodes.includes(e.node.id)?((0,n.wg)(),(0,n.j4)(d,{key:1,name:"mdi-chevron-up",onClick:s=>(0,o.SU)(t).expanded_nodes.pop(e.node.id)},null,8,["onClick"])):(0,n.kq)("",!0)])):((0,n.wg)(),(0,n.iD)("div",g,[0==e.node.children.length?((0,n.wg)(),(0,n.j4)(d,{key:0,class:"tree-item-query-icon",dense:"",round:"",flat:"",name:"mdi-delete",onClick:(0,i.iM)((s=>(0,o.SU)(t).decore.queries.removeQuery(e.node.id)),["prevent"])},null,8,["onClick"])):(0,n.kq)("",!0)]))])),_:2},1024)])),_:2},1032,["to"]))])),_:1},8,["nodes","expanded","selected"])}}});var f=s(1893),b=s(8879),v=s(490),y=s(1233),k=s(2857),U=s(7691),S=s(9984),q=s.n(S);const D=w,j=D;q()(w,"components",{QTree:f.Z,QBtn:b.Z,QItem:v.Z,QItemSection:y.Z,QIcon:k.Z,QChip:U.Z});const x={key:0,style:{width:"300px"}},V={class:"row justify-end items-center"},W={class:"col-auto"},C={key:0,class:"entry-text"},Q={key:1,class:"entry-text"},Z={class:"col-auto"},E={inheritAttrs:!1},F=Object.assign(E,{__name:"uf-app-actor",setup(e){const t=(0,n.l1)().use,s=(0,n.Fl)((()=>{let e=null;return t.decore.actor.active_s.length>0?e=t.decore.actor.active_s[t.decore.actor.active_s.length-1]:t.decore.actor.item_s.length>0&&(e=t.decore.actor.item_s[t.decore.actor.item_s.length-1]),e}));return(e,i)=>{const a=(0,n.up)("q-circular-progress"),l=(0,n.up)("q-icon"),r=(0,n.up)("q-badge"),d=(0,n.up)("q-btn");return(0,n.wg)(),(0,n.iD)(n.HY,null,[s.value?((0,n.wg)(),(0,n.iD)("div",x,[(0,n._)("div",V,[(0,n._)("div",W,[s.value.result?((0,n.wg)(),(0,n.iD)("div",Q,(0,u.zw)(s.value.result),1)):((0,n.wg)(),(0,n.iD)("div",C,(0,u.zw)(s.value.title),1))]),(0,n._)("div",Z,[!s.value.finished&&s.value.progress>0?((0,n.wg)(),(0,n.j4)(a,{key:0,thickness:.25,value:s.value.progress,size:"21px"},null,8,["value"])):s.value.finished||0!==s.value.progress?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(a,{key:1,indeterminate:"",thickness:.25,size:"21px"})),s.value.finished&&s.value.success?((0,n.wg)(),(0,n.j4)(l,{key:2,size:"21px",name:"mdi-check-circle",color:"info"})):s.value.finished&&!s.value.success?((0,n.wg)(),(0,n.j4)(l,{key:3,size:"21px",name:"mdi-alert-circle",color:"warning"})):(0,n.kq)("",!0)])])])):(0,n.kq)("",!0),(0,n.Wm)(d,{dense:"",flat:"",round:"",icon:"mdi-menu-open"},{default:(0,n.w5)((()=>[(0,o.SU)(t).decore.actor.active_s.length>1?((0,n.wg)(),(0,n.j4)(r,{key:0,floating:""},{default:(0,n.w5)((()=>[(0,n.Uk)((0,u.zw)((0,o.SU)(t).decore.actor.active_s.length),1)])),_:1})):(0,n.kq)("",!0)])),_:1})],64)}}});var I=s(1639),A=s(2074),O=s(4458),M=s(3190),T=s(3302),z=s(990);const P=(0,I.Z)(F,[["__scopeId","data-v-07f6c40b"]]),H=P;q()(F,"components",{QDialog:A.Z,QCard:O.Z,QCardSection:M.Z,QCircularProgress:T.Z,QIcon:k.Z,QBtn:b.Z,QBadge:z.Z});var Y=s(3483);const K=(0,n._)("img",{src:"logo.png",alt:"Logo",height:"38px"},null,-1),B={inheritAttrs:!1},R=Object.assign(B,{__name:"uf-app-layout",setup(e){const t=(0,n.l1)().use,s=(0,n.Fl)((()=>{let e=t.route.params.view_id+JSON.stringify(t.route.query);return e}));return(e,i)=>{const a=(0,n.up)("q-toolbar-title"),l=(0,n.up)("q-space"),r=(0,n.up)("q-btn"),d=(0,n.up)("q-toolbar"),m=(0,n.up)("q-header"),h=(0,n.up)("q-drawer"),p=(0,n.up)("router-view"),g=(0,n.up)("q-page-container"),_=(0,n.up)("q-footer"),w=(0,n.up)("q-layout");return(0,n.wg)(),(0,n.j4)(w,null,{default:(0,n.w5)((()=>[(0,n.Wm)(c.Z,{use:(0,o.SU)(t)},null,8,["use"]),(0,n.Wm)(m,{bordered:"",class:"de-main-header bg-black text-white"},{default:(0,n.w5)((()=>[(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[K,(0,n.Wm)(a,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,u.zw)((0,o.SU)(t).title),1)])),_:1}),(0,n.Wm)(l),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)((0,o.SU)(t).dialog_s,(e=>((0,n.wg)(),(0,n.j4)(r,{key:e.id,flat:"",dense:"",round:"",icon:e.icon,label:e.title,onClick:s=>(0,o.SU)(t).toogleAppDialog(e.id)},null,8,["icon","label","onClick"])))),128))])),_:1})])),_:1}),(0,o.SU)(t).shrink?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(h,{key:0,"show-if-above":"",model:!0,width:300,side:"left",breakpoint:0,bordered:"",mini:(0,o.SU)(t).drawer_mini},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{class:"bg-grey-2"},{default:(0,n.w5)((()=>[(0,n.Wm)(r,{dense:"",flat:"",round:"",icon:(0,o.SU)(t).drawer_icon,onClick:i[0]||(i[0]=e=>(0,o.SU)(t).toogleLayoutDrawer())},null,8,["icon"])])),_:1}),(0,n.Wm)(j,{use:(0,o.SU)(t)},null,8,["use"]),(0,n.Wm)(d,{class:"app-navigation-footer bg-grey-2"})])),_:1},8,["mini"])),(0,n.Wm)(g,null,{default:(0,n.w5)((()=>[((0,n.wg)(),(0,n.j4)(p,{key:s.value}))])),_:1}),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)((0,o.SU)(t).dialog_s,(e=>((0,n.wg)(),(0,n.j4)(Y.Z,{key:e.id,id:e.id},null,8,["id"])))),128)),(0,n.Wm)(_,{bordered:"",class:"bg-grey-8 text-white"},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{dense:""},{default:(0,n.w5)((()=>[(0,n.Uk)((0,u.zw)((0,o.SU)(t).show_dialog_s)+" ",1),(0,n.Wm)(l),(0,n.Wm)(H,{use:(0,o.SU)(t)},null,8,["use"])])),_:1})])),_:1})])),_:1})}}});var L=s(7605),N=s(6602),$=s(1663),J=s(1973),G=s(136),X=s(906),ee=s(2133),te=s(1378);const se=R,ie=se;q()(R,"components",{QLayout:L.Z,QHeader:N.Z,QToolbar:$.Z,QToolbarTitle:J.Z,QSpace:G.Z,QBtn:b.Z,QDrawer:X.Z,QPageContainer:ee.Z,QFooter:te.Z});const ae={__name:"App",setup(e){const t=(0,o.qj)((0,r.n)().use.app);t.router=(0,d.tv)(),t.route=(0,d.yj)(),(0,l.Z)((()=>({title:t.title})));const s=e=>{if("Enter"==e.key&&t.show_dialog_s.length>0){let e=t.show_dialog_s[t.show_dialog_s.length-1];t.ref[e].getSubmitable()&&t.ref[e].submitWidgets()}if("Escape"==e.key&&t.show_dialog_s.length>0){let e=t.show_dialog_s[t.show_dialog_s.length-1];t.ref[e].getCloseable()&&t.ref[e].closeDialog()}};return(0,n.bv)((()=>{window.addEventListener("keyup",s)})),(0,n.Jd)((()=>{window.removeEventListener("keyup",s)})),(e,s)=>((0,n.wg)(),(0,n.j4)(ie,{use:t},null,8,["use"]))}},oe=ae,ne=oe;var le=s(3340),re=s(1809);const de=(0,le.h)((()=>{const e=(0,re.WB)();return e})),ue=[{name:"base",path:"/:base_id",component:()=>Promise.all([s.e(736),s.e(686)]).then(s.bind(s,5686)),props:!0},{name:"view",path:"/:base_id/:view_id",component:()=>Promise.all([s.e(736),s.e(686)]).then(s.bind(s,5686)),props:!0},{name:"dialog",path:"/:base_id/:view_id/:dialog_id/:item_id",component:()=>Promise.all([s.e(736),s.e(686)]).then(s.bind(s,5686)),props:!0},{name:"subdialog",path:"/:base_id/:view_id/:dialog_id/:item_id/:subdialog_id/:subitem_id",component:()=>Promise.all([s.e(736),s.e(686)]).then(s.bind(s,5686)),props:!0},{name:"login",path:"/login",redirect:"/dbi_mayor_priv/dbi_login_view/dbi_login_dialog/empty"},{name:"404",path:"/404",component:()=>s.e(99).then(s.bind(s,6099))},{path:"/:catchAll(.*)*",component:()=>s.e(99).then(s.bind(s,6099))}],ce=ue,me=(0,le.BC)((function(){const e=d.PO,t=(0,d.p7)({scrollBehavior:()=>({left:0,top:0}),routes:ce,history:e("/")});return t.beforeEach(((e,t,s)=>{const i=(0,r.n)();let a=localStorage.getItem("user_token"),o=!1;function n(e){let t=!1;return e in i.use&&(t=!0),t}function l(e){let t=!1;return e in i.use&&(t=!0),t}"base_id"in e.params&&!n(e.params.base_id)&&(o=!0),"view_id"in e.params&&!l(e.params.view_id)&&(o=!0),o?i.use.app.role>1&&null==a?s("/login"):s("/404"):s()})),t}));async function he(e,t){const s=e(ne);s.use(a.Z,t);const i="function"===typeof de?await de({}):de;s.use(i);const n=(0,o.Xl)("function"===typeof me?await me({store:i}):me);return i.use((({store:e})=>{e.router=n})),{app:s,store:i,router:n}}const pe={config:{}},ge="/static/",_e=/\/\//,we=e=>(ge+e).replace(_e,"/");async function fe({app:e,router:t,store:s},i){let a=!1;const o=e=>{try{return we(t.resolve(e).href)}catch(s){}return Object(e)===e?null:e},n=e=>{if(a=!0,"string"===typeof e&&/^https?:\/\//.test(e))return void(window.location.href=e);const t=o(e);null!==t&&(window.location.href=t)},l=window.location.href.replace(window.location.origin,"");for(let d=0;!1===a&&d<i.length;d++)try{await i[d]({app:e,router:t,store:s,ssrContext:null,redirect:n,urlPath:l,publicPath:ge})}catch(r){return r&&r.url?void n(r.url):void console.error("[Quasar] boot error:",r)}!0!==a&&(e.use(t),e.mount("#q-app"))}he(i.ri,pe).then((e=>{const[t,i]=void 0!==Promise.allSettled?["allSettled",e=>e.map((e=>{if("rejected"!==e.status)return e.value.default;console.error("[Quasar] boot error:",e.reason)}))]:["all",e=>e.map((e=>e.default))];return Promise[t]([Promise.resolve().then(s.bind(s,8619))]).then((t=>{const s=i(t).filter((e=>"function"===typeof e));fe(e,s)}))}))},8619:(e,t,s)=>{s.r(t),s.d(t,{default:()=>d});var i=s(3340),a=s(9981),o=s.n(a),n=s(7690);let l=document.querySelector('meta[name="fqdn"]').content,r=document.querySelector('meta[name="port"]').content;"{{fqdn}}"===l&&(l="localhost"),"{{port}}"===r&&(r="5555"),o().defaults.baseURL="http://"+l+":"+r,console.log("axios.defaults.baseURL",o().defaults.baseURL);const d=(0,i.xr)((async({router:e,store:t})=>{t.use((()=>({axios:o()})));const s=(0,n.n)();await s.setHelper(),await s.setupInterceptor(),await s.loginUser(),await s.setUse(),await s.setChildren(),s.use.app.start_base?e.addRoute({path:"/",redirect:s.use.app.start_base.id}):e.addRoute({path:"/",redirect:"/404"})}))},7690:(e,t,s)=>{s.d(t,{n:()=>U});s(9665);var i=s(1809),a=s(9981),o=s.n(a);class n{constructor(e,t){this.id=e.id,this.model=e.model,this.field_s=e.field_s,this.rel_field_s=e.rel_field_s,this.schema=e.schema,this.ref=t}getItem(e,t={}){return o().post("/post_item/"+this.id+"/"+e,t)}getItems(e){return o().post("/post_item_s/"+this.id,e)}getRelItems(e){return o().post("/post_rel_item_s/"+this.id,e)}getFilterValues(e,t,s){return o().post("/post_filter_value_s/"+this.id,{query:e,attr:t,rel_attr:s})}getRefByModel(e){let t=null;for(const s in this.ref)this.ref[s].model==e&&(t=this.ref[s]);return t}}class l{constructor(){this.data=[],this.setData()}setData(){o().get("/get_query_s").then((e=>{this.data=e.data}))}saveQuery(e){o().post("/post_save_query/"+e.params.base_id+"/"+e.params.view_id,e.query).then((e=>{"success"==e.data&&this.setData()}))}removeQuery(e){o().get("get_remove_query/"+e).then((e=>{"success"==e.data&&this.setData()}))}}s(2309);class r{constructor(e){this.decore=e,this.active_s=[],this.item_s=[],this.interval=null}async callGetActorActives(e){this.active_s.push(e),this.item_s.push(e),this.interval||(this.interval=setInterval((()=>{this.getActorActives(),0===this.active_s.length&&(clearInterval(this.interval),this.interval=null)}),1e3))}getActorActives(){o().get("/get_actor_active_s").then((e=>{this.active_s=e.data}))}getActorItems(){o().get("/get_actor_item_s").then((e=>{this.item_s=e.data}))}async postAction(e,t,s,i){let a={};return this.callGetActorActives({id:"init",title:e.title,desc:e.desc,finished:!1,progress:0}),"standard"==e.type?await o().post("/post_action/"+e.id,{sender:t,event:s,data:i}).then((t=>{a=t.data,this.decore.use[e.parent_id].setProperties(a.object),this.getActorItems()})):"submit"==e.type?await o().post("/post_action/"+e.id,i).then((e=>{a=e.data,this.getActorItems()})):"file"==e.type?o().post("/post_action/"+e.id,i,{responseType:"blob"}).then((e=>{let t=e.headers["content-disposition"].split(";")[1].split("=")[1];this.downloadFile(e.data,t)})):await o().post("/post_action/"+e.id,null).then((e=>{a=e.data,this.getActorItems()})),a}downloadFile(e,t){const s=URL.createObjectURL(e),i=document.createElement("a");i.href=s,i.download=t,i.click()}}class d{async getTemplate(e){let t={};return await o().get("/get_template/"+e).then((e=>{t=e.data})),t}}class u{constructor(e){this.decore=e}async getHook(e){await o().get("/get_hook/"+e.id).then((t=>{if(Object.keys(t.data.meta).length>0)for(const e in t.data.meta)this.decore.use[e].setProperties(t.data.meta[e]);t.data.route&&this.decore.use.app.router.push(t.data.route),this.decore.use[e.parent_id].break=!1}))}}class c{constructor(e,t){this.decore=U(),this.ref=t,this.base_s=[],this.view_s=[],this.dialog_s=[],this.widget_s=[],this.action_s=[],this.template_s=[],this.hook_s=[],this.setProperties(e)}setProperties(e){var t=Object.keys(e);t.forEach((t=>{this[t]=e[t]}))}}class m extends c{constructor(e,t){super(e,t),this.router=null,this.route=null,this.ql={},this.drawer_icon="mdi-backburger",this.drawer_mini=!1,this.expanded_nodes=[],this.shrink=!1,this.show_dialog_s=[]}get start_base(){let e=null;for(const t of this.base_s)if(!t.hide){e=t;break}return e}toogleLayoutDrawer(){this.drawer_mini=!this.drawer_mini,this.drawer_mini?this.drawer_icon="mdi-forwardburger":this.drawer_icon="mdi-backburger"}toogleAppDialog(e){this.ref[e].showDialog()}}class h extends c{constructor(e,t,s){super(e,t),this.app=s,this.break=!0}get start_view(){let e=null;for(const t of this.view_s)if(!t.hide){e=t;break}return e}triggerHooks(){if(this.hook_s.length>0)for(const e in this.hook_s){const t=this.hook_s[e];t.trigger();break}else this.break=!1}}class p{constructor(e,t,s,i,a){this.items_mode=!1,this.route=e,this.source=t,this.parent_source=s,this.field_s=i,this.query=a,this.search="",this.item={},this.item_s=[],this.rel_item_s={},this.select_s=[],this.count=0,this.errors={},this.setErrors({}),this.loaded=!1}export(){let e={};return e.item=this.item,e.select_s=this.select_s,e.field_s=this.field_s,e}setQuery(e){this.parent_source.field_s.forEach((t=>{if(t.class.includes("ForeignKeyField")&&this.source.model==t.rel_model){let s=t.backref+"__id__eq";this.query[s]=e.id}})),this.parent_source.rel_field_s.forEach((t=>{if(t.class.includes("ForeignKeyField")&&this.source.model==t.model){let s=t.name+"__eq";this.query[s]=e.id}else if(t.class.includes("ManyToManyField")&&this.source.model==t.rel_model){let s=t.backref+"__id__eq";this.query[s]=e.id}}))}extendItem(e){this.parent_source.rel_field_s.forEach((t=>{t.class.includes("ForeignKeyField")&&this.source.model==t.model&&(this.item[t.name]={...e})}))}setItem(e){null==e&&(e=this.route.params.item_id);let t="default";"dialog"==this.route.name&&(t=this.route.params.item_id),"subdialog"==this.route.name&&(t=this.route.params.subitem_id),this.parent_source.getItem(e).then((e=>{let s=e.data;this.parent_source.model!=this.source.model?(this.setQuery(s),this.source.getItem(t,this.query).then((e=>{this.item=e.data,this.extendItem(s),this.setRelItems(),this.setItems(),this.loaded=!0}))):(this.item=s,this.setRelItems(),this.setItems(),this.loaded=!0)}))}setItems(){this.items_mode?this.source.getItems(this.query).then((e=>{this.item_s=e.data.item_s,this.purgeSelects(),this.count=e.data.count})):(this.item_s=[],this.select_s=[],this.count=0)}setRelItems(){this.field_s.forEach((e=>{if("ForeignKeyField"==e.class){let t=this.source.getRefByModel(e.rel_model);t.getRelItems(e.choice_query).then((t=>{this.rel_item_s[e.name]=t.data}))}else if("BackrefAccessor"==e.class){let t=this.source.getRefByModel(e.rel_model);this.item.id&&(e.choice_query[e.field.name+"__eq"]=[null,this.item.id]),t.getRelItems(e.choice_query).then((t=>{this.rel_item_s[e.name]=t.data}))}else if("ManyToManyField"==e.class){let t=this.source.getRefByModel(e.rel_model);t.getRelItems(e.choice_query).then((t=>{this.rel_item_s[e.name]=t.data}))}}))}purgeSelects(){let e=[];for(const t of this.select_s)this.item_s.includes(t)&&e.push(t);this.select_s=e}setErrors(e){for(const t of this.field_s)t.name in e?this.errors[t.name]=e[t.name]:this.errors[t.name]=[]}}class g{constructor(e){this.rowsPerPageOptions=[4,8,16,32,64,128,265,512,1024],this.rowsPerPage=e,this.page=1}}var _=s(499);class w extends c{constructor(e,t,s){super(e,t),this.app=s,this.ql={},this.item_menu_row_id=null,this.item_menu_target=!1,this.item_menu_model=!1}get sum_dialog_s(){let e=[];for(const t in this.ref){const s=this.ref[t];"dialog"===s.kind&&s.root_view.id==this.id&&e.push(s)}return e}hideDialogs(){this.sum_dialog_s.forEach((e=>{this.ref[e.id]&&this.ref[e.id].show&&this.ref[e.id].hideDialog()}))}showMainDialog(e){this.sum_dialog_s.forEach((t=>{t.id===e?this.ref[t.id]&&this.ref[t.id].showDialog():this.ref[t.id]&&1==this.ref[t.id].show&&this.ref[t.id].hideDialog()}))}showSubDialog(e){this.sum_dialog_s.forEach((t=>{t.id===e&&this.ref[t.id]&&this.ref[t.id].showDialog()}))}setData(){this.data=(0,_.qj)(new p(this.app.route,this.decore.source[this.source_id],null,this.active_s,{...this.query,...this.app.route.query})),this.pagination=(0,_.qj)(new g(this.pag_recs))}get column_s(){let e=[];return e.push({name:"gotos",label:"",field:"gotos"}),e.push({name:"actions",label:"",filed:"actions"}),this.active_s.forEach((t=>{var s={};s=t.class.includes("ForeignKeyField")?{name:t.column_name,label:t.verbose_name,field:function(e){return e[t.name]?e[t.name]["title"]:null},sortable:!0}:{name:t.column_name,label:t.verbose_name,field:t.column_name,sortable:!0},e.push(s)})),e}get rel_view_s(){let e=[];return this.decore.meta.app.base_s.forEach((t=>{t.view_s.forEach((t=>{this.decore.source[t.source_id].field_s.forEach((s=>{s.class.includes("ForeignKeyField")&&this.data.source.model==s.rel_model&&e.push({id:t.id,icon:t.icon,title:t.title,parent_id:t.parent_id,rel_field_name:s.name})}))}))})),e}onItemClick(e,t,s){if("td"==e.target.localName)for(const i of this.dialog_s)if("click"==i.activator){this.app.router.push({name:"dialog",params:{dialog_id:i.id,item_id:t.id},query:this.app.route.query});break}}onItemMenuClick(e,t){this.item_menu_row_id=t.id,this.item_menu_target=e.target,this.item_menu_model=!0}}class f extends c{constructor(e,t,s){super(e,t),this.app=s,this.ql={},this.main=this.getMain(),this.show=!1}get root_view(){return this.getRootView(this)}getRootView(e){return"view"===e.kind||"app"===e.kind?e:this.getRootView(this.ref[e.parent_id])}getMain(){let e=!1;return"view"==this.parent_kind&&(e=!0),e}getSumWidgets(){let e=[];return this.widget_s.forEach((t=>{e.push(t),t.widget_s.forEach((t=>{e.push(t)}))})),e}normalizeWidgets(){for(const e of this.getSumWidgets())e.parent_id=this.id}getCloseable(){let e=!1;return("app"==this.parent_kind||"empty"!=this.activator&&"first"!=this.activator&&"last"!=this.activator)&&(e=!0),e}getSubmitable(){let e=!1;return this.getSumWidgets().forEach((t=>{t.action_s.forEach((t=>{"submit"==t.type&&(e=!0)}))})),e}async showDialog(){this.main,this.widget_s.forEach((e=>{this.ref[e.id].initWidget(),e.widget_s.forEach((e=>{this.ref[e.id].initWidget()}))})),this.app.show_dialog_s.push(this.id),this.show=!0}async submitWidgets(){let e=!0;for(const t of this.widget_s){await this.ref[t.id].submit(),e=1==e&&1==this.ref[t.id].valid;for(const s of t.widget_s)await this.ref[s.id].submit(),e=1==e&&1==this.ref[t.id].valid}e&&this.closeDialog()}closeDialog(){1==this.getCloseable()&&("app"==this.parent_kind?this.hideDialog():"view"==this.parent_kind?this.app.router.push({name:"view",params:{base_id:this.app.route.params.base_id,view_id:this.app.route.params.view_id},query:this.app.route.query}):"widget"==this.parent_kind&&this.app.router.push({name:"dialog",params:{dialog_id:this.app.route.params.dialog_id,item_id:this.app.route.params.item_id},query:this.app.route.query}))}hideDialog(){this.show=!1,this.app.show_dialog_s=this.app.show_dialog_s.filter((e=>e!=this.id))}}class b extends c{constructor(e,t,s){super(e,t),this.app=s,this.form_ref=void 0,this.composer_ref=void 0,this.valid=!0}setData(){this.data=(0,_.qj)(new p(this.app.route,this.decore.source[this.source_id],this.getParentSource(this.id),this.active_s,{}))}getParentSource(e){let t=this.decore.use[e];return"view"==t.kind||"app"==t.parent_kind?this.decore.source[t.source_id]:this.getParentSource(t.parent_id)}initWidget(){this.data.loaded=!1,this.data.setErrors({}),Object.values(this.app.route.params).includes(this.parent_id)?this.data.setItem(null):this.data.setItem(this.decore.use[this.parent_id].activator)}async submit(){for(const e of this.action_s)if("submit"==e.type){let t=await this.ref[e.id].trigger();this.data.setErrors(t.errors),this.valid=!(Object.keys(t.errors).length>0)}}getErrorMessage(e){let t="";for(const s of this.data.errors[e])t+=s;return t}}class v extends c{constructor(e,t,s){super(e,t),this.app=s,this.htmlTemplate=""}async setHtmlTemplate(){let e=await this.decore.loader.getTemplate(this.id);this.htmlTemplate=e}}class y extends c{constructor(e,t,s){super(e,t),this.app=s,this.actor=this.decore.actor}async trigger(e,t){let s=await this.actor.postAction(this,e,t,this.getData("parent"));return this.refreshRouteItems(this.parent_id),s}refreshRouteItems(e){const t=this.ref[e];t.data&&t.data.setItems(),"app"!=t.parent_id&&this.refreshRouteItems(t.parent_id)}getData(e){let t={};if("this"==e)t[this.parent_id]=this.ref[this.parent_id].data.export();else if("parent"==e){var s=this.parent_id;while("app"!=s)for(const e of Object.values(this.ref))e.id==s&&(e.data&&(t[e.id]=e.data.export()),s=e.parent_id)}else if("all"==e)for(const i of Object.values(this.ref))i.data&&(t[i.id]=i.data.export());return t}}class k extends c{constructor(e,t,s){super(e,t),this.app=s}trigger(){this.decore.pulser.getHook(this)}}const U=(0,i.Q_)("decore",{state:()=>({use:{},source:{},queries:null,actor:null,loader:null}),getters:{},actions:{clear(){this.use={},this.source={}},async setHelper(){this.actor=new r(this),this.queries=new l,this.loader=new d,this.pulser=new u(this)},async setupInterceptor(){this.axios.interceptors.response.use((e=>(e.config.url.includes("post_action")&&null!=e.data.token&&(this.setToken(e.data.token),e.data.token=null),e)),(e=>(console.error("Ein Fehler ist aufgetreten:",e),401===e.response.status||422===e.response.status?this.removeToken():console.error(e.message),Promise.reject(e))))},async loginUser(){const e="guest@decore.base",t="password",s=localStorage.getItem("user_token");s?this.axios.defaults.headers.common["Authorization"]=`Bearer ${s}`:await this.axios.post("/guest_login",{username:e,password:t}).then((e=>{this.axios.defaults.headers.common["Authorization"]=`Bearer ${e.data.token}`,console.log(e.data.result)}))},setToken(e){"remove"!=e?(localStorage.setItem("user_token",e),window.location.href="/"):this.removeToken()},removeToken(){localStorage.removeItem("user_token"),window.location.href="/"},getUse(e){return this.use[e]?this.use[e]:null},async setUse(){await this.axios.get("/get_meta").then((e=>{this.use.app=new m(e.data.app,this.use);for(const t in e.data){const s=e.data[t];"base"===s.kind?(this.use[s.id]=new h(s,this.use,this.use.app),this.source[s.id]=new n(s,this.source)):"view"===s.kind?this.use[s.id]=new w(s,this.use,this.use.app):"dialog"===s.kind?this.use[s.id]=new f(s,this.use,this.use.app):"widget"===s.kind?this.use[s.id]=new b(s,this.use,this.use.app):"template"===s.kind?this.use[s.id]=new v(s,this.use,this.use.app):"action"===s.kind?this.use[s.id]=new y(s,this.use,this.use.app):"hook"===s.kind&&(this.use[s.id]=new k(s,this.use,this.use.app))}}))},async setChildren(){for(const e in this.use){const t=this.use[e];"base"===t.kind&&this.use.app.base_s.push(t),"view"===t.kind&&this.use[t.parent_id].view_s.push(t),"dialog"===t.kind&&this.use[t.parent_id].dialog_s.push(t),"widget"===t.kind&&this.use[t.parent_id].widget_s.push(t),"template"===t.kind&&this.use[t.parent_id].template_s.push(t),"action"===t.kind&&this.use[t.parent_id].action_s.push(t),"hook"===t.kind&&this.use[t.parent_id].hook_s.push(t)}},getSourceByModel(e){for(const t of Object.values(this.source))if(e==t.model)return t},getSourceByMetaID(e){return this.source[this.meta[e].source_id]}}})},3483:(e,t,s)=>{s.d(t,{Z:()=>tt});var i=s(9835),a=s(499),o=s(7690),n=s(6970),l=s(1957),r=s(6328);const d={class:"dialog-content"},u={inheritAttrs:!1},c=Object.assign(u,{__name:"uf-dialog-layout",setup(e){const t=(0,i.l1)().use,s=(0,i.Fl)((()=>{let e=0;return t.app.ql.hasOwnProperty("header")&&(e=t.app.ql.header.size),t.app.ql.hasOwnProperty("footer")&&(e+=t.app.ql.footer.size),e})),o=(0,i.Fl)((()=>{let e="none";return 1==t.show&&(e="block"),e}));return(e,u)=>{const c=(0,i.up)("q-toolbar-title"),m=(0,i.up)("q-space"),h=(0,i.up)("q-btn"),p=(0,i.up)("q-toolbar"),g=(0,i.up)("q-header"),_=(0,i.up)("q-footer"),w=(0,i.up)("q-layout");return(0,i.wg)(),(0,i.iD)("div",{style:(0,n.j5)({display:o.value})},[(0,i.Wm)(w,{container:"",style:(0,n.j5)({height:`calc(100vh - ${s.value}px)`})},{default:(0,i.w5)((()=>[(0,i.Wm)(r.Z,{use:(0,a.SU)(t)},null,8,["use"]),(0,i.Wm)(g,{style:{position:"fixed",width:"100%",top:"0"}},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{class:"bg-grey-2"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{class:"text-black"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)((0,a.SU)(t).title),1)])),_:1}),(0,i.Wm)(m),(0,a.SU)(t).getCloseable()?((0,i.wg)(),(0,i.j4)(h,{key:0,class:"text-black",round:"",flat:"",dense:"",onClick:u[0]||(u[0]=e=>(0,a.SU)(t).closeDialog()),icon:"close"})):(0,i.kq)("",!0)])),_:1})])),_:1}),(0,i._)("div",d,[(0,i.WI)(e.$slots,"dialog-content")]),(0,i.Wm)(_,{style:{position:"fixed",width:"100%",bottom:"0"}},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{class:"bg-grey-2"},{default:(0,i.w5)((()=>[(0,a.SU)(t).getSubmitable()?((0,i.wg)(),(0,i.j4)(h,{key:0,class:"text-black",label:"Submit",flat:"",onClick:u[1]||(u[1]=e=>(0,a.SU)(t).submitWidgets()),onKeyup:u[2]||(u[2]=(0,l.D2)((e=>(0,a.SU)(t).submitWidgets()),["enter"]))})):(0,i.kq)("",!0),(0,a.SU)(t).getCloseable()?((0,i.wg)(),(0,i.j4)(h,{key:1,class:"text-black",label:"Close",flat:"",onClick:u[3]||(u[3]=e=>(0,a.SU)(t).closeDialog()),onKeyup:u[4]||(u[4]=(0,l.D2)((e=>(0,a.SU)(t).closeDialog()),["esc"]))})):(0,i.kq)("",!0)])),_:1})])),_:1})])),_:3},8,["style"])],4)}}});var m=s(7605),h=s(6602),p=s(1663),g=s(1973),_=s(136),w=s(8879),f=s(1378),b=s(9984),v=s.n(b);const y=c,k=y;v()(c,"components",{QLayout:m.Z,QHeader:h.Z,QToolbar:p.Z,QToolbarTitle:g.Z,QSpace:_.Z,QBtn:w.Z,QFooter:f.Z});const U={key:0,class:"overlay"},S={inheritAttrs:!1},q=Object.assign(S,{__name:"uf-dialog-display",setup(e){const t=(0,i.l1)().use,s=(0,i.Fl)((()=>{let e=1;return t.display.includes("full")&&(e=1),t.display.includes("half")&&(e=.5),e})),o=(0,i.Fl)((()=>{let e="";return"app"==t.parent_kind?e="app-dialog":"view"==t.parent_kind?e="main-dialog":"widget"==t.parent_kind&&(e="sub-dialog"),e})),l=(0,i.Fl)((()=>{let e=t.app.ql.totalWidth-t.app.ql.left.offset-14;return e})),r=`\n  .q-drawer {\n    top: ${t.app.ql.header.size}px;\n    bottom: ${t.app.ql.footer.size}px;\n  }\n`,d=document.createElement("style");return d.textContent=r,document.head.appendChild(d),(e,r)=>{const d=(0,i.up)("q-drawer");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,a.SU)(t).show&&!(0,a.SU)(t).main?((0,i.wg)(),(0,i.iD)("div",U)):(0,i.kq)("",!0),(0,i._)("div",{class:(0,n.C_)(o.value)},[(0,a.SU)(t).display.includes("draw")?((0,i.wg)(),(0,i.j4)(d,{key:0,modelValue:(0,a.SU)(t).show,"onUpdate:modelValue":r[0]||(r[0]=e=>(0,a.SU)(t).show=e),bordered:"",overlay:"",persistent:"",side:"right",breakpoint:0,width:l.value*s.value},{default:(0,i.w5)((()=>[(0,i.Wm)(k,{use:(0,a.SU)(t)},{"dialog-content":(0,i.w5)((()=>[(0,i.WI)(e.$slots,"dialog-content")])),_:3},8,["use"])])),_:3},8,["modelValue","width"])):(0,i.kq)("",!0)],2)],64)}}});var D=s(906);const j=q,x=j;v()(q,"components",{QDrawer:D.Z});s(9665);const V=["innerHTML"],W={__name:"uf-template",props:{id:{}},setup(e){const t=e,s=(0,a.qj)((0,o.n)().use[t.id]);return s.setHtmlTemplate(),(e,t)=>((0,i.wg)(),(0,i.iD)("div",{innerHTML:s.htmlTemplate},null,8,V))}},C=W,Q=C,Z={key:0},E={key:1},F={key:2},I={key:3},A={key:4},O={key:5},M={inheritAttrs:!1},T=Object.assign(M,{__name:"uf-widget-composer",setup(e){const t=(0,i.l1)().use;return(e,s)=>{const o=(0,i.up)("q-checkbox"),l=(0,i.up)("q-field"),r=(0,i.up)("q-form");return(0,i.wg)(),(0,i.j4)(r,{greedy:"",ref:e=>{(0,a.SU)(t).refComposer(e)}},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,a.SU)(t).compose_store.el,(e=>((0,i.wg)(),(0,i.iD)("span",{key:e.id},["p"==e.type?((0,i.wg)(),(0,i.iD)("p",Z,(0,n.zw)((0,a.SU)(t).item[e.id]),1)):(0,i.kq)("",!0),"h1"==e.type?((0,i.wg)(),(0,i.iD)("h1",E,(0,n.zw)((0,a.SU)(t).item[e.id]),1)):(0,i.kq)("",!0),"h2"==e.type?((0,i.wg)(),(0,i.iD)("h2",F,(0,n.zw)((0,a.SU)(t).item[e.id]),1)):(0,i.kq)("",!0),"h3"==e.type?((0,i.wg)(),(0,i.iD)("h3",I,(0,n.zw)((0,a.SU)(t).item[e.id]),1)):(0,i.kq)("",!0),"h4"==e.type?((0,i.wg)(),(0,i.iD)("h4",A,(0,n.zw)((0,a.SU)(t).item[e.id]),1)):(0,i.kq)("",!0),"h5"==e.type?((0,i.wg)(),(0,i.iD)("h5",O,(0,n.zw)((0,a.SU)(t).item[e.id]),1)):(0,i.kq)("",!0),"checkbox"==e.type?((0,i.wg)(),(0,i.j4)(l,{key:6,"hide-bottom-space":"",dense:"",borderless:"",modelValue:(0,a.SU)(t).item[e.id],"onUpdate:modelValue":s=>(0,a.SU)(t).item[e.id]=s,rules:(0,a.SU)(t).getRules(e.id),"lazy-rules":"ondemand"},{default:(0,i.w5)((()=>[(0,i.Wm)(o,{modelValue:(0,a.SU)(t).item[e.id],"onUpdate:modelValue":[s=>(0,a.SU)(t).item[e.id]=s,s=>(0,a.SU)(t).compose_store.sendElement(e.id,"update",(0,a.SU)(t).item[e.id],(0,a.SU)(t).compose_store.el)],label:e.title,disable:e.disable},null,8,["modelValue","onUpdate:modelValue","label","disable"])])),_:2},1032,["modelValue","onUpdate:modelValue","rules"])):(0,i.kq)("",!0)])))),128))])),_:1},512)}}});var z=s(8326),P=s(8149),H=s(1221);v()(T,"components",{QForm:z.Z,QField:P.Z,QCheckbox:H.Z});const Y={key:0},K={key:1},B={key:2},R={inheritAttrs:!1},L=Object.assign(R,{__name:"uf-widget-layout",setup(e){const t=(0,i.l1)().use;return(e,s)=>{const o=(0,i.up)("q-space"),l=(0,i.up)("q-icon"),r=(0,i.up)("q-toolbar"),d=(0,i.up)("q-card-section"),u=(0,i.up)("q-btn"),c=(0,i.up)("q-card-actions"),m=(0,i.up)("q-separator"),h=(0,i.up)("q-card");return(0,i.wg)(),(0,i.j4)(h,{class:"widget-card",flat:""},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{class:"widget-card-toolbar"},{default:(0,i.w5)((()=>[(0,i._)("h5",null,(0,n.zw)((0,a.SU)(t).title),1),(0,i.Wm)(o),(0,i.Wm)(l,{name:(0,a.SU)(t).icon},null,8,["name"])])),_:1}),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,a.SU)(t).layout,(s=>((0,i.wg)(),(0,i.iD)("span",{key:s},["c"==s?((0,i.wg)(),(0,i.iD)("span",Y,[(0,i.Wm)(d,{class:"widget-card-section"},{default:(0,i.w5)((()=>[(0,i.WI)(e.$slots,"widget-content")])),_:3})])):(0,i.kq)("",!0),"t"==s?((0,i.wg)(),(0,i.iD)("span",K,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,a.SU)(t).template_s,(e=>((0,i.wg)(),(0,i.iD)("span",{key:e.id},[(0,i.Wm)(d,{class:"widget-card-section"},{default:(0,i.w5)((()=>[(0,i.Wm)(Q,{id:e.id},null,8,["id"])])),_:2},1024)])))),128))])):(0,i.kq)("",!0),"a"==s?((0,i.wg)(),(0,i.iD)("span",B,[(0,i.Wm)(c,null,{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,a.SU)(t).dialog_s,(e=>((0,i.wg)(),(0,i.iD)("span",{key:e.id},["default"==e.activator?((0,i.wg)(),(0,i.j4)(u,{key:0,onClick:s=>(0,a.SU)(t).app.router.push({name:"subdialog",params:{subdialog_id:e.id,subitem_id:e.activator},query:(0,a.SU)(t).app.route.query}),icon:e.icon,dense:"",flat:""},{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(e.title)+"...",1)])),_:2},1032,["onClick","icon"])):(0,i.kq)("",!0)])))),128)),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,a.SU)(t).action_s,(e=>((0,i.wg)(),(0,i.iD)("span",{key:e.id},["default"==e.activator?((0,i.wg)(),(0,i.j4)(u,{key:0,onClick:s=>(0,a.SU)(t).ref[e.id].trigger(e.id,"click"),icon:e.icon,dense:"",flat:""},{default:(0,i.w5)((()=>[(0,i.Uk)((0,n.zw)(e.title),1)])),_:2},1032,["onClick","icon"])):(0,i.kq)("",!0)])))),128))])),_:1})])):(0,i.kq)("",!0)])))),128)),(0,i.Wm)(m)])),_:3})}}});var N=s(4458),$=s(2857),J=s(3190),G=s(1821),X=s(926);const ee=L,te=ee;v()(L,"components",{QCard:N.Z,QToolbar:p.Z,QSpace:_.Z,QIcon:$.Z,QCardSection:J.Z,QCardActions:G.Z,QBtn:w.Z,QSeparator:X.Z});const se={key:0,class:"q-pb-sm"},ie={class:"q-field__bottom"},ae={key:1,class:"q-pb-sm"},oe={key:2,class:"q-pb-sm"},ne={key:3,class:"q-pb-sm"},le={class:"q-gutter-xs row items-start"},re={key:4,class:"q-pb-sm"},de={key:5,class:"q-pb-sm"},ue={key:6,class:"q-pb-sm"},ce={key:7,class:"q-pb-sm"},me={key:8,class:"q-pb-sm"},he={key:9,class:"q-pb-sm"},pe={key:10,class:"q-pb-sm"},ge={key:11,class:"text-negative"},_e=(0,i._)("br",null,null,-1),we=(0,i._)("br",null,null,-1),fe={inheritAttrs:!1},be=Object.assign(fe,{__name:"uf-widget-form",setup(e){const t=(0,i.l1)().use;return t.data.rel_items_mode=!0,(e,s)=>{const o=(0,i.up)("q-toggle"),l=(0,i.up)("q-input"),r=(0,i.up)("q-select"),d=(0,i.up)("q-date"),u=(0,i.up)("q-popup-proxy"),c=(0,i.up)("q-time"),m=(0,i.up)("q-form");return(0,i.wg)(),(0,i.j4)(m,{greedy:""},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,a.SU)(t).active_s,(e=>((0,i.wg)(),(0,i.iD)("span",{key:e.id},[e.class.includes("BooleanField")?((0,i.wg)(),(0,i.iD)("div",se,[(0,i.Wm)(o,{modelValue:(0,a.SU)(t).data.item[e.name],"onUpdate:modelValue":s=>(0,a.SU)(t).data.item[e.name]=s,label:e.verbose_name},null,8,["modelValue","onUpdate:modelValue","label"]),(0,i._)("div",ie,(0,n.zw)(e.help_text),1)])):e.class.includes("CharField")?((0,i.wg)(),(0,i.iD)("div",ae,[e.choices?((0,i.wg)(),(0,i.j4)(r,{key:1,dense:"",outlined:"","hide-bottom-space":"",modelValue:(0,a.SU)(t).data.item[e.name],"onUpdate:modelValue":s=>(0,a.SU)(t).data.item[e.name]=s,label:e.verbose_name,hint:e.help_text,"option-value":"value","option-label":"label",options:Object.entries(e.choices).map((([e,t])=>({label:e,value:t}))),"emit-value":"","map-options":""},null,8,["modelValue","onUpdate:modelValue","label","hint","options"])):((0,i.wg)(),(0,i.j4)(l,{key:0,dense:"",outlined:"","hide-bottom-space":"",modelValue:(0,a.SU)(t).data.item[e.name],"onUpdate:modelValue":s=>(0,a.SU)(t).data.item[e.name]=s,label:e.verbose_name,hint:e.help_text,error:(0,a.SU)(t).data.errors[e.name].length>0,"error-message":(0,a.SU)(t).getErrorMessage(e.name)},null,8,["modelValue","onUpdate:modelValue","label","hint","error","error-message"]))])):e.class.includes("DateField")?((0,i.wg)(),(0,i.iD)("div",oe,[(0,i.Wm)(l,{dense:"",outlined:"","hide-bottom-space":"",modelValue:(0,a.SU)(t).data.item[e.name],"onUpdate:modelValue":s=>(0,a.SU)(t).data.item[e.name]=s,mask:"####-##-##",label:e.verbose_name,hint:e.help_text,error:(0,a.SU)(t).data.errors[e.name].length>0,"error-message":(0,a.SU)(t).getErrorMessage(e.name)},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{"transition-show":"scale","transition-hide":"scale"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{modelValue:(0,a.SU)(t).data.item[e.name],"onUpdate:modelValue":s=>(0,a.SU)(t).data.item[e.name]=s,mask:"YYYY-MM-DD",color:"black"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1032,["modelValue","onUpdate:modelValue","label","hint","error","error-message"])])):e.class.includes("DateTimeField")?((0,i.wg)(),(0,i.iD)("div",ne,[(0,i.Wm)(l,{dense:"",outlined:"","hide-bottom-space":"",modelValue:(0,a.SU)(t).data.item[e.name],"onUpdate:modelValue":s=>(0,a.SU)(t).data.item[e.name]=s,mask:"####-##-## ##:##",label:e.verbose_name,hint:e.help_text,error:(0,a.SU)(t).data.errors[e.name].length>0,"error-message":(0,a.SU)(t).getErrorMessage(e.name)},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{"transition-show":"scale","transition-hide":"scale"},{default:(0,i.w5)((()=>[(0,i._)("div",le,[(0,i.Wm)(d,{modelValue:(0,a.SU)(t).data.item[e.name],"onUpdate:modelValue":s=>(0,a.SU)(t).data.item[e.name]=s,mask:"YYYY-MM-DD HH:mm",color:"black"},null,8,["modelValue","onUpdate:modelValue"]),(0,i.Wm)(c,{modelValue:(0,a.SU)(t).data.item[e.name],"onUpdate:modelValue":s=>(0,a.SU)(t).data.item[e.name]=s,format24h:"",mask:"YYYY-MM-DD HH:mm",color:"black"},null,8,["modelValue","onUpdate:modelValue"])])])),_:2},1024)])),_:2},1032,["modelValue","onUpdate:modelValue","label","hint","error","error-message"])])):e.class.includes("TextField")?((0,i.wg)(),(0,i.iD)("div",re,[(0,i.Wm)(l,{dense:"",outlined:"","hide-bottom-space":"",modelValue:(0,a.SU)(t).data.item[e.name],"onUpdate:modelValue":s=>(0,a.SU)(t).data.item[e.name]=s,label:e.verbose_name,hint:e.help_text,error:(0,a.SU)(t).data.errors[e.name].length>0,"error-message":(0,a.SU)(t).getErrorMessage(e.name),autogrow:""},null,8,["modelValue","onUpdate:modelValue","label","hint","error","error-message"])])):e.class.includes("FloatField")?((0,i.wg)(),(0,i.iD)("div",de,[(0,i.Wm)(l,{type:"number",dense:"",outlined:"","hide-bottom-space":"",modelValue:(0,a.SU)(t).data.item[e.name],"onUpdate:modelValue":s=>(0,a.SU)(t).data.item[e.name]=s,modelModifiers:{number:!0},label:e.verbose_name,hint:e.help_text,error:(0,a.SU)(t).data.errors[e.name].length>0,"error-message":(0,a.SU)(t).getErrorMessage(e.name)},null,8,["modelValue","onUpdate:modelValue","label","hint","error","error-message"])])):e.class.includes("IntegerField")?((0,i.wg)(),(0,i.iD)("div",ue,[e.choices?((0,i.wg)(),(0,i.j4)(r,{key:1,dense:"",outlined:"","hide-bottom-space":"",modelValue:(0,a.SU)(t).data.item[e.name],"onUpdate:modelValue":s=>(0,a.SU)(t).data.item[e.name]=s,modelModifiers:{number:!0},label:e.verbose_name,hint:e.help_text,"option-value":"value","option-label":"label",options:Object.entries(e.choices).map((([e,t])=>({label:e,value:t}))),"emit-value":"","map-options":""},null,8,["modelValue","onUpdate:modelValue","label","hint","options"])):((0,i.wg)(),(0,i.j4)(l,{key:0,type:"number",dense:"",outlined:"","hide-bottom-space":"",modelValue:(0,a.SU)(t).data.item[e.name],"onUpdate:modelValue":s=>(0,a.SU)(t).data.item[e.name]=s,modelModifiers:{number:!0},label:e.verbose_name,hint:e.help_text,error:(0,a.SU)(t).data.errors[e.name].length>0,"error-message":(0,a.SU)(t).getErrorMessage(e.name)},null,8,["modelValue","onUpdate:modelValue","label","hint","error","error-message"]))])):e.class.includes("PasswordField")?((0,i.wg)(),(0,i.iD)("div",ce,[(0,i.Wm)(l,{type:"password",dense:"",outlined:"","hide-bottom-space":"",modelValue:(0,a.SU)(t).data.item[e.name],"onUpdate:modelValue":s=>(0,a.SU)(t).data.item[e.name]=s,label:e.verbose_name,hint:e.help_text,error:(0,a.SU)(t).data.errors[e.name].length>0,"error-message":(0,a.SU)(t).getErrorMessage(e.name)},null,8,["modelValue","onUpdate:modelValue","label","hint","error","error-message"])])):e.class.includes("ForeignKeyField")?((0,i.wg)(),(0,i.iD)("div",me,[(0,i.Wm)(r,{dense:"",outlined:"",modelValue:(0,a.SU)(t).data.item[e.name],"onUpdate:modelValue":s=>(0,a.SU)(t).data.item[e.name]=s,"options-dense":"",label:e.verbose_name,hint:e.help_text,"option-value":"id","option-label":"title",options:(0,a.SU)(t).data.rel_item_s[e.name],error:(0,a.SU)(t).data.errors[e.name].length>0,"error-message":(0,a.SU)(t).getErrorMessage(e.name)},null,8,["modelValue","onUpdate:modelValue","label","hint","options","error","error-message"])])):e.class.includes("BackrefAccessor")?((0,i.wg)(),(0,i.iD)("div",he,[(0,i.Wm)(r,{dense:"",outlined:"",modelValue:(0,a.SU)(t).data.item[e.name],"onUpdate:modelValue":s=>(0,a.SU)(t).data.item[e.name]=s,multiple:"","options-dense":"",label:e.verbose_name,hint:e.help_text,"option-value":"id","option-label":"title",options:(0,a.SU)(t).data.rel_item_s[e.name]},null,8,["modelValue","onUpdate:modelValue","label","hint","options"])])):e.class.includes("ManyToManyField")?((0,i.wg)(),(0,i.iD)("div",pe,[(0,i.Wm)(r,{dense:"",outlined:"",modelValue:(0,a.SU)(t).data.item[e.name],"onUpdate:modelValue":s=>(0,a.SU)(t).data.item[e.name]=s,multiple:"","options-dense":"",label:e.verbose_name,hint:e.help_text,"option-value":"id","option-label":"title",options:(0,a.SU)(t).data.rel_item_s[e.name]},null,8,["modelValue","onUpdate:modelValue","label","hint","options"])])):((0,i.wg)(),(0,i.iD)("div",ge,[(0,i.Uk)((0,n.zw)(e.class)+" is momentarily not implemented.",1),_e,we]))])))),128))])),_:1})}}});var ve=s(3175),ye=s(6611),ke=s(2762),Ue=s(2765),Se=s(8683),qe=s(6770);const De=be,je=De;v()(be,"components",{QForm:z.Z,QToggle:ve.Z,QField:P.Z,QInput:ye.Z,QSelect:ke.Z,QPopupProxy:Ue.Z,QDate:Se.Z,QTime:qe.Z});const xe={key:0},Ve={class:"row"},We={class:"row items-center"},Ce={key:0,class:"col-auto text-body"},Qe={key:1,class:"col-auto text-body"},Ze={key:2,class:"col-auto text-body"},Ee={class:"col-auto"},Fe={key:1},Ie=(0,i._)("span",{style:{"font-size":"12px"}},"No data available",-1),Ae={inheritAttrs:!1},Oe=Object.assign(Ae,{__name:"uf-widget-info",setup(e){const t=(0,i.l1)().use;return(e,s)=>{const o=(0,i.up)("q-btn"),l=(0,i.up)("q-icon");return null!=(0,a.SU)(t).data.item.title?((0,i.wg)(),(0,i.iD)("div",xe,[(0,i._)("div",Ve,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,a.SU)(t).active_s,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"widget-info-col col-lg-3 col-md-6 col-sm-12",key:e.id},[(0,i._)("h6",null,(0,n.zw)(e.verbose_name),1),(0,i._)("div",We,[null!=(0,a.SU)(t).data.item[e.name]&&"ForeignKeyField"!=e.class?((0,i.wg)(),(0,i.iD)("div",Ce,(0,n.zw)((0,a.SU)(t).data.item[e.name]),1)):null!=(0,a.SU)(t).data.item[e.name]&&"ForeignKeyField"==e.class?((0,i.wg)(),(0,i.iD)("div",Qe,(0,n.zw)((0,a.SU)(t).data.item[e.name].title),1)):((0,i.wg)(),(0,i.iD)("div",Ze,"--")),(0,i._)("div",Ee,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,a.SU)(t).dialog_s,(s=>((0,i.wg)(),(0,i.iD)("span",{key:s.id},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.widget_s,(n=>((0,i.wg)(),(0,i.iD)("span",{key:n.key},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.active_s,(n=>((0,i.wg)(),(0,i.iD)("span",{key:n.name},["context"==s.activator&&e.name==n.name?((0,i.wg)(),(0,i.j4)(o,{key:0,class:"widget-info-col-btn",round:"",dense:"",flat:"",size:"xs",icon:s.icon,onClick:e=>(0,a.SU)(t).app.router.push({name:"subdialog",params:{subdialog_id:s.id,subitem_id:(0,a.SU)(t).data.item.id},query:(0,a.SU)(t).app.route.query})},null,8,["icon","onClick"])):(0,i.kq)("",!0)])))),128))])))),128))])))),128))])])])))),128))])])):((0,i.wg)(),(0,i.iD)("div",Fe,[(0,i.Wm)(l,{name:"mdi-alert",size:"22px"}),(0,i.Uk)(),Ie]))}}}),Me=Oe,Te=Me;v()(Oe,"components",{QBtn:w.Z,QIcon:$.Z});const ze={inheritAttrs:!1},Pe=Object.assign(ze,{__name:"uf-widget-table",setup(e){const t=(0,i.l1)().use;function s(){let e=[];return e.push({name:"gotos",label:"",field:"gotos"}),e.push({name:"actions",label:"",filed:"actions"}),t.active_s.forEach((t=>{var s={};s=t.class.includes("ForeignKeyField")?{name:t.column_name,label:t.verbose_name,field:function(e){return e[t.name]?e[t.name]["title"]:null},sortable:!0}:{name:t.column_name,label:t.verbose_name,field:t.column_name,sortable:!0},e.push(s)})),e}return t.data.items_mode=!0,(e,o)=>{const n=(0,i.up)("q-table");return(0,i.wg)(),(0,i.j4)(n,{columns:s(),rows:(0,a.SU)(t).data.item_s,flat:""},null,8,["columns","rows"])}}});var He=s(7580);const Ye=Pe,Ke=Ye;v()(Pe,"components",{QTable:He.Z});const Be={__name:"uf-widget",props:{id:{}},setup(e){const t=e,s=(0,a.qj)((0,o.n)().use[t.id]);return s.setData(),(e,t)=>((0,i.wg)(),(0,i.j4)(te,{use:s},{"widget-content":(0,i.w5)((()=>["form"==s.type?((0,i.wg)(),(0,i.j4)(je,{key:0,use:s},null,8,["use"])):(0,i.kq)("",!0),"info"==s.type?((0,i.wg)(),(0,i.j4)(Te,{key:1,use:s},null,8,["use"])):(0,i.kq)("",!0),"table"==s.type?((0,i.wg)(),(0,i.j4)(Ke,{key:2,use:s},null,8,["use"])):(0,i.kq)("",!0)])),_:1},8,["use"]))}},Re=Be,Le=Re,Ne={inheritAttrs:!1},$e=Object.assign(Ne,{__name:"uf-dialog-standard",setup(e){const t=(0,i.l1)().use;return(e,s)=>((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,a.SU)(t).getSumWidgets(),(e=>((0,i.wg)(),(0,i.iD)("span",{key:e.id},[(0,i.Wm)(Le,{id:e.id},null,8,["id"])])))),128))}}),Je=$e,Ge=Je,Xe={__name:"uf-dialog",props:{id:{}},setup(e){const t=e,s=(0,a.qj)((0,o.n)().use[t.id]);return s.normalizeWidgets(),(e,t)=>((0,i.wg)(),(0,i.j4)(x,{use:s},{"dialog-content":(0,i.w5)((()=>["standard"==s.type?((0,i.wg)(),(0,i.j4)(Ge,{key:0,use:s},null,8,["use"])):(0,i.kq)("",!0)])),_:1},8,["use"]))}},et=Xe,tt=et},6328:(e,t,s)=>{s.d(t,{Z:()=>l});var i=s(9835);const a={inheritAttrs:!1},o=Object.assign(a,{__name:"uf-layout-injector",setup(e){const t=(0,i.l1)().use;return t.ql=(0,i.f3)("_q_l_"),(e,t)=>((0,i.wg)(),(0,i.iD)("span"))}}),n=o,l=n}},t={};function s(i){var a=t[i];if(void 0!==a)return a.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,s),o.exports}s.m=e,(()=>{var e=[];s.O=(t,i,a,o)=>{if(!i){var n=1/0;for(u=0;u<e.length;u++){for(var[i,a,o]=e[u],l=!0,r=0;r<i.length;r++)(!1&o||n>=o)&&Object.keys(s.O).every((e=>s.O[e](i[r])))?i.splice(r--,1):(l=!1,o<n&&(n=o));if(l){e.splice(u--,1);var d=a();void 0!==d&&(t=d)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[i,a,o]}})(),(()=>{s.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;return s.d(t,{a:t}),t}})(),(()=>{s.d=(e,t)=>{for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}})(),(()=>{s.f={},s.e=e=>Promise.all(Object.keys(s.f).reduce(((t,i)=>(s.f[i](e,t),t)),[]))})(),(()=>{s.u=e=>"js/"+e+"."+{99:"0a420f2e",686:"0de16786"}[e]+".js"})(),(()=>{s.miniCssF=e=>"css/"+e+".a28b87fc.css"})(),(()=>{s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{var e={},t="uniform_front:";s.l=(i,a,o,n)=>{if(e[i])e[i].push(a);else{var l,r;if(void 0!==o)for(var d=document.getElementsByTagName("script"),u=0;u<d.length;u++){var c=d[u];if(c.getAttribute("src")==i||c.getAttribute("data-webpack")==t+o){l=c;break}}l||(r=!0,l=document.createElement("script"),l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.setAttribute("data-webpack",t+o),l.src=i),e[i]=[a];var m=(t,s)=>{l.onerror=l.onload=null,clearTimeout(h);var a=e[i];if(delete e[i],l.parentNode&&l.parentNode.removeChild(l),a&&a.forEach((e=>e(s))),t)return t(s)},h=setTimeout(m.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=m.bind(null,l.onerror),l.onload=m.bind(null,l.onload),r&&document.head.appendChild(l)}}})(),(()=>{s.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{s.p="/static/"})(),(()=>{if("undefined"!==typeof document){var e=(e,t,s,i,a)=>{var o=document.createElement("link");o.rel="stylesheet",o.type="text/css";var n=s=>{if(o.onerror=o.onload=null,"load"===s.type)i();else{var n=s&&("load"===s.type?"missing":s.type),l=s&&s.target&&s.target.href||t,r=new Error("Loading CSS chunk "+e+" failed.\n("+l+")");r.code="CSS_CHUNK_LOAD_FAILED",r.type=n,r.request=l,o.parentNode.removeChild(o),a(r)}};return o.onerror=o.onload=n,o.href=t,s?s.parentNode.insertBefore(o,s.nextSibling):document.head.appendChild(o),o},t=(e,t)=>{for(var s=document.getElementsByTagName("link"),i=0;i<s.length;i++){var a=s[i],o=a.getAttribute("data-href")||a.getAttribute("href");if("stylesheet"===a.rel&&(o===e||o===t))return a}var n=document.getElementsByTagName("style");for(i=0;i<n.length;i++){a=n[i],o=a.getAttribute("data-href");if(o===e||o===t)return a}},i=i=>new Promise(((a,o)=>{var n=s.miniCssF(i),l=s.p+n;if(t(n,l))return a();e(i,l,null,a,o)})),a={143:0};s.f.miniCss=(e,t)=>{var s={686:1};a[e]?t.push(a[e]):0!==a[e]&&s[e]&&t.push(a[e]=i(e).then((()=>{a[e]=0}),(t=>{throw delete a[e],t})))}}})(),(()=>{var e={143:0};s.f.j=(t,i)=>{var a=s.o(e,t)?e[t]:void 0;if(0!==a)if(a)i.push(a[2]);else{var o=new Promise(((s,i)=>a=e[t]=[s,i]));i.push(a[2]=o);var n=s.p+s.u(t),l=new Error,r=i=>{if(s.o(e,t)&&(a=e[t],0!==a&&(e[t]=void 0),a)){var o=i&&("load"===i.type?"missing":i.type),n=i&&i.target&&i.target.src;l.message="Loading chunk "+t+" failed.\n("+o+": "+n+")",l.name="ChunkLoadError",l.type=o,l.request=n,a[1](l)}};s.l(n,r,"chunk-"+t,t)}},s.O.j=t=>0===e[t];var t=(t,i)=>{var a,o,[n,l,r]=i,d=0;if(n.some((t=>0!==e[t]))){for(a in l)s.o(l,a)&&(s.m[a]=l[a]);if(r)var u=r(s)}for(t&&t(i);d<n.length;d++)o=n[d],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(u)},i=globalThis["webpackChunkuniform_front"]=globalThis["webpackChunkuniform_front"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})();var i=s.O(void 0,[736],(()=>s(5410)));i=s.O(i)})();
(()=>{"use strict";var e={3400:(e,t,s)=>{var a=s(1957),i=s(7933),o=s(499),l=s(9835),n=s(8401),r=s(6970),d=s(5288);s(9665);const u={key:0,class:"row full-width"},c={key:0,class:"row full-width justify-center tree-mini-item-expand"},m={key:0},p={key:1},h={inheritAttrs:!1},g=Object.assign(h,{__name:"uf-app-navigation",setup(e){const t=(0,l.l1)().use,s=(0,o.iH)([]),i=(0,l.Fl)((()=>{let e=[];return t.base_s.forEach((s=>{if(s.view_s.length>0){let a={id:s.id,type:"base",title:s.title,icon:s.icon,selectable:!1,to:"",children:[]};s.view_s.forEach((e=>{let i={id:e.id,type:"view",title:e.title,icon:e.icon,to:"/"+s.id+"/"+e.id,children:[]};t.decore.queries.data.forEach((t=>{t.base_id==s.id&&t.view_id==e.id&&null==t.parent&&i.children.push(t)})),a.children.push(i)})),e.push(a)}})),e}));function n(e){console.log()}return(e,d)=>{const h=(0,l.up)("q-btn"),g=(0,l.up)("q-toolbar"),_=(0,l.up)("q-icon"),w=(0,l.up)("q-item-section"),f=(0,l.up)("q-item"),b=(0,l.up)("q-chip"),y=(0,l.up)("q-tree"),v=(0,l.up)("q-drawer");return(0,l.wg)(),(0,l.j4)(v,{"show-if-above":"",model:!0,width:300,side:"left",breakpoint:0,bordered:"",mini:(0,o.SU)(t).drawer_mini},{default:(0,l.w5)((()=>[(0,l.Wm)(g,{class:"bg-grey-2"},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{dense:"",flat:"",round:"",icon:(0,o.SU)(t).drawer_icon,onClick:d[0]||(d[0]=e=>(0,o.SU)(t).toogleLayoutDrawer())},null,8,["icon"])])),_:1}),(0,l.Wm)(y,{nodes:(0,o.SU)(i),"node-key":"id","label-key":"title",expanded:(0,o.SU)(t).expanded_nodes,"onUpdate:expanded":d[1]||(d[1]=e=>(0,o.SU)(t).expanded_nodes=e),selected:s.value,"onUpdate:selected":d[2]||(d[2]=e=>s.value=e),"no-connectors":"",accordion:""},{"default-header":(0,l.w5)((e=>["base"==e.node.type?((0,l.wg)(),(0,l.iD)("div",u,[(0,l.Wm)(f,{class:"tree-item-base full-width row",dense:"",onClick:t=>n(e.node.id)},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{class:"items-center",avatar:""},{default:(0,l.w5)((()=>[(0,l.Wm)(_,{class:"tree-item-base-icon",name:e.node.icon},null,8,["name"])])),_:2},1024),(0,l.Wm)(w,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,r.zw)(e.node.title),1)])),_:2},1024),e.node.children.length>0?((0,l.wg)(),(0,l.j4)(w,{key:0,avatar:""},{default:(0,l.w5)((()=>[(0,o.SU)(t).expanded_nodes.includes(e.node.id)?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(_,{key:0,name:"mdi-chevron-down"})),(0,o.SU)(t).expanded_nodes.includes(e.node.id)?((0,l.wg)(),(0,l.j4)(_,{key:1,name:"mdi-chevron-up"})):(0,l.kq)("",!0)])),_:2},1024)):(0,l.kq)("",!0)])),_:2},1032,["onClick"]),(0,o.SU)(t).drawer_mini?((0,l.wg)(),(0,l.iD)("div",c,[(0,o.SU)(t).expanded_nodes.includes(e.node.id)?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(_,{key:0,name:"mdi-chevron-down"})),(0,o.SU)(t).expanded_nodes.includes(e.node.id)?((0,l.wg)(),(0,l.j4)(_,{key:1,name:"mdi-chevron-up"})):(0,l.kq)("",!0)])):(0,l.kq)("",!0)])):(0,l.kq)("",!0),"view"==e.node.type?((0,l.wg)(),(0,l.j4)(f,{key:1,class:"tree-item-view full-width row",dense:"",exact:"",to:e.node.to},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{class:"items-center",avatar:""},{default:(0,l.w5)((()=>[(0,l.Wm)(_,{class:"tree-item-view-icon",name:e.node.icon},null,8,["name"])])),_:2},1024),(0,l.Wm)(w,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,r.zw)(e.node.title),1)])),_:2},1024),e.node.children.length>0?((0,l.wg)(),(0,l.j4)(w,{key:0,avatar:""},{default:(0,l.w5)((()=>[(0,o.SU)(t).expanded_nodes.includes(e.node.id)?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(_,{key:0,name:"mdi-chevron-down",onClick:(0,a.iM)((s=>(0,o.SU)(t).expanded_nodes.push(e.node.id)),["prevent"])},null,8,["onClick"])),(0,o.SU)(t).expanded_nodes.includes(e.node.id)?((0,l.wg)(),(0,l.j4)(_,{key:1,name:"mdi-chevron-up",onClick:(0,a.iM)((s=>(0,o.SU)(t).expanded_nodes.pop(e.node.id)),["prevent"])},null,8,["onClick"])):(0,l.kq)("",!0)])),_:2},1024)):(0,l.kq)("",!0)])),_:2},1032,["to"])):(0,l.kq)("",!0),"user"!=e.node.type||(0,o.SU)(t).drawer_mini?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(f,{key:2,class:"tree-item-query full-width row",dense:"",exact:"",to:JSON.parse(e.node.to)},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{class:"items-center",avatar:""}),(0,l.Wm)(w,null,{default:(0,l.w5)((()=>[(0,l.Wm)(b,{class:"tree-item-query-chip",style:(0,r.j5)({"padding-left":16*e.node.depth+"px"}),outline:"",label:e.node.title,title:e.node.title},null,8,["style","label","title"])])),_:2},1024),(0,l.Wm)(w,{avatar:""},{default:(0,l.w5)((()=>[e.node.children.length>0?((0,l.wg)(),(0,l.iD)("div",m,[(0,o.SU)(t).expanded_nodes.includes(e.node.id)?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(_,{key:0,name:"mdi-chevron-down",onClick:s=>(0,o.SU)(t).expanded_nodes.push(e.node.id)},null,8,["onClick"])),(0,o.SU)(t).expanded_nodes.includes(e.node.id)?((0,l.wg)(),(0,l.j4)(_,{key:1,name:"mdi-chevron-up",onClick:s=>(0,o.SU)(t).expanded_nodes.pop(e.node.id)},null,8,["onClick"])):(0,l.kq)("",!0)])):((0,l.wg)(),(0,l.iD)("div",p,[0==e.node.children.length?((0,l.wg)(),(0,l.j4)(_,{key:0,class:"tree-item-query-icon",dense:"",round:"",flat:"",name:"mdi-delete",onClick:(0,a.iM)((s=>(0,o.SU)(t).decore.queries.removeQuery(e.node.id)),["prevent"])},null,8,["onClick"])):(0,l.kq)("",!0)]))])),_:2},1024)])),_:2},1032,["to"]))])),_:1},8,["nodes","expanded","selected"]),(0,l.Wm)(g,{class:"app-navigation-footer bg-grey-2"})])),_:1},8,["mini"])}}});var _=s(906),w=s(1663),f=s(8879),b=s(1893),y=s(490),v=s(1233),k=s(2857),U=s(7691),S=s(9984),q=s.n(S);const D=g,j=D;q()(g,"components",{QDrawer:_.Z,QToolbar:w.Z,QBtn:f.Z,QTree:b.Z,QItem:y.Z,QItemSection:v.Z,QIcon:k.Z,QChip:U.Z});const x={key:0,style:{width:"300px"}},V={class:"row justify-end items-center"},W={class:"col-auto"},Z={key:0,class:"entry-text"},Q={key:1,class:"entry-text"},C={class:"col-auto"},E={inheritAttrs:!1},I=Object.assign(E,{__name:"uf-app-actor",setup(e){const t=(0,l.l1)().use,s=(0,l.Fl)((()=>{let e=null;return t.decore.actor.active_s.length>0?e=t.decore.actor.active_s[t.decore.actor.active_s.length-1]:t.decore.actor.item_s.length>0&&(e=t.decore.actor.item_s[t.decore.actor.item_s.length-1]),e}));return(e,a)=>{const i=(0,l.up)("q-circular-progress"),n=(0,l.up)("q-icon"),d=(0,l.up)("q-badge"),u=(0,l.up)("q-btn");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,o.SU)(s)?((0,l.wg)(),(0,l.iD)("div",x,[(0,l._)("div",V,[(0,l._)("div",W,[(0,o.SU)(s).result?((0,l.wg)(),(0,l.iD)("div",Q,(0,r.zw)((0,o.SU)(s).result),1)):((0,l.wg)(),(0,l.iD)("div",Z,(0,r.zw)((0,o.SU)(s).title),1))]),(0,l._)("div",C,[!(0,o.SU)(s).finished&&(0,o.SU)(s).progress>0?((0,l.wg)(),(0,l.j4)(i,{key:0,thickness:.25,value:(0,o.SU)(s).progress,size:"21px"},null,8,["thickness","value"])):(0,o.SU)(s).finished||0!==(0,o.SU)(s).progress?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(i,{key:1,indeterminate:"",thickness:.25,size:"21px"},null,8,["thickness"])),(0,o.SU)(s).finished&&(0,o.SU)(s).success?((0,l.wg)(),(0,l.j4)(n,{key:2,size:"21px",name:"mdi-check-circle",color:"info"})):(0,o.SU)(s).finished&&!(0,o.SU)(s).success?((0,l.wg)(),(0,l.j4)(n,{key:3,size:"21px",name:"mdi-alert-circle",color:"warning"})):(0,l.kq)("",!0)])])])):(0,l.kq)("",!0),(0,l.Wm)(u,{dense:"",flat:"",round:"",icon:"mdi-menu-open"},{default:(0,l.w5)((()=>[(0,o.SU)(t).decore.actor.active_s.length>1?((0,l.wg)(),(0,l.j4)(d,{key:0,floating:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,r.zw)((0,o.SU)(t).decore.actor.active_s.length),1)])),_:1})):(0,l.kq)("",!0)])),_:1})],64)}}});var A=s(1639),F=s(2074),O=s(4458),M=s(3190),z=s(3302),T=s(990);const B=(0,A.Z)(I,[["__scopeId","data-v-07f6c40b"]]),P=B;q()(I,"components",{QDialog:F.Z,QCard:O.Z,QCardSection:M.Z,QCircularProgress:z.Z,QIcon:k.Z,QBtn:f.Z,QBadge:T.Z});var Y=s(6755);const H={inheritAttrs:!1},R=Object.assign(H,{__name:"uf-app-layout",setup(e){const t=(0,l.l1)().use,s=(0,l.Fl)((()=>{let e=t.route.params.view_id+JSON.stringify(t.route.query);return e}));return(e,a)=>{const i=(0,l.up)("q-toolbar-title"),n=(0,l.up)("q-space"),u=(0,l.up)("q-btn"),c=(0,l.up)("q-toolbar"),m=(0,l.up)("q-header"),p=(0,l.up)("router-view"),h=(0,l.up)("q-page-container"),g=(0,l.up)("q-footer"),_=(0,l.up)("q-layout");return(0,l.wg)(),(0,l.j4)(_,null,{default:(0,l.w5)((()=>[(0,l.Wm)(d.Z,{use:(0,o.SU)(t)},null,8,["use"]),(0,o.SU)(t).shrink?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(m,{key:0,bordered:"",class:"bg-black text-white"},{default:(0,l.w5)((()=>[(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Wm)(i,null,{default:(0,l.w5)((()=>[(0,l.Uk)((0,r.zw)((0,o.SU)(t).title),1)])),_:1}),(0,l.Wm)(n),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,o.SU)(t).dialog_s,(e=>((0,l.wg)(),(0,l.j4)(u,{key:e.id,flat:"",dense:"",round:"",icon:e.icon,label:e.title,onClick:s=>(0,o.SU)(t).toogleAppDialog(e.id)},null,8,["icon","label","onClick"])))),128))])),_:1})])),_:1})),(0,o.SU)(t).shrink?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(j,{key:1,use:(0,o.SU)(t)},null,8,["use"])),(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[((0,l.wg)(),(0,l.j4)(p,{key:(0,o.SU)(s)}))])),_:1}),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,o.SU)(t).dialog_s,(e=>((0,l.wg)(),(0,l.j4)(Y.Z,{key:e.id,id:e.id},null,8,["id"])))),128)),(0,l.Wm)(g,{bordered:"",class:"bg-grey-8 text-white"},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{dense:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,r.zw)((0,o.SU)(t).show_dialog_s)+" ",1),(0,l.Wm)(n),(0,l.Wm)(P,{use:(0,o.SU)(t)},null,8,["use"])])),_:1})])),_:1})])),_:1})}}});var K=s(7605),L=s(6602),N=s(1973),$=s(136),J=s(2133),G=s(1378);const X=R,ee=X;q()(R,"components",{QLayout:K.Z,QHeader:L.Z,QToolbar:w.Z,QToolbarTitle:N.Z,QSpace:$.Z,QBtn:f.Z,QPageContainer:J.Z,QFooter:G.Z});var te=s(5360),se=s(8339);class ae extends te.y{constructor(e){super(e),this.ql={},this.router=(0,se.tv)(),this.route=(0,se.yj)(),this.drawer_icon="mdi-backburger",this.drawer_mini=!1,this.expanded_nodes=[],this.shrink=!0,this.show_dialog_s=[]}toogleLayoutDrawer(){this.drawer_mini=!this.drawer_mini,this.drawer_mini?this.drawer_icon="mdi-forwardburger":this.drawer_icon="mdi-backburger"}toogleAppDialog(e){this.ref[e].showDialog()}}const ie={__name:"App",setup(e){const t=(0,o.qj)(new ae("app"));(0,n.Z)((()=>({title:t.title})));const s=e=>{if("Enter"==e.key&&t.show_dialog_s.length>0){let e=t.show_dialog_s[t.show_dialog_s.length-1];t.ref[e].submitable&&t.ref[e].submitWidgets()}if("Escape"==e.key&&t.show_dialog_s.length>0){let e=t.show_dialog_s[t.show_dialog_s.length-1];t.ref[e].closeable&&t.ref[e].closeDialog()}};return(0,l.bv)((()=>{window.addEventListener("keyup",s)})),(0,l.Jd)((()=>{window.removeEventListener("keyup",s)})),(e,s)=>((0,l.wg)(),(0,l.j4)(ee,{use:t},null,8,["use"]))}},oe=ie,le=oe;var ne=s(3340),re=s(1809);const de=(0,ne.h)((()=>{const e=(0,re.WB)();return e})),ue=[{name:"view",path:"/:base_id/:view_id",component:()=>Promise.all([s.e(736),s.e(495)]).then(s.bind(s,4350)),props:!0},{name:"dialog",path:"/:base_id/:view_id/:dialog_id/:item_id",component:()=>Promise.all([s.e(736),s.e(495)]).then(s.bind(s,4350)),props:!0},{name:"subdialog",path:"/:base_id/:view_id/:dialog_id/:item_id/:subdialog_id/:subitem_id",component:()=>Promise.all([s.e(736),s.e(495)]).then(s.bind(s,4350)),props:!0},{name:"login",path:"/login",redirect:"/dbi_mayor_priv/bi_login_view/dbi_login_dialog/empty"},{path:"/:catchAll(.*)*",component:()=>s.e(65).then(s.bind(s,7065))}],ce=ue;s(198);const me=(0,ne.BC)((function(){const e=se.PO,t=(0,se.p7)({scrollBehavior:()=>({left:0,top:0}),routes:ce,history:e("/")});return t}));async function pe(e,t){const s=e(le);s.use(i.Z,t);const a="function"===typeof de?await de({}):de;s.use(a);const l=(0,o.Xl)("function"===typeof me?await me({store:a}):me);return a.use((({store:e})=>{e.router=l})),{app:s,store:a,router:l}}const he={config:{}},ge="/static/",_e=/\/\//,we=e=>(ge+e).replace(_e,"/");async function fe({app:e,router:t,store:s},a){let i=!1;const o=e=>{try{return we(t.resolve(e).href)}catch(s){}return Object(e)===e?null:e},l=e=>{if(i=!0,"string"===typeof e&&/^https?:\/\//.test(e))return void(window.location.href=e);const t=o(e);null!==t&&(window.location.href=t)},n=window.location.href.replace(window.location.origin,"");for(let d=0;!1===i&&d<a.length;d++)try{await a[d]({app:e,router:t,store:s,ssrContext:null,redirect:l,urlPath:n,publicPath:ge})}catch(r){return r&&r.url?void l(r.url):void console.error("[Quasar] boot error:",r)}!0!==i&&(e.use(t),e.mount("#q-app"))}pe(a.ri,he).then((e=>{const[t,a]=void 0!==Promise.allSettled?["allSettled",e=>e.map((e=>{if("rejected"!==e.status)return e.value.default;console.error("[Quasar] boot error:",e.reason)}))]:["all",e=>e.map((e=>e.default))];return Promise[t]([Promise.resolve().then(s.bind(s,8619))]).then((t=>{const s=a(t).filter((e=>"function"===typeof e));fe(e,s)}))}))},8619:(e,t,s)=>{s.r(t),s.d(t,{default:()=>u});var a=s(3340),i=s(9981),o=s.n(i),l=s(198),n=document.getElementsByTagName("meta")[5].content,r=document.getElementsByTagName("meta")[6].content,d="";d="{{port}}"==n?r:n,o().defaults.baseURL="http://localhost:"+d;const u=(0,a.xr)((async({router:e,store:t})=>{t.use((()=>({axios:o()})));const s=(0,l.n)();await s.loginUser(),await s.setMeta(),await s.setSources(),e.addRoute({path:"/",redirect:s.meta.app.base_id+"/"+s.meta.app.view_id})}))},1610:(e,t,s)=>{s.d(t,{V:()=>a});s(9665);class a{constructor(e,t,s,a,i){this.items_mode=!1,this.route=e,this.source=t,this.parent_source=s,this.field_s=a,this.query=i,this.search="",this.item={},this.item_s=[],this.rel_item_s={},this.select_s=[],this.count=0,this.errors={},this.setErrors({}),this.loaded=!1}export(){let e={};return e.item=this.item,e.select_s=this.select_s,e.field_s=this.field_s,e}setItem(e){null==e&&(e=this.route.params.item_id),this.loadItem(this.parent_source,e).then((e=>{let t=e.data;this.parent_source.model!=this.source.model?this.loadItem(this.source,"default").then((e=>{this.item=e.data,this.parent_source.rel_field_s.forEach((e=>{if(e.class.includes("ForeignKeyField")&&this.source.model==e.model){let s=e.name+"__eq";this.query[s]=t.id,this.item[e.name]={...t}}if(e.class.includes("ManyToManyField")&&this.source.model==e.rel_model){let s=e.backref+"__id__eq";this.query[s]=t.id}})),this.setRelItems(),this.setItems(),this.loaded=!0})):(this.item=t,this.setRelItems(),this.setItems(),this.loaded=!0)}))}loadItem(e,t){return"empty"==t?e.getDefault():"first"==t?e.getFirst():"last"==t?e.getLast():"default"==t?e.getDefault():e.getItem(t)}setItems(){this.items_mode?this.source.getItems(this.query).then((e=>{this.item_s=e.data.item_s,this.purgeSelects(),this.count=e.data.count})):(this.item_s=[],this.select_s=[],this.count=0)}setRelItems(){this.field_s.forEach((e=>{if("ForeignKeyField"==e.class){let t=this.source.getRefByModel(e.rel_model);t.getRelItems(e.choice_query).then((t=>{this.rel_item_s[e.name]=t.data}))}else if("BackrefAccessor"==e.class){let t=this.source.getRefByModel(e.rel_model);this.item.id&&(e.choice_query[e.field.name+"__eq"]=[null,this.item.id]),t.getRelItems(e.choice_query).then((t=>{this.rel_item_s[e.name]=t.data}))}else if("ManyToManyField"==e.class){let t=this.source.getRefByModel(e.rel_model);t.getRelItems(e.choice_query).then((t=>{this.rel_item_s[e.name]=t.data}))}}))}purgeSelects(){let e=[];for(const t of this.select_s)this.item_s.includes(t)&&e.push(t);this.select_s=e}setErrors(e){for(const t of this.field_s)t.name in e?this.errors[t.name]=e[t.name]:this.errors[t.name]=[]}}},198:(e,t,s)=>{s.d(t,{n:()=>d});s(9665);var a=s(1809),i=s(9981),o=s.n(i);class l{constructor(e,t){this.id=e.id,this.model=e.model,this.field_s=e.field_s,this.rel_field_s=e.rel_field_s,this.schema=e.schema,this.ref=t}getItem(e){return e?o().get("/get_item/"+this.id+"/"+e):Promise.resolve({data:null})}getDefault(){return o().get("/get_default/"+this.id)}getFirst(){return o().get("/get_first/"+this.id)}getLast(){return o().get("/get_last/"+this.id)}getItems(e){return o().post("/post_item_s/"+this.id,e)}getRelItems(e){return o().post("/post_rel_item_s/"+this.id,e)}getFilterValues(e,t,s){return o().post("/post_filter_value_s/"+this.id,{query:e,attr:t,rel_attr:s})}getRefByModel(e){let t=null;for(const s in this.ref)this.ref[s].model==e&&(t=this.ref[s]);return t}}class n{constructor(){this.data=[],this.setData()}setData(){o().get("/get_query_s").then((e=>{this.data=e.data}))}saveQuery(e){o().post("/post_save_query/"+e.params.base_id+"/"+e.params.view_id,e.query).then((e=>{"success"==e.data&&this.setData()}))}removeQuery(e){o().get("get_remove_query/"+e).then((e=>{"success"==e.data&&this.setData()}))}}class r{constructor(){this.active_s=[],this.item_s=[],this.interval=null}async callGetActorActives(e){this.active_s.push(e),this.item_s.push(e),this.interval||(this.interval=setInterval((()=>{this.getActorActives(),0===this.active_s.length&&(clearInterval(this.interval),this.interval=null)}),1e3))}getActorActives(){o().get("/get_actor_active_s").then((e=>{this.active_s=e.data}))}getActorItems(){o().get("/get_actor_item_s").then((e=>{this.item_s=e.data}))}async postAction(e,t){let s={};return this.callGetActorActives({id:"init",title:e.title,desc:e.desc,finished:!1,progress:0}),"standard"==e.type||"submit"==e.type?await o().post("/post_action/"+e.id,t).then((e=>{null!=e.data.token&&(this.loginUser(e.data.token),e.data.token=null),s=e.data,this.getActorItems()})).catch((e=>{401==e.response.status&&this.logoutUser(),console.log(e)})):"file"==e.type?o().post("/post_action/"+e.id,t,{responseType:"blob"}).then((e=>{let t=e.headers["content-disposition"].split(";")[1].split("=")[1];this.downloadFile(e.data,t)})).catch((e=>{401==e.response.status&&this.logoutUser(),console.log(e)})):await o().post("/post_action/"+e.id,null).then((e=>{s=e.data,this.getActorItems()})).catch((e=>{401==e.response.status&&this.logoutUser()})),s}loginUser(e){"remove"!=e?(localStorage.setItem("user_token",e),window.location.href="/"):(localStorage.removeItem("user_token"),window.location.href="/")}logoutUser(){localStorage.removeItem("user_token"),window.location.href="/"}downloadFile(e,t){const s=URL.createObjectURL(e),a=document.createElement("a");a.href=s,a.download=t,a.click()}}const d=(0,a.Q_)("decore",{state:()=>({meta:{},app:{},use:{},source:{},queries:new n,actor:new r}),getters:{},actions:{clear(){this.use={},this.source={}},getMetas(e){let t=[];return e.forEach((e=>{t.push(this.meta[e])})),t},async loginUser(){const e="guest@decore.base",t="password",s=localStorage.getItem("user_token");s?this.axios.defaults.headers.common["Authorization"]=`Bearer ${s}`:await this.axios.post("/guest_login",{username:e,password:t}).then((e=>{this.axios.defaults.headers.common["Authorization"]=`Bearer ${e.data.token}`,console.log(e.data.result)})).catch((e=>{console.log(e.response.data.result)}))},logoutUser(){localStorage.removeItem("user_token"),window.location.href="/"},async setMeta(){await this.axios.get("/get_meta").then((e=>{this.axios.defaults.headers.common["X-CSRFToken"]=e.data.csrf_token,this.meta=e.data})).catch((e=>{401==e.response.status&&this.logoutUser(),422==e.response.status&&this.logoutUser()})),Object.values(this.meta).forEach((e=>{e.kind.includes("base")&&(this.meta[e.parent_id].base_s=this.meta[e.parent_id].base_s||[],this.meta[e.parent_id].base_s=[...this.meta[e.parent_id].base_s,e]),e.kind.includes("view")&&(this.meta[e.parent_id].view_s=this.meta[e.parent_id].view_s||[],this.meta[e.parent_id].view_s=[...this.meta[e.parent_id].view_s,e]),e.kind.includes("dialog")&&(this.meta[e.parent_id].dialog_s=this.meta[e.parent_id].dialog_s||[],this.meta[e.parent_id].dialog_s=[...this.meta[e.parent_id].dialog_s,e]),e.kind.includes("widget")&&(this.meta[e.parent_id].widget_s=this.meta[e.parent_id].widget_s||[],this.meta[e.parent_id].widget_s=[...this.meta[e.parent_id].widget_s,e]),e.kind.includes("action")&&(this.meta[e.parent_id].action_s=this.meta[e.parent_id].action_s||[],this.meta[e.parent_id].action_s=[...this.meta[e.parent_id].action_s,e]),e.kind.includes("element")&&(this.meta[e.parent_id].element_s=this.meta[e.parent_id].element_s||[],this.meta[e.parent_id].element_s=[...this.meta[e.parent_id].element_s,e])}))},async setSources(){this.meta.app.base_s.forEach((e=>{let t=new l(e,this.source);this.source[e.id]=t}))},getSourceByModel(e){for(const t of Object.values(this.source))if(e==t.model)return t},getSourceByMetaID(e){return this.source[this.meta[e].source_id]},regApp(e){this.app=e},regUse(e){this.use[e.id]=e}}})},3852:(e,t,s)=>{s.d(t,{B:()=>i});var a=s(5360);class i extends a.y{constructor(e){super(e),this.actor=this.decore.actor}async trigger(){let e=await this.actor.postAction(this,this.getData("parent"));return this.refreshRouteItems(this.parent_id),e}refreshRouteItems(e){const t=this.ref[e];t.data&&t.data.setItems(),"app"!=t.parent_id&&this.refreshRouteItems(t.parent_id)}getData(e){let t={};if("this"==e)t[this.parent_id]=this.ref[this.parent_id].data.export();else if("parent"==e){var s=this.parent_id;while("app"!=s)for(const e of Object.values(this.ref))e.id==s&&(e.data&&(t[e.id]=e.data.export()),s=e.parent_id)}else if("all"==e)for(const a of Object.values(this.ref))a.data&&(t[a.id]=a.data.export());return t}}},5360:(e,t,s)=>{s.d(t,{y:()=>i});var a=s(198);class i{constructor(e){this.decore=(0,a.n)(),this.setProperties(this.decore.meta[e]),this.registerUse()}setProperties(e){var t=Object.keys(e);t.forEach((t=>{this[t]=e[t]}))}registerUse(){"app"===this.id?(this.decore.regApp(this),this.ref=this.decore.use):(this.decore.regUse(this),this.app=this.decore.app,this.ref=this.decore.use)}}},6755:(e,t,s)=>{s.d(t,{Z:()=>at});var a=s(9835),i=s(499),o=(s(9665),s(5360));class l extends o.y{constructor(e){super(e),this.ql={},this.main=this.getMain(),this.show=!1,this.sum_widget_s=this.getSumWidgets(),this.closeable=this.getCloseable(),this.submitable=this.getSubmitable(),this.normalizeWidgets()}getMain(){let e=!1;return"view"==this.parent_kind&&(e=!0),e}getSumWidgets(){let e=[];return this.widget_s.forEach((t=>{e.push(t),t.widget_s.forEach((t=>{e.push(t)}))})),e}normalizeWidgets(){for(const e of this.sum_widget_s)e.parent_id=this.id}getCloseable(){let e=!1;return("app"==this.parent_kind||"empty"!=this.activator&&"first"!=this.activator&&"last"!=this.activator)&&(e=!0),e}getSubmitable(){let e=!1;return this.sum_widget_s.forEach((t=>{t.action_s.forEach((t=>{"submit"==t.type&&(e=!0)}))})),e}async showDialog(){this.main,this.widget_s.forEach((e=>{this.ref[e.id].initWidget(),e.widget_s.forEach((e=>{this.ref[e.id].initWidget()}))})),this.app.show_dialog_s.push(this.id),this.show=!0}async submitWidgets(){let e=!0;for(const t of this.widget_s){await this.ref[t.id].submit(),e=1==e&&1==this.ref[t.id].valid;for(const s of t.widget_s)await this.ref[s.id].submit(),e=1==e&&1==this.ref[t.id].valid}e&&this.closeDialog()}closeDialog(){1==this.closeable&&("app"==this.parent_kind?this.hideDialog():"view"==this.parent_kind?this.app.router.push({name:"view",params:{base_id:this.app.route.params.base_id,view_id:this.app.route.params.view_id},query:this.app.route.query}):"widget"==this.parent_kind&&this.app.router.push({name:"dialog",params:{dialog_id:this.app.route.params.dialog_id,item_id:this.app.route.params.item_id},query:this.app.route.query}))}hideDialog(){this.show=!1,this.app.show_dialog_s=this.app.show_dialog_s.filter((e=>e!=this.id))}}var n=s(6970),r=s(1957),d=s(5288);const u={class:"dialog-content"},c={inheritAttrs:!1},m=Object.assign(c,{__name:"uf-dialog-layout",setup(e){const t=(0,a.l1)().use,s=(0,a.Fl)((()=>{let e=0;return t.app.ql.hasOwnProperty("header")&&(e=t.app.ql.header.size),t.app.ql.hasOwnProperty("footer")&&(e+=t.app.ql.footer.size),e})),o=(0,a.Fl)((()=>{let e="none";return 1==t.show&&(e="block"),e}));return(e,l)=>{const c=(0,a.up)("q-toolbar-title"),m=(0,a.up)("q-space"),p=(0,a.up)("q-btn"),h=(0,a.up)("q-toolbar"),g=(0,a.up)("q-header"),_=(0,a.up)("q-footer"),w=(0,a.up)("q-layout");return(0,a.wg)(),(0,a.iD)("div",{style:(0,n.j5)({display:(0,i.SU)(o)})},[(0,a.Wm)(w,{container:"",style:(0,n.j5)({height:`calc(100vh - ${(0,i.SU)(s)}px)`})},{default:(0,a.w5)((()=>[(0,a.Wm)(d.Z,{use:(0,i.SU)(t)},null,8,["use"]),(0,a.Wm)(g,{reveal:""},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{class:"bg-grey-2"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{class:"text-black"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)((0,i.SU)(t).title),1)])),_:1}),(0,a.Wm)(m),(0,i.SU)(t).closeable?((0,a.wg)(),(0,a.j4)(p,{key:0,class:"text-black",round:"",flat:"",dense:"",onClick:l[0]||(l[0]=e=>(0,i.SU)(t).closeDialog()),icon:"close"})):(0,a.kq)("",!0)])),_:1})])),_:1}),(0,a._)("div",u,[(0,a.WI)(e.$slots,"dialog-content")]),(0,a.Wm)(_,{reveal:""},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{class:"bg-grey-2"},{default:(0,a.w5)((()=>[(0,i.SU)(t).submitable?((0,a.wg)(),(0,a.j4)(p,{key:0,class:"text-black",label:"Submit",flat:"",onClick:l[1]||(l[1]=e=>(0,i.SU)(t).submitWidgets()),onKeyup:l[2]||(l[2]=(0,r.D2)((e=>(0,i.SU)(t).submitWidgets()),["enter"]))})):(0,a.kq)("",!0),(0,i.SU)(t).closeable?((0,a.wg)(),(0,a.j4)(p,{key:1,class:"text-black",label:"Close",flat:"",onClick:l[3]||(l[3]=e=>(0,i.SU)(t).closeDialog()),onKeyup:l[4]||(l[4]=(0,r.D2)((e=>(0,i.SU)(t).closeDialog()),["esc"]))})):(0,a.kq)("",!0)])),_:1})])),_:1})])),_:3},8,["style"])],4)}}});var p=s(7605),h=s(6602),g=s(1663),_=s(1973),w=s(136),f=s(8879),b=s(1378),y=s(9984),v=s.n(y);const k=m,U=k;v()(m,"components",{QLayout:p.Z,QHeader:h.Z,QToolbar:g.Z,QToolbarTitle:_.Z,QSpace:w.Z,QBtn:f.Z,QFooter:b.Z});const S={key:0,class:"overlay"},q={inheritAttrs:!1},D=Object.assign(q,{__name:"uf-dialog-display",setup(e){const t=(0,a.l1)().use,s=(0,a.Fl)((()=>{let e=1;return t.display.includes("full")&&(e=1),t.display.includes("half")&&(e=.5),e})),o=(0,a.Fl)((()=>{let e="";return t.app.shrink?e="stretch-dialog":"app"==t.parent_kind?e="app-dialog":"view"==t.parent_kind?e="main-dialog":"widget"==t.parent_kind&&(e="sub-dialog"),e})),l=(0,a.Fl)((()=>{let e=t.app.ql.totalWidth-t.app.ql.left.offset-14;return e})),r=`\n  .q-drawer {\n    top: ${t.app.ql.header.size}px;\n    bottom: ${t.app.ql.footer.size}px;\n  }\n`,d=document.createElement("style");return d.textContent=r,document.head.appendChild(d),(e,r)=>{const d=(0,a.up)("q-drawer");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,i.SU)(t).show&&!(0,i.SU)(t).main?((0,a.wg)(),(0,a.iD)("div",S)):(0,a.kq)("",!0),(0,a._)("div",{class:(0,n.C_)((0,i.SU)(o))},[(0,i.SU)(t).display.includes("draw")?((0,a.wg)(),(0,a.j4)(d,{key:0,modelValue:(0,i.SU)(t).show,"onUpdate:modelValue":r[0]||(r[0]=e=>(0,i.SU)(t).show=e),bordered:"",overlay:"",persistent:"",side:"right",breakpoint:0,width:(0,i.SU)(l)*(0,i.SU)(s)},{default:(0,a.w5)((()=>[(0,a.Wm)(U,{use:(0,i.SU)(t)},{"dialog-content":(0,a.w5)((()=>[(0,a.WI)(e.$slots,"dialog-content")])),_:3},8,["use"])])),_:3},8,["modelValue","width"])):(0,a.kq)("",!0)],2)],64)}}});var j=s(906);const x=D,V=x;v()(D,"components",{QDrawer:j.Z});var W=s(1610);class Z extends o.y{constructor(e){super(e),this.data=(0,i.qj)(new W.V(this.app.route,this.decore.source[this.source_id],this.getParentSource(this.id),this.active_s,{})),this.form_ref=void 0,this.composer_ref=void 0,this.valid=!0}getParentSource(e){let t=this.decore.meta[e];return"view"==t.kind||"app"==t.parent_kind?this.decore.source[t.source_id]:this.getParentSource(t.parent_id)}initWidget(){this.data.loaded=!1,this.data.setErrors({}),Object.values(this.app.route.params).includes(this.parent_id)?this.data.setItem(null):this.data.setItem(this.decore.meta[this.parent_id].activator)}async submit(){for(const e of this.action_s)if("submit"==e.type){let t=await this.ref[e.id].trigger();this.data.setErrors(t.errors),this.valid=!(Object.keys(t.errors).length>0)}}getErrorMessage(e){let t="";for(const s of this.data.errors[e])t+=s;return t}}var Q=s(3852);const C={key:0},E={key:1},I={key:2},A={key:3},F={key:4},O={key:5},M={inheritAttrs:!1},z=Object.assign(M,{__name:"uf-widget-composer",setup(e){const t=(0,a.l1)().use;return(e,s)=>{const o=(0,a.up)("q-checkbox"),l=(0,a.up)("q-field"),r=(0,a.up)("q-form");return(0,a.wg)(),(0,a.j4)(r,{greedy:"",ref:e=>{(0,i.SU)(t).refComposer(e)}},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,i.SU)(t).compose_store.el,(e=>((0,a.wg)(),(0,a.iD)("span",{key:e.id},["p"==e.type?((0,a.wg)(),(0,a.iD)("p",C,(0,n.zw)((0,i.SU)(t).item[e.id]),1)):(0,a.kq)("",!0),"h1"==e.type?((0,a.wg)(),(0,a.iD)("h1",E,(0,n.zw)((0,i.SU)(t).item[e.id]),1)):(0,a.kq)("",!0),"h2"==e.type?((0,a.wg)(),(0,a.iD)("h2",I,(0,n.zw)((0,i.SU)(t).item[e.id]),1)):(0,a.kq)("",!0),"h3"==e.type?((0,a.wg)(),(0,a.iD)("h3",A,(0,n.zw)((0,i.SU)(t).item[e.id]),1)):(0,a.kq)("",!0),"h4"==e.type?((0,a.wg)(),(0,a.iD)("h4",F,(0,n.zw)((0,i.SU)(t).item[e.id]),1)):(0,a.kq)("",!0),"h5"==e.type?((0,a.wg)(),(0,a.iD)("h5",O,(0,n.zw)((0,i.SU)(t).item[e.id]),1)):(0,a.kq)("",!0),"checkbox"==e.type?((0,a.wg)(),(0,a.j4)(l,{key:6,"hide-bottom-space":"",dense:"",borderless:"",modelValue:(0,i.SU)(t).item[e.id],"onUpdate:modelValue":s=>(0,i.SU)(t).item[e.id]=s,rules:(0,i.SU)(t).getRules(e.id),"lazy-rules":"ondemand"},{default:(0,a.w5)((()=>[(0,a.Wm)(o,{modelValue:(0,i.SU)(t).item[e.id],"onUpdate:modelValue":[s=>(0,i.SU)(t).item[e.id]=s,s=>(0,i.SU)(t).compose_store.sendElement(e.id,"update",(0,i.SU)(t).item[e.id],(0,i.SU)(t).compose_store.el)],label:e.title,disable:e.disable},null,8,["modelValue","onUpdate:modelValue","label","disable"])])),_:2},1032,["modelValue","onUpdate:modelValue","rules"])):(0,a.kq)("",!0)])))),128))])),_:1},512)}}});var T=s(8326),B=s(8149),P=s(1221);const Y=z,H=Y;v()(z,"components",{QForm:T.Z,QField:B.Z,QCheckbox:P.Z});const R={key:0},K={key:1},L={key:2},N={inheritAttrs:!1},$=Object.assign(N,{__name:"uf-widget-layout",setup(e){const t=(0,a.l1)().use;return(e,s)=>{const o=(0,a.up)("q-space"),l=(0,a.up)("q-icon"),r=(0,a.up)("q-toolbar"),d=(0,a.up)("q-card-section"),u=(0,a.up)("q-btn"),c=(0,a.up)("q-card-actions"),m=(0,a.up)("q-separator"),p=(0,a.up)("q-card");return(0,a.wg)(),(0,a.j4)(p,{class:"widget-card",flat:""},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{class:"widget-card-toolbar"},{default:(0,a.w5)((()=>[(0,a._)("h5",null,(0,n.zw)((0,i.SU)(t).title),1),(0,a.Wm)(o),(0,a.Wm)(l,{name:(0,i.SU)(t).icon},null,8,["name"])])),_:1}),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,i.SU)(t).layout,(s=>((0,a.wg)(),(0,a.iD)("span",{key:s},["c"==s?((0,a.wg)(),(0,a.iD)("span",R,[(0,a.Wm)(d,{class:"widget-card-section"},{default:(0,a.w5)((()=>[(0,a.WI)(e.$slots,"widget-content")])),_:3})])):(0,a.kq)("",!0),"e"==s&&(0,i.SU)(t).element_s.length>=1?((0,a.wg)(),(0,a.iD)("span",K,[(0,a.Wm)(d,{class:"widget-card-section"},{default:(0,a.w5)((()=>[(0,a.Wm)(H,{use:(0,i.SU)(t)},null,8,["use"])])),_:1})])):(0,a.kq)("",!0),"a"==s?((0,a.wg)(),(0,a.iD)("span",L,[(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,i.SU)(t).dialog_s,(e=>((0,a.wg)(),(0,a.iD)("span",{key:e.id},["default"==e.activator?((0,a.wg)(),(0,a.j4)(u,{key:0,onClick:s=>(0,i.SU)(t).app.router.push({name:"subdialog",params:{subdialog_id:e.id,subitem_id:e.activator},query:(0,i.SU)(t).app.route.query}),icon:e.icon,dense:"",flat:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e.title)+"...",1)])),_:2},1032,["onClick","icon"])):(0,a.kq)("",!0)])))),128)),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,i.SU)(t).action_s,(e=>((0,a.wg)(),(0,a.iD)("span",{key:e.id},["default"==e.activator?((0,a.wg)(),(0,a.j4)(u,{key:0,onClick:s=>(0,i.SU)(t).ref[e.id].trigger(),icon:e.icon,dense:"",flat:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e.title),1)])),_:2},1032,["onClick","icon"])):(0,a.kq)("",!0)])))),128))])),_:1})])):(0,a.kq)("",!0)])))),128)),(0,a.Wm)(m)])),_:3})}}});var J=s(4458),G=s(2857),X=s(3190),ee=s(1821),te=s(926);const se=$,ae=se;v()($,"components",{QCard:J.Z,QToolbar:g.Z,QSpace:w.Z,QIcon:G.Z,QCardSection:X.Z,QCardActions:ee.Z,QBtn:f.Z,QSeparator:te.Z});const ie={inheritAttrs:!1},oe=Object.assign(ie,{__name:"uf-widget-default",setup(e){(0,a.l1)().use;return(e,t)=>((0,a.wg)(),(0,a.iD)("span"))}}),le=oe,ne=le,re={key:0,class:"q-pb-sm"},de={class:"q-field__bottom"},ue={key:1,class:"q-pb-sm"},ce={key:2,class:"q-pb-sm"},me={key:3,class:"q-pb-sm"},pe={class:"q-gutter-xs row items-start"},he={key:4,class:"q-pb-sm"},ge={key:5,class:"q-pb-sm"},_e={key:6,class:"q-pb-sm"},we={key:7,class:"q-pb-sm"},fe={key:8,class:"q-pb-sm"},be={key:9,class:"q-pb-sm"},ye={key:10,class:"q-pb-sm"},ve={key:11,class:"text-negative"},ke=(0,a._)("br",null,null,-1),Ue=(0,a._)("br",null,null,-1),Se={inheritAttrs:!1},qe=Object.assign(Se,{__name:"uf-widget-form",setup(e){const t=(0,a.l1)().use;return t.data.rel_items_mode=!0,(e,s)=>{const o=(0,a.up)("q-toggle"),l=(0,a.up)("q-input"),r=(0,a.up)("q-select"),d=(0,a.up)("q-date"),u=(0,a.up)("q-popup-proxy"),c=(0,a.up)("q-time"),m=(0,a.up)("q-form");return(0,a.wg)(),(0,a.j4)(m,{greedy:""},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,i.SU)(t).active_s,(e=>((0,a.wg)(),(0,a.iD)("span",{key:e.id},[e.class.includes("BooleanField")?((0,a.wg)(),(0,a.iD)("div",re,[(0,a.Wm)(o,{modelValue:(0,i.SU)(t).data.item[e.name],"onUpdate:modelValue":s=>(0,i.SU)(t).data.item[e.name]=s,label:e.verbose_name},null,8,["modelValue","onUpdate:modelValue","label"]),(0,a._)("div",de,(0,n.zw)(e.help_text),1)])):e.class.includes("CharField")?((0,a.wg)(),(0,a.iD)("div",ue,[e.choices?((0,a.wg)(),(0,a.j4)(r,{key:1,dense:"",outlined:"","hide-bottom-space":"",modelValue:(0,i.SU)(t).data.item[e.name],"onUpdate:modelValue":s=>(0,i.SU)(t).data.item[e.name]=s,label:e.verbose_name,hint:e.help_text,"option-value":"value","option-label":"label",options:Object.entries(e.choices).map((([e,t])=>({label:e,value:t}))),"emit-value":"","map-options":""},null,8,["modelValue","onUpdate:modelValue","label","hint","options"])):((0,a.wg)(),(0,a.j4)(l,{key:0,dense:"",outlined:"","hide-bottom-space":"",modelValue:(0,i.SU)(t).data.item[e.name],"onUpdate:modelValue":s=>(0,i.SU)(t).data.item[e.name]=s,label:e.verbose_name,hint:e.help_text,error:(0,i.SU)(t).data.errors[e.name].length>0,"error-message":(0,i.SU)(t).getErrorMessage(e.name)},null,8,["modelValue","onUpdate:modelValue","label","hint","error","error-message"]))])):e.class.includes("DateField")?((0,a.wg)(),(0,a.iD)("div",ce,[(0,a.Wm)(l,{dense:"",outlined:"","hide-bottom-space":"",modelValue:(0,i.SU)(t).data.item[e.name],"onUpdate:modelValue":s=>(0,i.SU)(t).data.item[e.name]=s,mask:"####-##-##",label:e.verbose_name,hint:e.help_text,error:(0,i.SU)(t).data.errors[e.name].length>0,"error-message":(0,i.SU)(t).getErrorMessage(e.name)},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{"transition-show":"scale","transition-hide":"scale"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{modelValue:(0,i.SU)(t).data.item[e.name],"onUpdate:modelValue":s=>(0,i.SU)(t).data.item[e.name]=s,mask:"YYYY-MM-DD",color:"black"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1032,["modelValue","onUpdate:modelValue","label","hint","error","error-message"])])):e.class.includes("DateTimeField")?((0,a.wg)(),(0,a.iD)("div",me,[(0,a.Wm)(l,{dense:"",outlined:"","hide-bottom-space":"",modelValue:(0,i.SU)(t).data.item[e.name],"onUpdate:modelValue":s=>(0,i.SU)(t).data.item[e.name]=s,mask:"####-##-## ##:##",label:e.verbose_name,hint:e.help_text,error:(0,i.SU)(t).data.errors[e.name].length>0,"error-message":(0,i.SU)(t).getErrorMessage(e.name)},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{"transition-show":"scale","transition-hide":"scale"},{default:(0,a.w5)((()=>[(0,a._)("div",pe,[(0,a.Wm)(d,{modelValue:(0,i.SU)(t).data.item[e.name],"onUpdate:modelValue":s=>(0,i.SU)(t).data.item[e.name]=s,mask:"YYYY-MM-DD HH:mm",color:"black"},null,8,["modelValue","onUpdate:modelValue"]),(0,a.Wm)(c,{modelValue:(0,i.SU)(t).data.item[e.name],"onUpdate:modelValue":s=>(0,i.SU)(t).data.item[e.name]=s,format24h:"",mask:"YYYY-MM-DD HH:mm",color:"black"},null,8,["modelValue","onUpdate:modelValue"])])])),_:2},1024)])),_:2},1032,["modelValue","onUpdate:modelValue","label","hint","error","error-message"])])):e.class.includes("TextField")?((0,a.wg)(),(0,a.iD)("div",he,[(0,a.Wm)(l,{dense:"",outlined:"","hide-bottom-space":"",modelValue:(0,i.SU)(t).data.item[e.name],"onUpdate:modelValue":s=>(0,i.SU)(t).data.item[e.name]=s,label:e.verbose_name,hint:e.help_text,error:(0,i.SU)(t).data.errors[e.name].length>0,"error-message":(0,i.SU)(t).getErrorMessage(e.name),autogrow:""},null,8,["modelValue","onUpdate:modelValue","label","hint","error","error-message"])])):e.class.includes("FloatField")?((0,a.wg)(),(0,a.iD)("div",ge,[(0,a.Wm)(l,{type:"number",dense:"",outlined:"","hide-bottom-space":"",modelValue:(0,i.SU)(t).data.item[e.name],"onUpdate:modelValue":s=>(0,i.SU)(t).data.item[e.name]=s,modelModifiers:{number:!0},label:e.verbose_name,hint:e.help_text,error:(0,i.SU)(t).data.errors[e.name].length>0,"error-message":(0,i.SU)(t).getErrorMessage(e.name)},null,8,["modelValue","onUpdate:modelValue","label","hint","error","error-message"])])):e.class.includes("IntegerField")?((0,a.wg)(),(0,a.iD)("div",_e,[e.choices?((0,a.wg)(),(0,a.j4)(r,{key:1,dense:"",outlined:"","hide-bottom-space":"",modelValue:(0,i.SU)(t).data.item[e.name],"onUpdate:modelValue":s=>(0,i.SU)(t).data.item[e.name]=s,modelModifiers:{number:!0},label:e.verbose_name,hint:e.help_text,"option-value":"value","option-label":"label",options:Object.entries(e.choices).map((([e,t])=>({label:e,value:t}))),"emit-value":"","map-options":""},null,8,["modelValue","onUpdate:modelValue","label","hint","options"])):((0,a.wg)(),(0,a.j4)(l,{key:0,type:"number",dense:"",outlined:"","hide-bottom-space":"",modelValue:(0,i.SU)(t).data.item[e.name],"onUpdate:modelValue":s=>(0,i.SU)(t).data.item[e.name]=s,modelModifiers:{number:!0},label:e.verbose_name,hint:e.help_text,error:(0,i.SU)(t).data.errors[e.name].length>0,"error-message":(0,i.SU)(t).getErrorMessage(e.name)},null,8,["modelValue","onUpdate:modelValue","label","hint","error","error-message"]))])):e.class.includes("PasswordField")?((0,a.wg)(),(0,a.iD)("div",we,[(0,a.Wm)(l,{type:"password",dense:"",outlined:"","hide-bottom-space":"",modelValue:(0,i.SU)(t).data.item[e.name],"onUpdate:modelValue":s=>(0,i.SU)(t).data.item[e.name]=s,label:e.verbose_name,hint:e.help_text,error:(0,i.SU)(t).data.errors[e.name].length>0,"error-message":(0,i.SU)(t).getErrorMessage(e.name)},null,8,["modelValue","onUpdate:modelValue","label","hint","error","error-message"])])):e.class.includes("ForeignKeyField")?((0,a.wg)(),(0,a.iD)("div",fe,[(0,a.Wm)(r,{dense:"",outlined:"",modelValue:(0,i.SU)(t).data.item[e.name],"onUpdate:modelValue":s=>(0,i.SU)(t).data.item[e.name]=s,"options-dense":"",label:e.verbose_name,hint:e.help_text,"option-value":"id","option-label":"title",options:(0,i.SU)(t).data.rel_item_s[e.name],error:(0,i.SU)(t).data.errors[e.name].length>0,"error-message":(0,i.SU)(t).getErrorMessage(e.name)},null,8,["modelValue","onUpdate:modelValue","label","hint","options","error","error-message"])])):e.class.includes("BackrefAccessor")?((0,a.wg)(),(0,a.iD)("div",be,[(0,a.Wm)(r,{dense:"",outlined:"",modelValue:(0,i.SU)(t).data.item[e.name],"onUpdate:modelValue":s=>(0,i.SU)(t).data.item[e.name]=s,multiple:"","options-dense":"",label:e.verbose_name,hint:e.help_text,"option-value":"id","option-label":"title",options:(0,i.SU)(t).data.rel_item_s[e.name]},null,8,["modelValue","onUpdate:modelValue","label","hint","options"])])):e.class.includes("ManyToManyField")?((0,a.wg)(),(0,a.iD)("div",ye,[(0,a.Wm)(r,{dense:"",outlined:"",modelValue:(0,i.SU)(t).data.item[e.name],"onUpdate:modelValue":s=>(0,i.SU)(t).data.item[e.name]=s,multiple:"","options-dense":"",label:e.verbose_name,hint:e.help_text,"option-value":"id","option-label":"title",options:(0,i.SU)(t).data.rel_item_s[e.name]},null,8,["modelValue","onUpdate:modelValue","label","hint","options"])])):((0,a.wg)(),(0,a.iD)("div",ve,[(0,a.Uk)((0,n.zw)(e.class)+" is momentarily not implemented.",1),ke,Ue]))])))),128))])),_:1})}}});var De=s(3175),je=s(6611),xe=s(2762),Ve=s(2765),We=s(2952),Ze=s(6770);const Qe=qe,Ce=Qe;v()(qe,"components",{QForm:T.Z,QToggle:De.Z,QField:B.Z,QInput:je.Z,QSelect:xe.Z,QPopupProxy:Ve.Z,QDate:We.Z,QTime:Ze.Z});const Ee={class:"row"},Ie={class:"row"},Ae={key:0,class:"col-auto text-body"},Fe={key:1,class:"col-auto text-body"},Oe={class:"col-auto"},Me={inheritAttrs:!1},ze=Object.assign(Me,{__name:"uf-widget-info",setup(e){const t=(0,a.l1)().use;return(e,s)=>{const o=(0,a.up)("q-btn");return(0,a.wg)(),(0,a.iD)("div",Ee,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,i.SU)(t).active_s,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"widget-info-col col-lg-3 col-md-6 col-sm-12",key:e.id},[(0,a._)("h6",null,(0,n.zw)(e.verbose_name),1),(0,a._)("div",Ie,[(0,i.SU)(t).data.item[e.column_name]?((0,a.wg)(),(0,a.iD)("div",Ae,(0,n.zw)((0,i.SU)(t).data.item[e.column_name]),1)):((0,a.wg)(),(0,a.iD)("div",Fe,"null "+(0,n.zw)(e.verbose_name),1)),(0,a._)("div",Oe,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,i.SU)(t).dialog_s,(s=>((0,a.wg)(),(0,a.iD)("span",{key:s.id},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.widget_s,(l=>((0,a.wg)(),(0,a.iD)("span",{key:l.key},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.active_s,(l=>((0,a.wg)(),(0,a.iD)("span",{key:l.name},["context"==s.activator&&e.column_name==l.column_name?((0,a.wg)(),(0,a.j4)(o,{key:0,class:"widget-info-col-btn",round:"",dense:"",flat:"",size:"xs",icon:s.icon,onClick:e=>(0,i.SU)(t).app.router.push({name:"subdialog",params:{subdialog_id:s.id,subitem_id:(0,i.SU)(t).data.item.id},query:(0,i.SU)(t).app.route.query})},null,8,["icon","onClick"])):(0,a.kq)("",!0)])))),128))])))),128))])))),128))])])])))),128))])}}}),Te=ze,Be=Te;v()(ze,"components",{QBtn:f.Z});const Pe={inheritAttrs:!1},Ye=Object.assign(Pe,{__name:"uf-widget-table",setup(e){const t=(0,a.l1)().use;function s(){let e=[];return e.push({name:"gotos",label:"",field:"gotos"}),e.push({name:"actions",label:"",filed:"actions"}),t.active_s.forEach((t=>{var s={};s=t.class.includes("ForeignKeyField")?{name:t.column_name,label:t.verbose_name,field:function(e){return e[t.name]?e[t.name]["title"]:null},sortable:!0}:{name:t.column_name,label:t.verbose_name,field:t.column_name,sortable:!0},e.push(s)})),e}return t.data.items_mode=!0,(e,o)=>{const l=(0,a.up)("q-table");return(0,a.wg)(),(0,a.j4)(l,{columns:s(),rows:(0,i.SU)(t).data.item_s,flat:""},null,8,["columns","rows"])}}});var He=s(7580);const Re=Ye,Ke=Re;v()(Ye,"components",{QTable:He.Z});const Le={__name:"uf-widget",props:{id:{}},setup(e){const t=e,s=(0,i.qj)(new Z(t.id));s.data;for(const a of s.action_s)new Q.B(a.id);return(e,t)=>((0,a.wg)(),(0,a.j4)(ae,{use:s},{"widget-content":(0,a.w5)((()=>["default"==s.type?((0,a.wg)(),(0,a.j4)(ne,{key:0,use:s},null,8,["use"])):(0,a.kq)("",!0),"form"==s.type?((0,a.wg)(),(0,a.j4)(Ce,{key:1,use:s},null,8,["use"])):(0,a.kq)("",!0),"info"==s.type?((0,a.wg)(),(0,a.j4)(Be,{key:2,use:s},null,8,["use"])):(0,a.kq)("",!0),"table"==s.type?((0,a.wg)(),(0,a.j4)(Ke,{key:3,use:s},null,8,["use"])):(0,a.kq)("",!0)])),_:1},8,["use"]))}},Ne=Le,$e=Ne,Je={inheritAttrs:!1},Ge=Object.assign(Je,{__name:"uf-dialog-standard",setup(e){const t=(0,a.l1)().use;return(e,s)=>((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,i.SU)(t).sum_widget_s,(e=>((0,a.wg)(),(0,a.iD)("span",{key:e.id},[(0,a.Wm)($e,{id:e.id},null,8,["id"])])))),128))}}),Xe=Ge,et=Xe,tt={__name:"uf-dialog",props:{id:{}},setup(e){const t=e,s=(0,i.qj)(new l(t.id));return(e,t)=>((0,a.wg)(),(0,a.j4)(V,{use:s},{"dialog-content":(0,a.w5)((()=>["standard"==s.type?((0,a.wg)(),(0,a.j4)(et,{key:0,use:s},null,8,["use"])):(0,a.kq)("",!0)])),_:1},8,["use"]))}},st=tt,at=st},5288:(e,t,s)=>{s.d(t,{Z:()=>n});var a=s(9835);const i={inheritAttrs:!1},o=Object.assign(i,{__name:"uf-layout-injector",setup(e){const t=(0,a.l1)().use;return t.ql=(0,a.f3)("_q_l_"),(e,t)=>((0,a.wg)(),(0,a.iD)("span"))}}),l=o,n=l}},t={};function s(a){var i=t[a];if(void 0!==i)return i.exports;var o=t[a]={exports:{}};return e[a](o,o.exports,s),o.exports}s.m=e,(()=>{var e=[];s.O=(t,a,i,o)=>{if(!a){var l=1/0;for(u=0;u<e.length;u++){for(var[a,i,o]=e[u],n=!0,r=0;r<a.length;r++)(!1&o||l>=o)&&Object.keys(s.O).every((e=>s.O[e](a[r])))?a.splice(r--,1):(n=!1,o<l&&(l=o));if(n){e.splice(u--,1);var d=i();void 0!==d&&(t=d)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[a,i,o]}})(),(()=>{s.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;return s.d(t,{a:t}),t}})(),(()=>{s.d=(e,t)=>{for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}})(),(()=>{s.f={},s.e=e=>Promise.all(Object.keys(s.f).reduce(((t,a)=>(s.f[a](e,t),t)),[]))})(),(()=>{s.u=e=>"js/"+e+"."+{65:"80030847",495:"9d59bccf"}[e]+".js"})(),(()=>{s.miniCssF=e=>"css/"+e+".894b0670.css"})(),(()=>{s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{var e={},t="uniform_front:";s.l=(a,i,o,l)=>{if(e[a])e[a].push(i);else{var n,r;if(void 0!==o)for(var d=document.getElementsByTagName("script"),u=0;u<d.length;u++){var c=d[u];if(c.getAttribute("src")==a||c.getAttribute("data-webpack")==t+o){n=c;break}}n||(r=!0,n=document.createElement("script"),n.charset="utf-8",n.timeout=120,s.nc&&n.setAttribute("nonce",s.nc),n.setAttribute("data-webpack",t+o),n.src=a),e[a]=[i];var m=(t,s)=>{n.onerror=n.onload=null,clearTimeout(p);var i=e[a];if(delete e[a],n.parentNode&&n.parentNode.removeChild(n),i&&i.forEach((e=>e(s))),t)return t(s)},p=setTimeout(m.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=m.bind(null,n.onerror),n.onload=m.bind(null,n.onload),r&&document.head.appendChild(n)}}})(),(()=>{s.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{s.p="/static/"})(),(()=>{if("undefined"!==typeof document){var e=(e,t,s,a,i)=>{var o=document.createElement("link");o.rel="stylesheet",o.type="text/css";var l=s=>{if(o.onerror=o.onload=null,"load"===s.type)a();else{var l=s&&("load"===s.type?"missing":s.type),n=s&&s.target&&s.target.href||t,r=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");r.code="CSS_CHUNK_LOAD_FAILED",r.type=l,r.request=n,o.parentNode.removeChild(o),i(r)}};return o.onerror=o.onload=l,o.href=t,s?s.parentNode.insertBefore(o,s.nextSibling):document.head.appendChild(o),o},t=(e,t)=>{for(var s=document.getElementsByTagName("link"),a=0;a<s.length;a++){var i=s[a],o=i.getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(o===e||o===t))return i}var l=document.getElementsByTagName("style");for(a=0;a<l.length;a++){i=l[a],o=i.getAttribute("data-href");if(o===e||o===t)return i}},a=a=>new Promise(((i,o)=>{var l=s.miniCssF(a),n=s.p+l;if(t(l,n))return i();e(a,n,null,i,o)})),i={143:0};s.f.miniCss=(e,t)=>{var s={495:1};i[e]?t.push(i[e]):0!==i[e]&&s[e]&&t.push(i[e]=a(e).then((()=>{i[e]=0}),(t=>{throw delete i[e],t})))}}})(),(()=>{var e={143:0};s.f.j=(t,a)=>{var i=s.o(e,t)?e[t]:void 0;if(0!==i)if(i)a.push(i[2]);else{var o=new Promise(((s,a)=>i=e[t]=[s,a]));a.push(i[2]=o);var l=s.p+s.u(t),n=new Error,r=a=>{if(s.o(e,t)&&(i=e[t],0!==i&&(e[t]=void 0),i)){var o=a&&("load"===a.type?"missing":a.type),l=a&&a.target&&a.target.src;n.message="Loading chunk "+t+" failed.\n("+o+": "+l+")",n.name="ChunkLoadError",n.type=o,n.request=l,i[1](n)}};s.l(l,r,"chunk-"+t,t)}},s.O.j=t=>0===e[t];var t=(t,a)=>{var i,o,[l,n,r]=a,d=0;if(l.some((t=>0!==e[t]))){for(i in n)s.o(n,i)&&(s.m[i]=n[i]);if(r)var u=r(s)}for(t&&t(a);d<l.length;d++)o=l[d],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(u)},a=globalThis["webpackChunkuniform_front"]=globalThis["webpackChunkuniform_front"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var a=s.O(void 0,[736],(()=>s(3400)));a=s.O(a)})();